{"version":3,"sources":["webpack:///webpack/bootstrap be2b6727ac7bb6342237","webpack:///./node_modules/anchorme/dist-node/util.js","webpack:///./node_modules/anchorme/dist-node/lists.js","webpack:///./node_modules/preact/dist/preact.esm.js","webpack:///./node_modules/anchorme/dist-node/tests/email.js","webpack:///./node_modules/anchorme/dist-node/tests/ip.js","webpack:///./node_modules/anchorme/dist-node/tests/url.js","webpack:///./node_modules/anchorme/dist-node/separate/separate.js","webpack:///./node_modules/anchorme/dist-node/tests/hasprotocol.js","webpack:///./src/js/TourRenderer/TourRenderer.tsx","webpack:///./src/less/tour-renderer.less","webpack:///./node_modules/pannellum/build/pannellum.js","webpack:///./src/js/TourRenderer/helpers.ts","webpack:///./src/js/TourRenderer/models/Defer.ts","webpack:///./src/js/TourRenderer/models/InfoElement.tsx","webpack:///./node_modules/linkstate/dist/linkstate.es.js","webpack:///./node_modules/anchorme/dist-node/index.js","webpack:///./node_modules/anchorme/dist-node/transform/transform.js","webpack:///./node_modules/anchorme/dist-node/separate/fix.js","webpack:///./node_modules/anchorme/dist-node/transform/identify.js","webpack:///./node_modules/dompurify/dist/purify.js","webpack:///./src/js/TourRenderer/models/Hashtable.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACrDA;AACA,8CAA8C,cAAc;AAC5D;AACA;;;;;;;;;;;;;;;ACHA;AAAA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY,MAAM;AAClB;AACA,iBAAiB;;AAEjB;AACA,2BAA2B;;AAE3B;AACA,4BAA4B;;AAE5B;AACA,8BAA8B;AAC9B;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,0BAA0B,YAAY;AACpD;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,SAAS;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA,GAAG;AACH;;AAEA;AACA,kCAAkC,0DAA0D;AAC5F;;AAEA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA;;AAEA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB;AACA;AACA,2CAA2C;AAC3C;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,OAAO;AACpB;AACA;AACA,uBAAuB;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,WAAW,IAAI;AACf,WAAW,IAAI;AACf,WAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,2CAA2C;AAC3C,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,sFAAsF;AACtF,GAAG;AACH,0FAA0F;AAC1F;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB,WAAW,MAAM;AACjB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C,KAAK;AACjD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,UAAU;AAC3B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,KAAK;AAChB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,QAAQ,wCAAwC,mCAAmC;AAC9F,WAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA,WAAW,UAAU;AACrB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB,WAAW,MAAM;AACjB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,WAAW,UAAU;AACrB;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW;AACX;AACA;;AAEA;AACA,WAAW;AACX;AACA;;AAEA;AACA,WAAW;AACX;AACA;AACA;;AAEA;;AAEA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,cAAc,QAAQ;AACtB;AACA;AACA;;AAEA;AACA,YAAY,OAAO;AACnB,YAAY,SAAS;AACrB;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA,EAAE;;;AAGF;AACA,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA;AACA;AACA,CAAC;;AAED;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO,YAAY,OAAO;AAC7C;AACA;AACA;AACA,8BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEQ;AACR;AACA;;;;;;;;AC7+BA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA,wCAAwC,EAAE,sBAAsB,GAAG;AACnE;AACA;AACA,wBAAwB,EAAE;AAC1B,SAAS,GAAG,wBAAwB,EAAE;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC7BA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA,oBAAoB,IAAI,IAAI,EAAE,GAAG,IAAI,KAAK,IAAI,2CAA2C;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC/BA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA,0DAA0D,GAAG,oBAAoB,IAAI,4CAA4C;AACjI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACpBA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC1BA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AClBA,uBAAuC;AACvC,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AS;AACxB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB;AACnB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,8BAA8B;AAC7D;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,2BAA2B;AACzF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2BAA2B,0BAA0B;AACrD,+BAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA,2BAA2B,2BAA2B;AACtD,+BAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA;AACA,2BAA2B,0BAA0B;AACrD,+BAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA,2BAA2B,2BAA2B;AACtD,+BAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA,mBAAmB;AACnB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD,uBAAuB;AACvB;AACA,SAAS;AACT;AACA;AACA;AACA,mEAAmE;AACnE,uBAAuB;AACvB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA,uBAAuB,iCAAiC;AACxD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,4BAA4B,iCAAiC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,aAAa;AAC5B,eAAe,aAAa;AAC5B,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,aAAa;AAC5B,eAAe,aAAa;AAC5B,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,iCAAiC;AAC7D;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mFAAmF;AACnF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,aAAa;AAC5B,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2BAA2B,8BAA8B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,qBAAqB;AACpD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,SAAS;AACxB,eAAe,OAAO;AACtB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,SAAS;AACxB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,SAAS;AACxB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,MAAM;AACrB,eAAe,aAAa;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA,uBAAuB,cAAc;AACrC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,eAAe,aAAa;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,SAAS;AACxB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,SAAS;AACxB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,SAAS;AACxB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,SAAS;AACxB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2BAA2B;AAC3B,yBAAyB;;AAEzB,cAAc;AACd;AACA,8CAA8C;;AAE9C;AACA,6BAA6B;AAC7B,EAAE;AACF;;AAEA;AACA;AACA,4BAA4B;AAC5B,2BAA2B;;AAE3B,2BAA2B;AAC3B,4BAA4B;;AAE5B,iCAAiC;;AAEjC,kBAAkB;AAClB;AACA,yEAAyE;;AAEzE;AACA,6BAA6B;AAC7B,EAAE;AACF;;AAEA;AACA;AACA,yBAAyB;;AAEzB,6BAA6B;AAC7B,qBAAqB;AACrB,uBAAuB;AACvB,mBAAmB;AACnB,mBAAmB;AACnB,mBAAmB;AACnB,oBAAoB;AACpB,qBAAqB;;AAErB,4CAA4C;;AAE5C;AACA,2BAA2B;AAC3B,iCAAiC;;AAEjC;AACA,yBAAyB;;AAEzB;AACA,gCAAgC;;AAEhC,cAAc;AACd;AACA,4CAA4C;AAC5C,4BAA4B;AAC5B,+BAA+B;AAC/B,+BAA+B;AAC/B,2CAA2C;AAC3C,2CAA2C;AAC3C,mCAAmC;AACnC,mCAAmC;AACnC,iDAAiD;AACjD,8CAA8C;AAC9C,yDAAyD;AACzD,kEAAkE;AAClE;;AAEA;AACA;AACA;AACA,6BAA6B;AAC7B,qGAAqG;AACrG,EAAE;AACF;;AAEA;AACA;AACA;AACA,8CAA8C;;AAE9C;AACA,sDAAsD;;AAEtD;AACA;AACA;AACA,0CAA0C;AAC1C;AACA,uHAAuH;AACvH,EAAE;AACF;;AAEA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B,gCAAgC;;AAEhC,kBAAkB;AAClB;AACA,qDAAqD;AACrD,8BAA8B;AAC9B,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;;AAEA,CAAC;AACD;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,gCAAgC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,+BAA+B;AAC/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gEAAgE,qBAAqB;AACrF,iEAAiE,qBAAqB;AACtF,kEAAkE,qBAAqB;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,qDAAqD;AACrD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B,mBAAmB;AAC7C;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,WAAW;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,4BAA4B;AACzE,6CAA6C,iCAAiC;AAC9E;AACA;;AAEA;AACA;AACA;AACA,WAAW,WAAW;AACtB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,WAAW;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,WAAW;AACtB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,WAAW;AACtB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,WAAW;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,WAAW;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,WAAW;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA,iCAAiC,+CAA+C;AAChF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,aAAa;AACxB;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,WAAW;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,mBAAmB;AAC1D,gCAAgC;;AAEhC;AACA;AACA,uCAAuC,mBAAmB;AAC1D,gCAAgC;;AAEhC;AACA;AACA,uCAAuC,mBAAmB;AAC1D,gCAAgC;;AAEhC;AACA;AACA,uCAAuC,mBAAmB;AAC1D,gCAAgC;;AAEhC;AACA;AACA,uCAAuC,mBAAmB;AAC1D,gCAAgC;;AAEhC;AACA;AACA,uCAAuC,mBAAmB;AAC1D,gCAAgC;;AAEhC;AACA;AACA,uCAAuC,mBAAmB;AAC1D,gCAAgC;;AAEhC;AACA;AACA,uCAAuC,mBAAmB;AAC1D,gCAAgC;;AAEhC;AACA;AACA,uCAAuC,mBAAmB;AAC1D,gCAAgC;;AAEhC;AACA;AACA,uCAAuC,mBAAmB;AAC1D;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gHAAgH,kCAAkC;;AAElJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,WAAW;AACtB,aAAa,WAAW;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,WAAW;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,WAAW;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,uBAAuB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2HAA2H,kBAAkB;AAC7I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,4CAA4C;AAC5C,gCAAgC;AAChC,+BAA+B;AAC/B,8BAA8B;AAC9B,8BAA8B;AAC9B,gCAAgC;AAChC,kCAAkC;AAClC;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,WAAW;AACtB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA,wEAAwE;AACxE;AACA,uDAAuD;AACvD,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA,mBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AA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BAAmB,EAAE,qBAAqB;IAC1C,mBAAmB,EAAE,qBAAqB;CAC1C,CAAC;AALH,8BAqIC;;;;;;;;AC7ID;AAAA;AACA;AACA;AACA,8BAA8B,qBAAqB;AACnD;AACA;;AAEA;AACA,WAAW,UAAU;AACrB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,SAAS;AACtB;AACA;AACA;AACA,kDAAkD;;AAElD;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS,iBAAiB;AAC1B,6EAA6E;AAC7E;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;;;;;;;AChCA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;AC1BA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,2BAA2B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;;;;;;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC3DA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;AChEA;AACA;AACA;AACA;AACA,CAAC,qBAAqB;;AAEtB;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,EAAE,iBAAiB,EAAE,IAAI;AAChD;AACA,6CAA6C;AAC7C,iCAAiC;AACjC,6GAA6G;AAC7G;AACA,oFAAoF;;AAEpF,oGAAoG,mBAAmB,EAAE,mBAAmB,8HAA8H;;AAE1Q,kCAAkC,0BAA0B,0CAA0C,gBAAgB,OAAO,kBAAkB,EAAE,aAAa,EAAE,OAAO,wBAAwB,EAAE;;AAEjM;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAwC;;AAExC;AACA;AACA,wCAAwC;;AAExC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,mCAAmC;;AAEnC;AACA,iCAAiC;;AAEjC;AACA,uCAAuC;;AAEvC;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD,sDAAsD;AACtD,oDAAoD;AACpD,oDAAoD;AACpD;AACA,oDAAoD;AACpD,oDAAoD;AACpD,mEAAmE;AACnE,mDAAmD;AACnD,yDAAyD;AACzD,iDAAiD;AACjD,yCAAyC;AACzC,2DAA2D;AAC3D,uDAAuD;AACvD,yCAAyC;AACzC,8CAA8C;AAC9C,8CAA8C;;AAE9C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gBAAgB;AAC5C;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,sCAAsC;AACtC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,mCAAmC;AACjE,yEAAyE;AACzE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,mCAAmC;AACnE;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,mCAAmC;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;;AAEA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,YAAY;AACzB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,CAAC;AACD;;;;;;;;;;AC37BA;IAKC,YAAY,QAAa,EAAE,EAAE,OAAe,IAAI;QAC/C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC7C,CAAC;IAEM,GAAG,CAAC,IAAO;QACjB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC;QAEpC,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;IAEM,MAAM,CAAC,IAAyB;QACtC,EAAE,CAAC,CAAC,OAAO,IAAI,KAAK,QAAQ,IAAI,OAAO,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC1D,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACvB,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACV,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE,CAAC,EAAE,EAAE;gBACpC,EAAE,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;oBAChD,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC1B,CAAC;YACF,CAAC,CAAC,CAAC;YAEH,MAAM,CAAC,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAC5C,CAAC;QAED,MAAM,CAAC,KAAK,CAAC;IACd,CAAC;IAEM,GAAG,CAAC,QAAyB,CAAC;QACpC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACvD,CAAC;IAED,IAAI,MAAM;QACT,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;IAC3B,CAAC;IAED,IAAI,KAAK;QACR,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;IACpB,CAAC;IAEO,YAAY,CAAC,KAAU;QAC9B,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE;YACjC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC;YAC7B,MAAM,CAAC,GAAG,CAAC;QACZ,CAAC,EAAE,EAAE,CAAC,CAAC;IACR,CAAC;CACD;AAtDD,4BAsDC","file":"js/TourRenderer.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap be2b6727ac7bb6342237","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n *\n * Options defaulting function\n *\n**/\nfunction defaultOptions(options) {\n    if (!options) {\n        options = {\n            attributes: [],\n            ips: true,\n            emails: true,\n            urls: true,\n            files: true,\n            truncate: Infinity,\n            defaultProtocol: \"http://\",\n            list: false\n        };\n    }\n    if (typeof options.attributes !== \"object\")\n        options.attributes = [];\n    if (typeof options.ips !== \"boolean\")\n        options.ips = true;\n    if (typeof options.emails !== \"boolean\")\n        options.emails = true;\n    if (typeof options.urls !== \"boolean\")\n        options.urls = true;\n    if (typeof options.files !== \"boolean\")\n        options.files = true;\n    if (typeof options.list !== \"boolean\")\n        options.list = false;\n    if (typeof options.defaultProtocol !== \"string\" && typeof options.defaultProtocol !== \"function\")\n        options.defaultProtocol = \"http://\";\n    if (typeof options.truncate !== \"number\" && (typeof options.truncate !== \"object\" || options.truncate === null))\n        options.truncate = Infinity;\n    return options;\n}\nexports.defaultOptions = defaultOptions;\n/**\n *\n * Returns whether passed string\n * can be a valid port number or not\n *\n**/\nfunction isPort(value) {\n    if (isNaN(Number(value)))\n        return false;\n    if ((Number(value)) > 65535)\n        return false;\n    else\n        return true;\n}\nexports.isPort = isPort;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/anchorme/dist-node/util.js\n// module id = 0\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tlds = [\"com\", \"org\", \"net\", \"uk\", \"gov\", \"edu\", \"io\", \"cc\", \"co\", \"aaa\", \"aarp\", \"abarth\", \"abb\", \"abbott\", \"abbvie\", \"abc\", \"able\", \"abogado\", \"abudhabi\", \"ac\", \"academy\", \"accenture\", \"accountant\", \"accountants\", \"aco\", \"active\", \"actor\", \"ad\", \"adac\", \"ads\", \"adult\", \"ae\", \"aeg\", \"aero\", \"aetna\", \"af\", \"afamilycompany\", \"afl\", \"africa\", \"ag\", \"agakhan\", \"agency\", \"ai\", \"aig\", \"aigo\", \"airbus\", \"airforce\", \"airtel\", \"akdn\", \"al\", \"alfaromeo\", \"alibaba\", \"alipay\", \"allfinanz\", \"allstate\", \"ally\", \"alsace\", \"alstom\", \"am\", \"americanexpress\", \"americanfamily\", \"amex\", \"amfam\", \"amica\", \"amsterdam\", \"analytics\", \"android\", \"anquan\", \"anz\", \"ao\", \"aol\", \"apartments\", \"app\", \"apple\", \"aq\", \"aquarelle\", \"ar\", \"aramco\", \"archi\", \"army\", \"arpa\", \"art\", \"arte\", \"as\", \"asda\", \"asia\", \"associates\", \"at\", \"athleta\", \"attorney\", \"au\", \"auction\", \"audi\", \"audible\", \"audio\", \"auspost\", \"author\", \"auto\", \"autos\", \"avianca\", \"aw\", \"aws\", \"ax\", \"axa\", \"az\", \"azure\", \"ba\", \"baby\", \"baidu\", \"banamex\", \"bananarepublic\", \"band\", \"bank\", \"bar\", \"barcelona\", \"barclaycard\", \"barclays\", \"barefoot\", \"bargains\", \"baseball\", \"basketball\", \"bauhaus\", \"bayern\", \"bb\", \"bbc\", \"bbt\", \"bbva\", \"bcg\", \"bcn\", \"bd\", \"be\", \"beats\", \"beauty\", \"beer\", \"bentley\", \"berlin\", \"best\", \"bestbuy\", \"bet\", \"bf\", \"bg\", \"bh\", \"bharti\", \"bi\", \"bible\", \"bid\", \"bike\", \"bing\", \"bingo\", \"bio\", \"biz\", \"bj\", \"black\", \"blackfriday\", \"blanco\", \"blockbuster\", \"blog\", \"bloomberg\", \"blue\", \"bm\", \"bms\", \"bmw\", \"bn\", \"bnl\", \"bnpparibas\", \"bo\", \"boats\", \"boehringer\", \"bofa\", \"bom\", \"bond\", \"boo\", \"book\", \"booking\", \"boots\", \"bosch\", \"bostik\", \"boston\", \"bot\", \"boutique\", \"box\", \"br\", \"bradesco\", \"bridgestone\", \"broadway\", \"broker\", \"brother\", \"brussels\", \"bs\", \"bt\", \"budapest\", \"bugatti\", \"build\", \"builders\", \"business\", \"buy\", \"buzz\", \"bv\", \"bw\", \"by\", \"bz\", \"bzh\", \"ca\", \"cab\", \"cafe\", \"cal\", \"call\", \"calvinklein\", \"cam\", \"camera\", \"camp\", \"cancerresearch\", \"canon\", \"capetown\", \"capital\", \"capitalone\", \"car\", \"caravan\", \"cards\", \"care\", \"career\", \"careers\", \"cars\", \"cartier\", \"casa\", \"case\", \"caseih\", \"cash\", \"casino\", \"cat\", \"catering\", \"catholic\", \"cba\", \"cbn\", \"cbre\", \"cbs\", \"cd\", \"ceb\", \"center\", \"ceo\", \"cern\", \"cf\", \"cfa\", \"cfd\", \"cg\", \"ch\", \"chanel\", \"channel\", \"chase\", \"chat\", \"cheap\", \"chintai\", \"chloe\", \"christmas\", \"chrome\", \"chrysler\", \"church\", \"ci\", \"cipriani\", \"circle\", \"cisco\", \"citadel\", \"citi\", \"citic\", \"city\", \"cityeats\", \"ck\", \"cl\", \"claims\", \"cleaning\", \"click\", \"clinic\", \"clinique\", \"clothing\", \"cloud\", \"club\", \"clubmed\", \"cm\", \"cn\", \"coach\", \"codes\", \"coffee\", \"college\", \"cologne\", \"comcast\", \"commbank\", \"community\", \"company\", \"compare\", \"computer\", \"comsec\", \"condos\", \"construction\", \"consulting\", \"contact\", \"contractors\", \"cooking\", \"cookingchannel\", \"cool\", \"coop\", \"corsica\", \"country\", \"coupon\", \"coupons\", \"courses\", \"cr\", \"credit\", \"creditcard\", \"creditunion\", \"cricket\", \"crown\", \"crs\", \"cruise\", \"cruises\", \"csc\", \"cu\", \"cuisinella\", \"cv\", \"cw\", \"cx\", \"cy\", \"cymru\", \"cyou\", \"cz\", \"dabur\", \"dad\", \"dance\", \"data\", \"date\", \"dating\", \"datsun\", \"day\", \"dclk\", \"dds\", \"de\", \"deal\", \"dealer\", \"deals\", \"degree\", \"delivery\", \"dell\", \"deloitte\", \"delta\", \"democrat\", \"dental\", \"dentist\", \"desi\", \"design\", \"dev\", \"dhl\", \"diamonds\", \"diet\", \"digital\", \"direct\", \"directory\", \"discount\", \"discover\", \"dish\", \"diy\", \"dj\", \"dk\", \"dm\", \"dnp\", \"do\", \"docs\", \"doctor\", \"dodge\", \"dog\", \"doha\", \"domains\", \"dot\", \"download\", \"drive\", \"dtv\", \"dubai\", \"duck\", \"dunlop\", \"duns\", \"dupont\", \"durban\", \"dvag\", \"dvr\", \"dz\", \"earth\", \"eat\", \"ec\", \"eco\", \"edeka\", \"education\", \"ee\", \"eg\", \"email\", \"emerck\", \"energy\", \"engineer\", \"engineering\", \"enterprises\", \"epost\", \"epson\", \"equipment\", \"er\", \"ericsson\", \"erni\", \"es\", \"esq\", \"estate\", \"esurance\", \"et\", \"eu\", \"eurovision\", \"eus\", \"events\", \"everbank\", \"exchange\", \"expert\", \"exposed\", \"express\", \"extraspace\", \"fage\", \"fail\", \"fairwinds\", \"faith\", \"family\", \"fan\", \"fans\", \"farm\", \"farmers\", \"fashion\", \"fast\", \"fedex\", \"feedback\", \"ferrari\", \"ferrero\", \"fi\", \"fiat\", \"fidelity\", \"fido\", \"film\", \"final\", \"finance\", \"financial\", \"fire\", \"firestone\", \"firmdale\", \"fish\", \"fishing\", \"fit\", \"fitness\", \"fj\", \"fk\", \"flickr\", \"flights\", \"flir\", \"florist\", \"flowers\", \"fly\", \"fm\", \"fo\", \"foo\", \"food\", \"foodnetwork\", \"football\", \"ford\", \"forex\", \"forsale\", \"forum\", \"foundation\", \"fox\", \"fr\", \"free\", \"fresenius\", \"frl\", \"frogans\", \"frontdoor\", \"frontier\", \"ftr\", \"fujitsu\", \"fujixerox\", \"fun\", \"fund\", \"furniture\", \"futbol\", \"fyi\", \"ga\", \"gal\", \"gallery\", \"gallo\", \"gallup\", \"game\", \"games\", \"gap\", \"garden\", \"gb\", \"gbiz\", \"gd\", \"gdn\", \"ge\", \"gea\", \"gent\", \"genting\", \"george\", \"gf\", \"gg\", \"ggee\", \"gh\", \"gi\", \"gift\", \"gifts\", \"gives\", \"giving\", \"gl\", \"glade\", \"glass\", \"gle\", \"global\", \"globo\", \"gm\", \"gmail\", \"gmbh\", \"gmo\", \"gmx\", \"gn\", \"godaddy\", \"gold\", \"goldpoint\", \"golf\", \"goo\", \"goodhands\", \"goodyear\", \"goog\", \"google\", \"gop\", \"got\", \"gp\", \"gq\", \"gr\", \"grainger\", \"graphics\", \"gratis\", \"green\", \"gripe\", \"group\", \"gs\", \"gt\", \"gu\", \"guardian\", \"gucci\", \"guge\", \"guide\", \"guitars\", \"guru\", \"gw\", \"gy\", \"hair\", \"hamburg\", \"hangout\", \"haus\", \"hbo\", \"hdfc\", \"hdfcbank\", \"health\", \"healthcare\", \"help\", \"helsinki\", \"here\", \"hermes\", \"hgtv\", \"hiphop\", \"hisamitsu\", \"hitachi\", \"hiv\", \"hk\", \"hkt\", \"hm\", \"hn\", \"hockey\", \"holdings\", \"holiday\", \"homedepot\", \"homegoods\", \"homes\", \"homesense\", \"honda\", \"honeywell\", \"horse\", \"hospital\", \"host\", \"hosting\", \"hot\", \"hoteles\", \"hotmail\", \"house\", \"how\", \"hr\", \"hsbc\", \"ht\", \"htc\", \"hu\", \"hughes\", \"hyatt\", \"hyundai\", \"ibm\", \"icbc\", \"ice\", \"icu\", \"id\", \"ie\", \"ieee\", \"ifm\", \"ikano\", \"il\", \"im\", \"imamat\", \"imdb\", \"immo\", \"immobilien\", \"in\", \"industries\", \"infiniti\", \"info\", \"ing\", \"ink\", \"institute\", \"insurance\", \"insure\", \"int\", \"intel\", \"international\", \"intuit\", \"investments\", \"ipiranga\", \"iq\", \"ir\", \"irish\", \"is\", \"iselect\", \"ismaili\", \"ist\", \"istanbul\", \"it\", \"itau\", \"itv\", \"iveco\", \"iwc\", \"jaguar\", \"java\", \"jcb\", \"jcp\", \"je\", \"jeep\", \"jetzt\", \"jewelry\", \"jio\", \"jlc\", \"jll\", \"jm\", \"jmp\", \"jnj\", \"jo\", \"jobs\", \"joburg\", \"jot\", \"joy\", \"jp\", \"jpmorgan\", \"jprs\", \"juegos\", \"juniper\", \"kaufen\", \"kddi\", \"ke\", \"kerryhotels\", \"kerrylogistics\", \"kerryproperties\", \"kfh\", \"kg\", \"kh\", \"ki\", \"kia\", \"kim\", \"kinder\", \"kindle\", \"kitchen\", \"kiwi\", \"km\", \"kn\", \"koeln\", \"komatsu\", \"kosher\", \"kp\", \"kpmg\", \"kpn\", \"kr\", \"krd\", \"kred\", \"kuokgroup\", \"kw\", \"ky\", \"kyoto\", \"kz\", \"la\", \"lacaixa\", \"ladbrokes\", \"lamborghini\", \"lamer\", \"lancaster\", \"lancia\", \"lancome\", \"land\", \"landrover\", \"lanxess\", \"lasalle\", \"lat\", \"latino\", \"latrobe\", \"law\", \"lawyer\", \"lb\", \"lc\", \"lds\", \"lease\", \"leclerc\", \"lefrak\", \"legal\", \"lego\", \"lexus\", \"lgbt\", \"li\", \"liaison\", \"lidl\", \"life\", \"lifeinsurance\", \"lifestyle\", \"lighting\", \"like\", \"lilly\", \"limited\", \"limo\", \"lincoln\", \"linde\", \"link\", \"lipsy\", \"live\", \"living\", \"lixil\", \"lk\", \"loan\", \"loans\", \"locker\", \"locus\", \"loft\", \"lol\", \"london\", \"lotte\", \"lotto\", \"love\", \"lpl\", \"lplfinancial\", \"lr\", \"ls\", \"lt\", \"ltd\", \"ltda\", \"lu\", \"lundbeck\", \"lupin\", \"luxe\", \"luxury\", \"lv\", \"ly\", \"ma\", \"macys\", \"madrid\", \"maif\", \"maison\", \"makeup\", \"man\", \"management\", \"mango\", \"market\", \"marketing\", \"markets\", \"marriott\", \"marshalls\", \"maserati\", \"mattel\", \"mba\", \"mc\", \"mcd\", \"mcdonalds\", \"mckinsey\", \"md\", \"me\", \"med\", \"media\", \"meet\", \"melbourne\", \"meme\", \"memorial\", \"men\", \"menu\", \"meo\", \"metlife\", \"mg\", \"mh\", \"miami\", \"microsoft\", \"mil\", \"mini\", \"mint\", \"mit\", \"mitsubishi\", \"mk\", \"ml\", \"mlb\", \"mls\", \"mm\", \"mma\", \"mn\", \"mo\", \"mobi\", \"mobile\", \"mobily\", \"moda\", \"moe\", \"moi\", \"mom\", \"monash\", \"money\", \"monster\", \"montblanc\", \"mopar\", \"mormon\", \"mortgage\", \"moscow\", \"moto\", \"motorcycles\", \"mov\", \"movie\", \"movistar\", \"mp\", \"mq\", \"mr\", \"ms\", \"msd\", \"mt\", \"mtn\", \"mtpc\", \"mtr\", \"mu\", \"museum\", \"mutual\", \"mv\", \"mw\", \"mx\", \"my\", \"mz\", \"na\", \"nab\", \"nadex\", \"nagoya\", \"name\", \"nationwide\", \"natura\", \"navy\", \"nba\", \"nc\", \"ne\", \"nec\", \"netbank\", \"netflix\", \"network\", \"neustar\", \"new\", \"newholland\", \"news\", \"next\", \"nextdirect\", \"nexus\", \"nf\", \"nfl\", \"ng\", \"ngo\", \"nhk\", \"ni\", \"nico\", \"nike\", \"nikon\", \"ninja\", \"nissan\", \"nissay\", \"nl\", \"no\", \"nokia\", \"northwesternmutual\", \"norton\", \"now\", \"nowruz\", \"nowtv\", \"np\", \"nr\", \"nra\", \"nrw\", \"ntt\", \"nu\", \"nyc\", \"nz\", \"obi\", \"observer\", \"off\", \"office\", \"okinawa\", \"olayan\", \"olayangroup\", \"oldnavy\", \"ollo\", \"om\", \"omega\", \"one\", \"ong\", \"onl\", \"online\", \"onyourside\", \"ooo\", \"open\", \"oracle\", \"orange\", \"organic\", \"orientexpress\", \"origins\", \"osaka\", \"otsuka\", \"ott\", \"ovh\", \"pa\", \"page\", \"pamperedchef\", \"panasonic\", \"panerai\", \"paris\", \"pars\", \"partners\", \"parts\", \"party\", \"passagens\", \"pay\", \"pccw\", \"pe\", \"pet\", \"pf\", \"pfizer\", \"pg\", \"ph\", \"pharmacy\", \"philips\", \"phone\", \"photo\", \"photography\", \"photos\", \"physio\", \"piaget\", \"pics\", \"pictet\", \"pictures\", \"pid\", \"pin\", \"ping\", \"pink\", \"pioneer\", \"pizza\", \"pk\", \"pl\", \"place\", \"play\", \"playstation\", \"plumbing\", \"plus\", \"pm\", \"pn\", \"pnc\", \"pohl\", \"poker\", \"politie\", \"porn\", \"post\", \"pr\", \"pramerica\", \"praxi\", \"press\", \"prime\", \"pro\", \"prod\", \"productions\", \"prof\", \"progressive\", \"promo\", \"properties\", \"property\", \"protection\", \"pru\", \"prudential\", \"ps\", \"pt\", \"pub\", \"pw\", \"pwc\", \"py\", \"qa\", \"qpon\", \"quebec\", \"quest\", \"qvc\", \"racing\", \"radio\", \"raid\", \"re\", \"read\", \"realestate\", \"realtor\", \"realty\", \"recipes\", \"red\", \"redstone\", \"redumbrella\", \"rehab\", \"reise\", \"reisen\", \"reit\", \"reliance\", \"ren\", \"rent\", \"rentals\", \"repair\", \"report\", \"republican\", \"rest\", \"restaurant\", \"review\", \"reviews\", \"rexroth\", \"rich\", \"richardli\", \"ricoh\", \"rightathome\", \"ril\", \"rio\", \"rip\", \"rmit\", \"ro\", \"rocher\", \"rocks\", \"rodeo\", \"rogers\", \"room\", \"rs\", \"rsvp\", \"ru\", \"ruhr\", \"run\", \"rw\", \"rwe\", \"ryukyu\", \"sa\", \"saarland\", \"safe\", \"safety\", \"sakura\", \"sale\", \"salon\", \"samsclub\", \"samsung\", \"sandvik\", \"sandvikcoromant\", \"sanofi\", \"sap\", \"sapo\", \"sarl\", \"sas\", \"save\", \"saxo\", \"sb\", \"sbi\", \"sbs\", \"sc\", \"sca\", \"scb\", \"schaeffler\", \"schmidt\", \"scholarships\", \"school\", \"schule\", \"schwarz\", \"science\", \"scjohnson\", \"scor\", \"scot\", \"sd\", \"se\", \"seat\", \"secure\", \"security\", \"seek\", \"select\", \"sener\", \"services\", \"ses\", \"seven\", \"sew\", \"sex\", \"sexy\", \"sfr\", \"sg\", \"sh\", \"shangrila\", \"sharp\", \"shaw\", \"shell\", \"shia\", \"shiksha\", \"shoes\", \"shop\", \"shopping\", \"shouji\", \"show\", \"showtime\", \"shriram\", \"si\", \"silk\", \"sina\", \"singles\", \"site\", \"sj\", \"sk\", \"ski\", \"skin\", \"sky\", \"skype\", \"sl\", \"sling\", \"sm\", \"smart\", \"smile\", \"sn\", \"sncf\", \"so\", \"soccer\", \"social\", \"softbank\", \"software\", \"sohu\", \"solar\", \"solutions\", \"song\", \"sony\", \"soy\", \"space\", \"spiegel\", \"spot\", \"spreadbetting\", \"sr\", \"srl\", \"srt\", \"st\", \"stada\", \"staples\", \"star\", \"starhub\", \"statebank\", \"statefarm\", \"statoil\", \"stc\", \"stcgroup\", \"stockholm\", \"storage\", \"store\", \"stream\", \"studio\", \"study\", \"style\", \"su\", \"sucks\", \"supplies\", \"supply\", \"support\", \"surf\", \"surgery\", \"suzuki\", \"sv\", \"swatch\", \"swiftcover\", \"swiss\", \"sx\", \"sy\", \"sydney\", \"symantec\", \"systems\", \"sz\", \"tab\", \"taipei\", \"talk\", \"taobao\", \"target\", \"tatamotors\", \"tatar\", \"tattoo\", \"tax\", \"taxi\", \"tc\", \"tci\", \"td\", \"tdk\", \"team\", \"tech\", \"technology\", \"tel\", \"telecity\", \"telefonica\", \"temasek\", \"tennis\", \"teva\", \"tf\", \"tg\", \"th\", \"thd\", \"theater\", \"theatre\", \"tiaa\", \"tickets\", \"tienda\", \"tiffany\", \"tips\", \"tires\", \"tirol\", \"tj\", \"tjmaxx\", \"tjx\", \"tk\", \"tkmaxx\", \"tl\", \"tm\", \"tmall\", \"tn\", \"to\", \"today\", \"tokyo\", \"tools\", \"top\", \"toray\", \"toshiba\", \"total\", \"tours\", \"town\", \"toyota\", \"toys\", \"tr\", \"trade\", \"trading\", \"training\", \"travel\", \"travelchannel\", \"travelers\", \"travelersinsurance\", \"trust\", \"trv\", \"tt\", \"tube\", \"tui\", \"tunes\", \"tushu\", \"tv\", \"tvs\", \"tw\", \"tz\", \"ua\", \"ubank\", \"ubs\", \"uconnect\", \"ug\", \"unicom\", \"university\", \"uno\", \"uol\", \"ups\", \"us\", \"uy\", \"uz\", \"va\", \"vacations\", \"vana\", \"vanguard\", \"vc\", \"ve\", \"vegas\", \"ventures\", \"verisign\", \"versicherung\", \"vet\", \"vg\", \"vi\", \"viajes\", \"video\", \"vig\", \"viking\", \"villas\", \"vin\", \"vip\", \"virgin\", \"visa\", \"vision\", \"vista\", \"vistaprint\", \"viva\", \"vivo\", \"vlaanderen\", \"vn\", \"vodka\", \"volkswagen\", \"volvo\", \"vote\", \"voting\", \"voto\", \"voyage\", \"vu\", \"vuelos\", \"wales\", \"walmart\", \"walter\", \"wang\", \"wanggou\", \"warman\", \"watch\", \"watches\", \"weather\", \"weatherchannel\", \"webcam\", \"weber\", \"website\", \"wed\", \"wedding\", \"weibo\", \"weir\", \"wf\", \"whoswho\", \"wien\", \"wiki\", \"williamhill\", \"win\", \"windows\", \"wine\", \"winners\", \"wme\", \"wolterskluwer\", \"woodside\", \"work\", \"works\", \"world\", \"wow\", \"ws\", \"wtc\", \"wtf\", \"xbox\", \"xerox\", \"xfinity\", \"xihuan\", \"xin\", \"xn--11b4c3d\", \"xn--1ck2e1b\", \"xn--1qqw23a\", \"xn--30rr7y\", \"xn--3bst00m\", \"xn--3ds443g\", \"xn--3e0b707e\", \"xn--3oq18vl8pn36a\", \"xn--3pxu8k\", \"xn--42c2d9a\", \"xn--45brj9c\", \"xn--45q11c\", \"xn--4gbrim\", \"xn--54b7fta0cc\", \"xn--55qw42g\", \"xn--55qx5d\", \"xn--5su34j936bgsg\", \"xn--5tzm5g\", \"xn--6frz82g\", \"xn--6qq986b3xl\", \"xn--80adxhks\", \"xn--80ao21a\", \"xn--80aqecdr1a\", \"xn--80asehdb\", \"xn--80aswg\", \"xn--8y0a063a\", \"xn--90a3ac\", \"xn--90ae\", \"xn--90ais\", \"xn--9dbq2a\", \"xn--9et52u\", \"xn--9krt00a\", \"xn--b4w605ferd\", \"xn--bck1b9a5dre4c\", \"xn--c1avg\", \"xn--c2br7g\", \"xn--cck2b3b\", \"xn--cg4bki\", \"xn--clchc0ea0b2g2a9gcd\", \"xn--czr694b\", \"xn--czrs0t\", \"xn--czru2d\", \"xn--d1acj3b\", \"xn--d1alf\", \"xn--e1a4c\", \"xn--eckvdtc9d\", \"xn--efvy88h\", \"xn--estv75g\", \"xn--fct429k\", \"xn--fhbei\", \"xn--fiq228c5hs\", \"xn--fiq64b\", \"xn--fiqs8s\", \"xn--fiqz9s\", \"xn--fjq720a\", \"xn--flw351e\", \"xn--fpcrj9c3d\", \"xn--fzc2c9e2c\", \"xn--fzys8d69uvgm\", \"xn--g2xx48c\", \"xn--gckr3f0f\", \"xn--gecrj9c\", \"xn--gk3at1e\", \"xn--h2brj9c\", \"xn--hxt814e\", \"xn--i1b6b1a6a2e\", \"xn--imr513n\", \"xn--io0a7i\", \"xn--j1aef\", \"xn--j1amh\", \"xn--j6w193g\", \"xn--jlq61u9w7b\", \"xn--jvr189m\", \"xn--kcrx77d1x4a\", \"xn--kprw13d\", \"xn--kpry57d\", \"xn--kpu716f\", \"xn--kput3i\", \"xn--l1acc\", \"xn--lgbbat1ad8j\", \"xn--mgb9awbf\", \"xn--mgba3a3ejt\", \"xn--mgba3a4f16a\", \"xn--mgba7c0bbn0a\", \"xn--mgbaam7a8h\", \"xn--mgbab2bd\", \"xn--mgbai9azgqp6j\", \"xn--mgbayh7gpa\", \"xn--mgbb9fbpob\", \"xn--mgbbh1a71e\", \"xn--mgbc0a9azcg\", \"xn--mgbca7dzdo\", \"xn--mgberp4a5d4ar\", \"xn--mgbi4ecexp\", \"xn--mgbpl2fh\", \"xn--mgbt3dhd\", \"xn--mgbtx2b\", \"xn--mgbx4cd0ab\", \"xn--mix891f\", \"xn--mk1bu44c\", \"xn--mxtq1m\", \"xn--ngbc5azd\", \"xn--ngbe9e0a\", \"xn--node\", \"xn--nqv7f\", \"xn--nqv7fs00ema\", \"xn--nyqy26a\", \"xn--o3cw4h\", \"xn--ogbpf8fl\", \"xn--p1acf\", \"xn--p1ai\", \"xn--pbt977c\", \"xn--pgbs0dh\", \"xn--pssy2u\", \"xn--q9jyb4c\", \"xn--qcka1pmc\", \"xn--qxam\", \"xn--rhqv96g\", \"xn--rovu88b\", \"xn--s9brj9c\", \"xn--ses554g\", \"xn--t60b56a\", \"xn--tckwe\", \"xn--tiq49xqyj\", \"xn--unup4y\", \"xn--vermgensberater-ctb\", \"xn--vermgensberatung-pwb\", \"xn--vhquv\", \"xn--vuq861b\", \"xn--w4r85el8fhu5dnra\", \"xn--w4rs40l\", \"xn--wgbh1c\", \"xn--wgbl6a\", \"xn--xhq521b\", \"xn--xkc2al3hye2a\", \"xn--xkc2dl3a5ee0h\", \"xn--y9a3aq\", \"xn--yfro4i67o\", \"xn--ygbi2ammx\", \"xn--zfr164b\", \"xperia\", \"xxx\", \"xyz\", \"yachts\", \"yahoo\", \"yamaxun\", \"yandex\", \"ye\", \"yodobashi\", \"yoga\", \"yokohama\", \"you\", \"youtube\", \"yt\", \"yun\", \"za\", \"zappos\", \"zara\", \"zero\", \"zip\", \"zippo\", \"zm\", \"zone\", \"zuerich\", \"zw\"];\nexports.htmlAttrs = [\"src=\", \"data=\", \"href=\", \"cite=\", \"formaction=\", \"icon=\", \"manifest=\", \"poster=\", \"codebase=\", \"background=\", \"profile=\", \"usemap=\"];\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/anchorme/dist-node/lists.js\n// module id = 1\n// module chunks = 0","/** Virtual DOM Node */\nfunction VNode() {}\n\n/** Global options\n *\t@public\n *\t@namespace options {Object}\n */\nvar options = {\n\n\t/** If `true`, `prop` changes trigger synchronous component updates.\n  *\t@name syncComponentUpdates\n  *\t@type Boolean\n  *\t@default true\n  */\n\t//syncComponentUpdates: true,\n\n\t/** Processes all created VNodes.\n  *\t@param {VNode} vnode\tA newly-created VNode to normalize/process\n  */\n\t//vnode(vnode) { }\n\n\t/** Hook invoked after a component is mounted. */\n\t// afterMount(component) { }\n\n\t/** Hook invoked after the DOM is updated with a component's latest render. */\n\t// afterUpdate(component) { }\n\n\t/** Hook invoked immediately before a component is unmounted. */\n\t// beforeUnmount(component) { }\n};\n\nvar stack = [];\n\nvar EMPTY_CHILDREN = [];\n\n/**\n * JSX/hyperscript reviver.\n * @see http://jasonformat.com/wtf-is-jsx\n * Benchmarks: https://esbench.com/bench/57ee8f8e330ab09900a1a1a0\n *\n * Note: this is exported as both `h()` and `createElement()` for compatibility reasons.\n *\n * Creates a VNode (virtual DOM element). A tree of VNodes can be used as a lightweight representation\n * of the structure of a DOM tree. This structure can be realized by recursively comparing it against\n * the current _actual_ DOM structure, and applying only the differences.\n *\n * `h()`/`createElement()` accepts an element name, a list of attributes/props,\n * and optionally children to append to the element.\n *\n * @example The following DOM tree\n *\n * `<div id=\"foo\" name=\"bar\">Hello!</div>`\n *\n * can be constructed using this function as:\n *\n * `h('div', { id: 'foo', name : 'bar' }, 'Hello!');`\n *\n * @param {string} nodeName\tAn element name. Ex: `div`, `a`, `span`, etc.\n * @param {Object} attributes\tAny attributes/props to set on the created element.\n * @param rest\t\t\tAdditional arguments are taken to be children to append. Can be infinitely nested Arrays.\n *\n * @public\n */\nfunction h(nodeName, attributes) {\n\tvar children = EMPTY_CHILDREN,\n\t    lastSimple,\n\t    child,\n\t    simple,\n\t    i;\n\tfor (i = arguments.length; i-- > 2;) {\n\t\tstack.push(arguments[i]);\n\t}\n\tif (attributes && attributes.children != null) {\n\t\tif (!stack.length) stack.push(attributes.children);\n\t\tdelete attributes.children;\n\t}\n\twhile (stack.length) {\n\t\tif ((child = stack.pop()) && child.pop !== undefined) {\n\t\t\tfor (i = child.length; i--;) {\n\t\t\t\tstack.push(child[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof child === 'boolean') child = null;\n\n\t\t\tif (simple = typeof nodeName !== 'function') {\n\t\t\t\tif (child == null) child = '';else if (typeof child === 'number') child = String(child);else if (typeof child !== 'string') simple = false;\n\t\t\t}\n\n\t\t\tif (simple && lastSimple) {\n\t\t\t\tchildren[children.length - 1] += child;\n\t\t\t} else if (children === EMPTY_CHILDREN) {\n\t\t\t\tchildren = [child];\n\t\t\t} else {\n\t\t\t\tchildren.push(child);\n\t\t\t}\n\n\t\t\tlastSimple = simple;\n\t\t}\n\t}\n\n\tvar p = new VNode();\n\tp.nodeName = nodeName;\n\tp.children = children;\n\tp.attributes = attributes == null ? undefined : attributes;\n\tp.key = attributes == null ? undefined : attributes.key;\n\n\t// if a \"vnode hook\" is defined, pass every created VNode to it\n\tif (options.vnode !== undefined) options.vnode(p);\n\n\treturn p;\n}\n\n/**\n *  Copy all properties from `props` onto `obj`.\n *  @param {Object} obj\t\tObject onto which properties should be copied.\n *  @param {Object} props\tObject from which to copy properties.\n *  @returns obj\n *  @private\n */\nfunction extend(obj, props) {\n  for (var i in props) {\n    obj[i] = props[i];\n  }return obj;\n}\n\n/**\n * Call a function asynchronously, as soon as possible. Makes\n * use of HTML Promise to schedule the callback if available,\n * otherwise falling back to `setTimeout` (mainly for IE<11).\n *\n * @param {Function} callback\n */\nvar defer = typeof Promise == 'function' ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout;\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its children.\n * @param {VNode} vnode\t\tThe virutal DOM element to clone\n * @param {Object} props\tAttributes/props to add when cloning\n * @param {VNode} rest\t\tAny additional arguments will be used as replacement children.\n */\nfunction cloneElement(vnode, props) {\n  return h(vnode.nodeName, extend(extend({}, vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);\n}\n\n// DOM properties that should NOT have \"px\" added when numeric\nvar IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n\n/** Managed queue of dirty components to be re-rendered */\n\nvar items = [];\n\nfunction enqueueRender(component) {\n\tif (!component._dirty && (component._dirty = true) && items.push(component) == 1) {\n\t\t(options.debounceRendering || defer)(rerender);\n\t}\n}\n\nfunction rerender() {\n\tvar p,\n\t    list = items;\n\titems = [];\n\twhile (p = list.pop()) {\n\t\tif (p._dirty) renderComponent(p);\n\t}\n}\n\n/**\n * Check if two nodes are equivalent.\n *\n * @param {Node} node\t\t\tDOM Node to compare\n * @param {VNode} vnode\t\t\tVirtual DOM node to compare\n * @param {boolean} [hyrdating=false]\tIf true, ignores component constructors when comparing.\n * @private\n */\nfunction isSameNodeType(node, vnode, hydrating) {\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    return node.splitText !== undefined;\n  }\n  if (typeof vnode.nodeName === 'string') {\n    return !node._componentConstructor && isNamedNode(node, vnode.nodeName);\n  }\n  return hydrating || node._componentConstructor === vnode.nodeName;\n}\n\n/**\n * Check if an Element has a given nodeName, case-insensitively.\n *\n * @param {Element} node\tA DOM Element to inspect the name of.\n * @param {String} nodeName\tUnnormalized name to compare against.\n */\nfunction isNamedNode(node, nodeName) {\n  return node.normalizedNodeName === nodeName || node.nodeName.toLowerCase() === nodeName.toLowerCase();\n}\n\n/**\n * Reconstruct Component-style `props` from a VNode.\n * Ensures default/fallback values from `defaultProps`:\n * Own-properties of `defaultProps` not present in `vnode.attributes` are added.\n *\n * @param {VNode} vnode\n * @returns {Object} props\n */\nfunction getNodeProps(vnode) {\n  var props = extend({}, vnode.attributes);\n  props.children = vnode.children;\n\n  var defaultProps = vnode.nodeName.defaultProps;\n  if (defaultProps !== undefined) {\n    for (var i in defaultProps) {\n      if (props[i] === undefined) {\n        props[i] = defaultProps[i];\n      }\n    }\n  }\n\n  return props;\n}\n\n/** Create an element with the given nodeName.\n *\t@param {String} nodeName\n *\t@param {Boolean} [isSvg=false]\tIf `true`, creates an element within the SVG namespace.\n *\t@returns {Element} node\n */\nfunction createNode(nodeName, isSvg) {\n\tvar node = isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName);\n\tnode.normalizedNodeName = nodeName;\n\treturn node;\n}\n\n/** Remove a child node from its parent if attached.\n *\t@param {Element} node\t\tThe node to remove\n */\nfunction removeNode(node) {\n\tvar parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\n/** Set a named attribute on the given Node, with special behavior for some names and event handlers.\n *\tIf `value` is `null`, the attribute/handler will be removed.\n *\t@param {Element} node\tAn element to mutate\n *\t@param {string} name\tThe name/key to set, such as an event or attribute name\n *\t@param {any} old\tThe last value that was set for this name/node pair\n *\t@param {any} value\tAn attribute value, such as a function to be used as an event handler\n *\t@param {Boolean} isSvg\tAre we currently diffing inside an svg?\n *\t@private\n */\nfunction setAccessor(node, name, old, value, isSvg) {\n\tif (name === 'className') name = 'class';\n\n\tif (name === 'key') {\n\t\t// ignore\n\t} else if (name === 'ref') {\n\t\tif (old) old(null);\n\t\tif (value) value(node);\n\t} else if (name === 'class' && !isSvg) {\n\t\tnode.className = value || '';\n\t} else if (name === 'style') {\n\t\tif (!value || typeof value === 'string' || typeof old === 'string') {\n\t\t\tnode.style.cssText = value || '';\n\t\t}\n\t\tif (value && typeof value === 'object') {\n\t\t\tif (typeof old !== 'string') {\n\t\t\t\tfor (var i in old) {\n\t\t\t\t\tif (!(i in value)) node.style[i] = '';\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var i in value) {\n\t\t\t\tnode.style[i] = typeof value[i] === 'number' && IS_NON_DIMENSIONAL.test(i) === false ? value[i] + 'px' : value[i];\n\t\t\t}\n\t\t}\n\t} else if (name === 'dangerouslySetInnerHTML') {\n\t\tif (value) node.innerHTML = value.__html || '';\n\t} else if (name[0] == 'o' && name[1] == 'n') {\n\t\tvar useCapture = name !== (name = name.replace(/Capture$/, ''));\n\t\tname = name.toLowerCase().substring(2);\n\t\tif (value) {\n\t\t\tif (!old) node.addEventListener(name, eventProxy, useCapture);\n\t\t} else {\n\t\t\tnode.removeEventListener(name, eventProxy, useCapture);\n\t\t}\n\t\t(node._listeners || (node._listeners = {}))[name] = value;\n\t} else if (name !== 'list' && name !== 'type' && !isSvg && name in node) {\n\t\tsetProperty(node, name, value == null ? '' : value);\n\t\tif (value == null || value === false) node.removeAttribute(name);\n\t} else {\n\t\tvar ns = isSvg && name !== (name = name.replace(/^xlink\\:?/, ''));\n\t\tif (value == null || value === false) {\n\t\t\tif (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase());else node.removeAttribute(name);\n\t\t} else if (typeof value !== 'function') {\n\t\t\tif (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), value);else node.setAttribute(name, value);\n\t\t}\n\t}\n}\n\n/** Attempt to set a DOM property to the given value.\n *\tIE & FF throw for certain property-value combinations.\n */\nfunction setProperty(node, name, value) {\n\ttry {\n\t\tnode[name] = value;\n\t} catch (e) {}\n}\n\n/** Proxy an event to hooked event handlers\n *\t@private\n */\nfunction eventProxy(e) {\n\treturn this._listeners[e.type](options.event && options.event(e) || e);\n}\n\n/** Queue of components that have been mounted and are awaiting componentDidMount */\nvar mounts = [];\n\n/** Diff recursion count, used to track the end of the diff cycle. */\nvar diffLevel = 0;\n\n/** Global flag indicating if the diff is currently within an SVG */\nvar isSvgMode = false;\n\n/** Global flag indicating if the diff is performing hydration */\nvar hydrating = false;\n\n/** Invoke queued componentDidMount lifecycle methods */\nfunction flushMounts() {\n\tvar c;\n\twhile (c = mounts.pop()) {\n\t\tif (options.afterMount) options.afterMount(c);\n\t\tif (c.componentDidMount) c.componentDidMount();\n\t}\n}\n\n/** Apply differences in a given vnode (and it's deep children) to a real DOM Node.\n *\t@param {Element} [dom=null]\t\tA DOM node to mutate into the shape of the `vnode`\n *\t@param {VNode} vnode\t\t\tA VNode (with descendants forming a tree) representing the desired DOM structure\n *\t@returns {Element} dom\t\t\tThe created/mutated element\n *\t@private\n */\nfunction diff(dom, vnode, context, mountAll, parent, componentRoot) {\n\t// diffLevel having been 0 here indicates initial entry into the diff (not a subdiff)\n\tif (!diffLevel++) {\n\t\t// when first starting the diff, check if we're diffing an SVG or within an SVG\n\t\tisSvgMode = parent != null && parent.ownerSVGElement !== undefined;\n\n\t\t// hydration is indicated by the existing element to be diffed not having a prop cache\n\t\thydrating = dom != null && !('__preactattr_' in dom);\n\t}\n\n\tvar ret = idiff(dom, vnode, context, mountAll, componentRoot);\n\n\t// append the element if its a new parent\n\tif (parent && ret.parentNode !== parent) parent.appendChild(ret);\n\n\t// diffLevel being reduced to 0 means we're exiting the diff\n\tif (! --diffLevel) {\n\t\thydrating = false;\n\t\t// invoke queued componentDidMount lifecycle methods\n\t\tif (!componentRoot) flushMounts();\n\t}\n\n\treturn ret;\n}\n\n/** Internals of `diff()`, separated to allow bypassing diffLevel / mount flushing. */\nfunction idiff(dom, vnode, context, mountAll, componentRoot) {\n\tvar out = dom,\n\t    prevSvgMode = isSvgMode;\n\n\t// empty values (null, undefined, booleans) render as empty Text nodes\n\tif (vnode == null || typeof vnode === 'boolean') vnode = '';\n\n\t// Fast case: Strings & Numbers create/update Text nodes.\n\tif (typeof vnode === 'string' || typeof vnode === 'number') {\n\n\t\t// update if it's already a Text node:\n\t\tif (dom && dom.splitText !== undefined && dom.parentNode && (!dom._component || componentRoot)) {\n\t\t\t/* istanbul ignore if */ /* Browser quirk that can't be covered: https://github.com/developit/preact/commit/fd4f21f5c45dfd75151bd27b4c217d8003aa5eb9 */\n\t\t\tif (dom.nodeValue != vnode) {\n\t\t\t\tdom.nodeValue = vnode;\n\t\t\t}\n\t\t} else {\n\t\t\t// it wasn't a Text node: replace it with one and recycle the old Element\n\t\t\tout = document.createTextNode(vnode);\n\t\t\tif (dom) {\n\t\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\t\t\t\trecollectNodeTree(dom, true);\n\t\t\t}\n\t\t}\n\n\t\tout['__preactattr_'] = true;\n\n\t\treturn out;\n\t}\n\n\t// If the VNode represents a Component, perform a component diff:\n\tvar vnodeName = vnode.nodeName;\n\tif (typeof vnodeName === 'function') {\n\t\treturn buildComponentFromVNode(dom, vnode, context, mountAll);\n\t}\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tisSvgMode = vnodeName === 'svg' ? true : vnodeName === 'foreignObject' ? false : isSvgMode;\n\n\t// If there's no existing element or it's the wrong type, create a new one:\n\tvnodeName = String(vnodeName);\n\tif (!dom || !isNamedNode(dom, vnodeName)) {\n\t\tout = createNode(vnodeName, isSvgMode);\n\n\t\tif (dom) {\n\t\t\t// move children into the replacement node\n\t\t\twhile (dom.firstChild) {\n\t\t\t\tout.appendChild(dom.firstChild);\n\t\t\t} // if the previous Element was mounted into the DOM, replace it inline\n\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\n\t\t\t// recycle the old element (skips non-Element node types)\n\t\t\trecollectNodeTree(dom, true);\n\t\t}\n\t}\n\n\tvar fc = out.firstChild,\n\t    props = out['__preactattr_'],\n\t    vchildren = vnode.children;\n\n\tif (props == null) {\n\t\tprops = out['__preactattr_'] = {};\n\t\tfor (var a = out.attributes, i = a.length; i--;) {\n\t\t\tprops[a[i].name] = a[i].value;\n\t\t}\n\t}\n\n\t// Optimization: fast-path for elements containing a single TextNode:\n\tif (!hydrating && vchildren && vchildren.length === 1 && typeof vchildren[0] === 'string' && fc != null && fc.splitText !== undefined && fc.nextSibling == null) {\n\t\tif (fc.nodeValue != vchildren[0]) {\n\t\t\tfc.nodeValue = vchildren[0];\n\t\t}\n\t}\n\t// otherwise, if there are existing or new children, diff them:\n\telse if (vchildren && vchildren.length || fc != null) {\n\t\t\tinnerDiffNode(out, vchildren, context, mountAll, hydrating || props.dangerouslySetInnerHTML != null);\n\t\t}\n\n\t// Apply attributes/props from VNode to the DOM Element:\n\tdiffAttributes(out, vnode.attributes, props);\n\n\t// restore previous SVG mode: (in case we're exiting an SVG namespace)\n\tisSvgMode = prevSvgMode;\n\n\treturn out;\n}\n\n/** Apply child and attribute changes between a VNode and a DOM Node to the DOM.\n *\t@param {Element} dom\t\t\tElement whose children should be compared & mutated\n *\t@param {Array} vchildren\t\tArray of VNodes to compare to `dom.childNodes`\n *\t@param {Object} context\t\t\tImplicitly descendant context object (from most recent `getChildContext()`)\n *\t@param {Boolean} mountAll\n *\t@param {Boolean} isHydrating\tIf `true`, consumes externally created elements similar to hydration\n */\nfunction innerDiffNode(dom, vchildren, context, mountAll, isHydrating) {\n\tvar originalChildren = dom.childNodes,\n\t    children = [],\n\t    keyed = {},\n\t    keyedLen = 0,\n\t    min = 0,\n\t    len = originalChildren.length,\n\t    childrenLen = 0,\n\t    vlen = vchildren ? vchildren.length : 0,\n\t    j,\n\t    c,\n\t    f,\n\t    vchild,\n\t    child;\n\n\t// Build up a map of keyed children and an Array of unkeyed children:\n\tif (len !== 0) {\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tvar _child = originalChildren[i],\n\t\t\t    props = _child['__preactattr_'],\n\t\t\t    key = vlen && props ? _child._component ? _child._component.__key : props.key : null;\n\t\t\tif (key != null) {\n\t\t\t\tkeyedLen++;\n\t\t\t\tkeyed[key] = _child;\n\t\t\t} else if (props || (_child.splitText !== undefined ? isHydrating ? _child.nodeValue.trim() : true : isHydrating)) {\n\t\t\t\tchildren[childrenLen++] = _child;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (vlen !== 0) {\n\t\tfor (var i = 0; i < vlen; i++) {\n\t\t\tvchild = vchildren[i];\n\t\t\tchild = null;\n\n\t\t\t// attempt to find a node based on key matching\n\t\t\tvar key = vchild.key;\n\t\t\tif (key != null) {\n\t\t\t\tif (keyedLen && keyed[key] !== undefined) {\n\t\t\t\t\tchild = keyed[key];\n\t\t\t\t\tkeyed[key] = undefined;\n\t\t\t\t\tkeyedLen--;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// attempt to pluck a node of the same type from the existing children\n\t\t\telse if (!child && min < childrenLen) {\n\t\t\t\t\tfor (j = min; j < childrenLen; j++) {\n\t\t\t\t\t\tif (children[j] !== undefined && isSameNodeType(c = children[j], vchild, isHydrating)) {\n\t\t\t\t\t\t\tchild = c;\n\t\t\t\t\t\t\tchildren[j] = undefined;\n\t\t\t\t\t\t\tif (j === childrenLen - 1) childrenLen--;\n\t\t\t\t\t\t\tif (j === min) min++;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// morph the matched/found/created DOM child to match vchild (deep)\n\t\t\tchild = idiff(child, vchild, context, mountAll);\n\n\t\t\tf = originalChildren[i];\n\t\t\tif (child && child !== dom && child !== f) {\n\t\t\t\tif (f == null) {\n\t\t\t\t\tdom.appendChild(child);\n\t\t\t\t} else if (child === f.nextSibling) {\n\t\t\t\t\tremoveNode(f);\n\t\t\t\t} else {\n\t\t\t\t\tdom.insertBefore(child, f);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// remove unused keyed children:\n\tif (keyedLen) {\n\t\tfor (var i in keyed) {\n\t\t\tif (keyed[i] !== undefined) recollectNodeTree(keyed[i], false);\n\t\t}\n\t}\n\n\t// remove orphaned unkeyed children:\n\twhile (min <= childrenLen) {\n\t\tif ((child = children[childrenLen--]) !== undefined) recollectNodeTree(child, false);\n\t}\n}\n\n/** Recursively recycle (or just unmount) a node and its descendants.\n *\t@param {Node} node\t\t\t\t\t\tDOM node to start unmount/removal from\n *\t@param {Boolean} [unmountOnly=false]\tIf `true`, only triggers unmount lifecycle, skips removal\n */\nfunction recollectNodeTree(node, unmountOnly) {\n\tvar component = node._component;\n\tif (component) {\n\t\t// if node is owned by a Component, unmount that component (ends up recursing back here)\n\t\tunmountComponent(component);\n\t} else {\n\t\t// If the node's VNode had a ref function, invoke it with null here.\n\t\t// (this is part of the React spec, and smart for unsetting references)\n\t\tif (node['__preactattr_'] != null && node['__preactattr_'].ref) node['__preactattr_'].ref(null);\n\n\t\tif (unmountOnly === false || node['__preactattr_'] == null) {\n\t\t\tremoveNode(node);\n\t\t}\n\n\t\tremoveChildren(node);\n\t}\n}\n\n/** Recollect/unmount all children.\n *\t- we use .lastChild here because it causes less reflow than .firstChild\n *\t- it's also cheaper than accessing the .childNodes Live NodeList\n */\nfunction removeChildren(node) {\n\tnode = node.lastChild;\n\twhile (node) {\n\t\tvar next = node.previousSibling;\n\t\trecollectNodeTree(node, true);\n\t\tnode = next;\n\t}\n}\n\n/** Apply differences in attributes from a VNode to the given DOM Element.\n *\t@param {Element} dom\t\tElement with attributes to diff `attrs` against\n *\t@param {Object} attrs\t\tThe desired end-state key-value attribute pairs\n *\t@param {Object} old\t\t\tCurrent/previous attributes (from previous VNode or element's prop cache)\n */\nfunction diffAttributes(dom, attrs, old) {\n\tvar name;\n\n\t// remove attributes no longer present on the vnode by setting them to undefined\n\tfor (name in old) {\n\t\tif (!(attrs && attrs[name] != null) && old[name] != null) {\n\t\t\tsetAccessor(dom, name, old[name], old[name] = undefined, isSvgMode);\n\t\t}\n\t}\n\n\t// add new & update changed attributes\n\tfor (name in attrs) {\n\t\tif (name !== 'children' && name !== 'innerHTML' && (!(name in old) || attrs[name] !== (name === 'value' || name === 'checked' ? dom[name] : old[name]))) {\n\t\t\tsetAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);\n\t\t}\n\t}\n}\n\n/** Retains a pool of Components for re-use, keyed on component name.\n *\tNote: since component names are not unique or even necessarily available, these are primarily a form of sharding.\n *\t@private\n */\nvar components = {};\n\n/** Reclaim a component for later re-use by the recycler. */\nfunction collectComponent(component) {\n\tvar name = component.constructor.name;\n\t(components[name] || (components[name] = [])).push(component);\n}\n\n/** Create a component. Normalizes differences between PFC's and classful Components. */\nfunction createComponent(Ctor, props, context) {\n\tvar list = components[Ctor.name],\n\t    inst;\n\n\tif (Ctor.prototype && Ctor.prototype.render) {\n\t\tinst = new Ctor(props, context);\n\t\tComponent.call(inst, props, context);\n\t} else {\n\t\tinst = new Component(props, context);\n\t\tinst.constructor = Ctor;\n\t\tinst.render = doRender;\n\t}\n\n\tif (list) {\n\t\tfor (var i = list.length; i--;) {\n\t\t\tif (list[i].constructor === Ctor) {\n\t\t\t\tinst.nextBase = list[i].nextBase;\n\t\t\t\tlist.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn inst;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n\n/** Set a component's `props` (generally derived from JSX attributes).\n *\t@param {Object} props\n *\t@param {Object} [opts]\n *\t@param {boolean} [opts.renderSync=false]\tIf `true` and {@link options.syncComponentUpdates} is `true`, triggers synchronous rendering.\n *\t@param {boolean} [opts.render=true]\t\t\tIf `false`, no render will be triggered.\n */\nfunction setComponentProps(component, props, opts, context, mountAll) {\n\tif (component._disable) return;\n\tcomponent._disable = true;\n\n\tif (component.__ref = props.ref) delete props.ref;\n\tif (component.__key = props.key) delete props.key;\n\n\tif (!component.base || mountAll) {\n\t\tif (component.componentWillMount) component.componentWillMount();\n\t} else if (component.componentWillReceiveProps) {\n\t\tcomponent.componentWillReceiveProps(props, context);\n\t}\n\n\tif (context && context !== component.context) {\n\t\tif (!component.prevContext) component.prevContext = component.context;\n\t\tcomponent.context = context;\n\t}\n\n\tif (!component.prevProps) component.prevProps = component.props;\n\tcomponent.props = props;\n\n\tcomponent._disable = false;\n\n\tif (opts !== 0) {\n\t\tif (opts === 1 || options.syncComponentUpdates !== false || !component.base) {\n\t\t\trenderComponent(component, 1, mountAll);\n\t\t} else {\n\t\t\tenqueueRender(component);\n\t\t}\n\t}\n\n\tif (component.__ref) component.__ref(component);\n}\n\n/** Render a Component, triggering necessary lifecycle events and taking High-Order Components into account.\n *\t@param {Component} component\n *\t@param {Object} [opts]\n *\t@param {boolean} [opts.build=false]\t\tIf `true`, component will build and store a DOM node if not already associated with one.\n *\t@private\n */\nfunction renderComponent(component, opts, mountAll, isChild) {\n\tif (component._disable) return;\n\n\tvar props = component.props,\n\t    state = component.state,\n\t    context = component.context,\n\t    previousProps = component.prevProps || props,\n\t    previousState = component.prevState || state,\n\t    previousContext = component.prevContext || context,\n\t    isUpdate = component.base,\n\t    nextBase = component.nextBase,\n\t    initialBase = isUpdate || nextBase,\n\t    initialChildComponent = component._component,\n\t    skip = false,\n\t    rendered,\n\t    inst,\n\t    cbase;\n\n\t// if updating\n\tif (isUpdate) {\n\t\tcomponent.props = previousProps;\n\t\tcomponent.state = previousState;\n\t\tcomponent.context = previousContext;\n\t\tif (opts !== 2 && component.shouldComponentUpdate && component.shouldComponentUpdate(props, state, context) === false) {\n\t\t\tskip = true;\n\t\t} else if (component.componentWillUpdate) {\n\t\t\tcomponent.componentWillUpdate(props, state, context);\n\t\t}\n\t\tcomponent.props = props;\n\t\tcomponent.state = state;\n\t\tcomponent.context = context;\n\t}\n\n\tcomponent.prevProps = component.prevState = component.prevContext = component.nextBase = null;\n\tcomponent._dirty = false;\n\n\tif (!skip) {\n\t\trendered = component.render(props, state, context);\n\n\t\t// context to pass to the child, can be updated via (grand-)parent component\n\t\tif (component.getChildContext) {\n\t\t\tcontext = extend(extend({}, context), component.getChildContext());\n\t\t}\n\n\t\tvar childComponent = rendered && rendered.nodeName,\n\t\t    toUnmount,\n\t\t    base;\n\n\t\tif (typeof childComponent === 'function') {\n\t\t\t// set up high order component link\n\n\t\t\tvar childProps = getNodeProps(rendered);\n\t\t\tinst = initialChildComponent;\n\n\t\t\tif (inst && inst.constructor === childComponent && childProps.key == inst.__key) {\n\t\t\t\tsetComponentProps(inst, childProps, 1, context, false);\n\t\t\t} else {\n\t\t\t\ttoUnmount = inst;\n\n\t\t\t\tcomponent._component = inst = createComponent(childComponent, childProps, context);\n\t\t\t\tinst.nextBase = inst.nextBase || nextBase;\n\t\t\t\tinst._parentComponent = component;\n\t\t\t\tsetComponentProps(inst, childProps, 0, context, false);\n\t\t\t\trenderComponent(inst, 1, mountAll, true);\n\t\t\t}\n\n\t\t\tbase = inst.base;\n\t\t} else {\n\t\t\tcbase = initialBase;\n\n\t\t\t// destroy high order component link\n\t\t\ttoUnmount = initialChildComponent;\n\t\t\tif (toUnmount) {\n\t\t\t\tcbase = component._component = null;\n\t\t\t}\n\n\t\t\tif (initialBase || opts === 1) {\n\t\t\t\tif (cbase) cbase._component = null;\n\t\t\t\tbase = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, true);\n\t\t\t}\n\t\t}\n\n\t\tif (initialBase && base !== initialBase && inst !== initialChildComponent) {\n\t\t\tvar baseParent = initialBase.parentNode;\n\t\t\tif (baseParent && base !== baseParent) {\n\t\t\t\tbaseParent.replaceChild(base, initialBase);\n\n\t\t\t\tif (!toUnmount) {\n\t\t\t\t\tinitialBase._component = null;\n\t\t\t\t\trecollectNodeTree(initialBase, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (toUnmount) {\n\t\t\tunmountComponent(toUnmount);\n\t\t}\n\n\t\tcomponent.base = base;\n\t\tif (base && !isChild) {\n\t\t\tvar componentRef = component,\n\t\t\t    t = component;\n\t\t\twhile (t = t._parentComponent) {\n\t\t\t\t(componentRef = t).base = base;\n\t\t\t}\n\t\t\tbase._component = componentRef;\n\t\t\tbase._componentConstructor = componentRef.constructor;\n\t\t}\n\t}\n\n\tif (!isUpdate || mountAll) {\n\t\tmounts.unshift(component);\n\t} else if (!skip) {\n\t\t// Ensure that pending componentDidMount() hooks of child components\n\t\t// are called before the componentDidUpdate() hook in the parent.\n\t\t// Note: disabled as it causes duplicate hooks, see https://github.com/developit/preact/issues/750\n\t\t// flushMounts();\n\n\t\tif (component.componentDidUpdate) {\n\t\t\tcomponent.componentDidUpdate(previousProps, previousState, previousContext);\n\t\t}\n\t\tif (options.afterUpdate) options.afterUpdate(component);\n\t}\n\n\tif (component._renderCallbacks != null) {\n\t\twhile (component._renderCallbacks.length) {\n\t\t\tcomponent._renderCallbacks.pop().call(component);\n\t\t}\n\t}\n\n\tif (!diffLevel && !isChild) flushMounts();\n}\n\n/** Apply the Component referenced by a VNode to the DOM.\n *\t@param {Element} dom\tThe DOM node to mutate\n *\t@param {VNode} vnode\tA Component-referencing VNode\n *\t@returns {Element} dom\tThe created/mutated element\n *\t@private\n */\nfunction buildComponentFromVNode(dom, vnode, context, mountAll) {\n\tvar c = dom && dom._component,\n\t    originalComponent = c,\n\t    oldDom = dom,\n\t    isDirectOwner = c && dom._componentConstructor === vnode.nodeName,\n\t    isOwner = isDirectOwner,\n\t    props = getNodeProps(vnode);\n\twhile (c && !isOwner && (c = c._parentComponent)) {\n\t\tisOwner = c.constructor === vnode.nodeName;\n\t}\n\n\tif (c && isOwner && (!mountAll || c._component)) {\n\t\tsetComponentProps(c, props, 3, context, mountAll);\n\t\tdom = c.base;\n\t} else {\n\t\tif (originalComponent && !isDirectOwner) {\n\t\t\tunmountComponent(originalComponent);\n\t\t\tdom = oldDom = null;\n\t\t}\n\n\t\tc = createComponent(vnode.nodeName, props, context);\n\t\tif (dom && !c.nextBase) {\n\t\t\tc.nextBase = dom;\n\t\t\t// passing dom/oldDom as nextBase will recycle it if unused, so bypass recycling on L229:\n\t\t\toldDom = null;\n\t\t}\n\t\tsetComponentProps(c, props, 1, context, mountAll);\n\t\tdom = c.base;\n\n\t\tif (oldDom && dom !== oldDom) {\n\t\t\toldDom._component = null;\n\t\t\trecollectNodeTree(oldDom, false);\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/** Remove a component from the DOM and recycle it.\n *\t@param {Component} component\tThe Component instance to unmount\n *\t@private\n */\nfunction unmountComponent(component) {\n\tif (options.beforeUnmount) options.beforeUnmount(component);\n\n\tvar base = component.base;\n\n\tcomponent._disable = true;\n\n\tif (component.componentWillUnmount) component.componentWillUnmount();\n\n\tcomponent.base = null;\n\n\t// recursively tear down & recollect high-order component children:\n\tvar inner = component._component;\n\tif (inner) {\n\t\tunmountComponent(inner);\n\t} else if (base) {\n\t\tif (base['__preactattr_'] && base['__preactattr_'].ref) base['__preactattr_'].ref(null);\n\n\t\tcomponent.nextBase = base;\n\n\t\tremoveNode(base);\n\t\tcollectComponent(component);\n\n\t\tremoveChildren(base);\n\t}\n\n\tif (component.__ref) component.__ref(null);\n}\n\n/** Base Component class.\n *\tProvides `setState()` and `forceUpdate()`, which trigger rendering.\n *\t@public\n *\n *\t@example\n *\tclass MyFoo extends Component {\n *\t\trender(props, state) {\n *\t\t\treturn <div />;\n *\t\t}\n *\t}\n */\nfunction Component(props, context) {\n\tthis._dirty = true;\n\n\t/** @public\n  *\t@type {object}\n  */\n\tthis.context = context;\n\n\t/** @public\n  *\t@type {object}\n  */\n\tthis.props = props;\n\n\t/** @public\n  *\t@type {object}\n  */\n\tthis.state = this.state || {};\n}\n\nextend(Component.prototype, {\n\n\t/** Returns a `boolean` indicating if the component should re-render when receiving the given `props` and `state`.\n  *\t@param {object} nextProps\n  *\t@param {object} nextState\n  *\t@param {object} nextContext\n  *\t@returns {Boolean} should the component re-render\n  *\t@name shouldComponentUpdate\n  *\t@function\n  */\n\n\t/** Update component state by copying properties from `state` to `this.state`.\n  *\t@param {object} state\t\tA hash of state properties to update with new values\n  *\t@param {function} callback\tA function to be called once component state is updated\n  */\n\tsetState: function setState(state, callback) {\n\t\tvar s = this.state;\n\t\tif (!this.prevState) this.prevState = extend({}, s);\n\t\textend(s, typeof state === 'function' ? state(s, this.props) : state);\n\t\tif (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);\n\t\tenqueueRender(this);\n\t},\n\n\n\t/** Immediately perform a synchronous re-render of the component.\n  *\t@param {function} callback\t\tA function to be called after component is re-rendered.\n  *\t@private\n  */\n\tforceUpdate: function forceUpdate(callback) {\n\t\tif (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);\n\t\trenderComponent(this, 2);\n\t},\n\n\n\t/** Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n  *\tVirtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n  *\t@param {object} props\t\tProps (eg: JSX attributes) received from parent element/component\n  *\t@param {object} state\t\tThe component's current state\n  *\t@param {object} context\t\tContext object (if a parent component has provided context)\n  *\t@returns VNode\n  */\n\trender: function render() {}\n});\n\n/** Render JSX into a `parent` Element.\n *\t@param {VNode} vnode\t\tA (JSX) VNode to render\n *\t@param {Element} parent\t\tDOM element to render into\n *\t@param {Element} [merge]\tAttempt to re-use an existing DOM tree rooted at `merge`\n *\t@public\n *\n *\t@example\n *\t// render a div into <body>:\n *\trender(<div id=\"hello\">hello!</div>, document.body);\n *\n *\t@example\n *\t// render a \"Thing\" component into #foo:\n *\tconst Thing = ({ name }) => <span>{ name }</span>;\n *\trender(<Thing name=\"one\" />, document.querySelector('#foo'));\n */\nfunction render(vnode, parent, merge) {\n  return diff(merge, vnode, {}, false, parent, false);\n}\n\nvar preact = {\n\th: h,\n\tcreateElement: h,\n\tcloneElement: cloneElement,\n\tComponent: Component,\n\trender: render,\n\trerender: rerender,\n\toptions: options\n};\n\nexport { h, h as createElement, cloneElement, Component, render, rerender, options };\nexport default preact;\n//# sourceMappingURL=preact.esm.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/preact/dist/preact.esm.js\n// module id = 2\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lists_1 = require(\"../lists\");\n// pattern that an emails MUST have\nvar pattern = /^[a-z0-9!#$%&'*+\\-/=?^_`{|}~.]+@([a-z0-9%\\-]+\\.){1,}([a-z0-9\\-]+)?$/i;\n// patterns that an email can not have\nvar negativePatterns = [\n    /^[!#$%&'*+\\-/=?^_`{|}~.]/,\n    /[.]{2,}[a-z0-9!#$%&'*+\\-/=?^_`{|}~.]+@/i,\n    /\\.@/\n];\nfunction default_1(str) {\n    // general pattern recognition\n    var match = str.match(pattern);\n    if (match === null)\n        return false;\n    // doesn't have a negative pattern\n    for (var i = negativePatterns.length - 1; i >= 0; i--) {\n        if (negativePatterns[i].test(str))\n            return false;\n    }\n    // valid TLD\n    var tld = match[2];\n    if (!tld)\n        return false;\n    if (lists_1.tlds.indexOf(tld) === -1)\n        return false;\n    return true;\n}\nexports.default = default_1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/anchorme/dist-node/tests/email.js\n// module id = 3\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"../util\");\n// general IP pattern https://regex101.com/r/rzUcJ4/1\nvar pattern = /^(\\d{1,3}\\.){3}\\d{1,3}(:\\d{1,5})?(\\/([a-z0-9\\-._~:\\/\\?#\\[\\]@!$&'\\(\\)\\*\\+,;=%]+)?)?$/i;\nfunction default_1(str) {\n    if (!pattern.test(str))\n        return false;\n    var IPArray = str.split(\".\");\n    // validate oc1\n    var oc1 = Number(IPArray[0]);\n    if ((isNaN(oc1)) || oc1 > 255 || oc1 < 0)\n        return false;\n    // validate oc2\n    var oc2 = Number(IPArray[1]);\n    if ((isNaN(oc2)) || oc2 > 255 || oc2 < 0)\n        return false;\n    // validate oc3\n    var oc3 = Number(IPArray[2]);\n    if ((isNaN(oc3)) || oc3 > 255 || oc3 < 0)\n        return false;\n    // validate oc4\n    var oc4 = Number((IPArray[3].match(/^\\d+/) || [])[0]);\n    if ((isNaN(oc4)) || oc4 > 255 || oc4 < 0)\n        return false;\n    // validate port\n    var port = (IPArray[3].match(/(^\\d+)(:)(\\d+)/) || [])[3];\n    if (port && (!util_1.isPort(port)))\n        return false;\n    return true;\n}\nexports.default = default_1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/anchorme/dist-node/tests/ip.js\n// module id = 4\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"../util\");\nvar lists_1 = require(\"../lists\");\nvar pattern = /^(https?:\\/\\/|ftps?:\\/\\/)?([a-z0-9%\\-]+\\.){1,}([a-z0-9\\-]+)?(:(\\d{1,5}))?(\\/([a-z0-9\\-._~:\\/\\?#\\[\\]@!$&'\\(\\)\\*\\+,;=%]+)?)?$/i;\nfunction default_1(str) {\n    // general pattern recognition https://regex101.com/r/RgKTA4/2\n    var match = str.match(pattern);\n    if (match === null)\n        return false;\n    // validate TLD\n    if (typeof match[3] !== \"string\")\n        return false;\n    if (lists_1.tlds.indexOf(match[3].toLowerCase()) === -1)\n        return false;\n    // validate port\n    if (match[5] && (!util_1.isPort(match[5])))\n        return false;\n    return true;\n}\nexports.default = default_1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/anchorme/dist-node/tests/url.js\n// module id = 5\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar fix_1 = require(\"./fix\");\n/**\n *\n * Split the string with word separators\n * such as punctuation marks and spaces\n *\n**/\nfunction separate(input) {\n    var splitted = input\n        .replace(/([\\s\\(\\)\\[\\]<>\"'])/g, \"\\0$1\\0\")\n        .replace(/([?;:,.!]+)(?=(\\0|$|\\s))/g, \"\\0$1\\0\")\n        .split(\"\\0\");\n    var fixed = fix_1.default(splitted);\n    return fixed;\n}\nexports.separate = separate;\n/**\n *\n * Join the resulting array into a string\n *\n**/\nfunction deSeparate(input) {\n    return input.join(\"\");\n}\nexports.deSeparate = deSeparate;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/anchorme/dist-node/separate/separate.js\n// module id = 6\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction default_1(str) {\n    str = str.toLowerCase();\n    if (str.indexOf(\"http://\") === 0)\n        return \"http://\";\n    else if (str.indexOf(\"https://\") === 0)\n        return \"https://\";\n    else if (str.indexOf(\"ftp://\") === 0)\n        return \"ftp://\";\n    else if (str.indexOf(\"ftps://\") === 0)\n        return \"ftps://\";\n    else if (str.indexOf(\"file:///\") === 0)\n        return \"file:///\";\n    else if (str.indexOf(\"mailto:\") === 0)\n        return \"mailto:\";\n    else\n        return false;\n}\nexports.default = default_1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/anchorme/dist-node/tests/hasprotocol.js\n// module id = 7\n// module chunks = 0","declare var pannellum: any;\nimport '../../less/tour-renderer.less';\nimport 'pannellum';\nimport { h, render, Component } from 'preact';\nimport { generateId } from './helpers';\nimport Defer from './models/Defer';\nimport Image from './models/Image';\nimport Link from './models/Link';\nimport InfoElement from './models/InfoElement';\nimport PannellumLink from './models/PannellumLink';\nimport PannellumOpts from './models/PannellumOpts';\nimport Hashtable, { Table } from './models/Hashtable';\nimport PannellumOverlay from './models/PannellumOverlay';\nimport PannellumPano from './models/PannellumPano';\nimport Pano from './models/Pano';\nimport Info from './models/Info';\nimport POV from './models/POV';\nimport Tour from './models/Tour';\n\nexport default class TourRenderer {\n\tpublic static EVENTS: Table<string> = Object.assign({}, InfoElement.EVENTS, {\n\t\tCREATE_INFO_ELEMENT: 'CREATE_INFO_ELEMENT',\n\t\tCREATE_LINK: 'CREATE_LINK',\n\t\tDELETE_LINK: 'DELETE_LINK'\n\t});\n\n\tprivate readonly _classPrefix: string = 'tr';\n\tprivate readonly _tour: any;\n\tprivate          _viewer: any;\n\tprivate          _dom: Element;\n\tprivate          _isLoaded: boolean;\n\n\tprivate          _panos: Hashtable<Pano>;\n\tprivate          _name: string;\n\tprivate          _description: string;\n\tprivate          _first: Pano;\n\tprivate          _preview: Image;\n\n\tprivate          _pannellumPanos: Hashtable<PannellumPano>;\n\tprivate          _selectPOVDeferred: Defer<POV>;\n\tprivate          _isSelectingPOV: boolean;\n\n\tget panos(): Hashtable<Pano> {\n\t\treturn this._panos;\n\t}\n\n\tconstructor(tour: any, dom: string | Element) {\n\t\tthis._tour = tour;\n\t\tif (typeof dom === 'string') {\n\t\t\tdom = document.querySelector(dom);\n\t\t}\n\n\t\tthis._dom = dom;\n\t\tthis._init();\n\t}\n\n\tpublic destroy() {\n\t\tthis._viewer.destroy();\n\t}\n\n\tpublic selectPOVInViewer(): Promise<POV> {\n\t\tif (!this._isLoaded) {\n\t\t\treturn Promise.reject(new Error('viewer not loaded'));\n\t\t}\n\n\t\tconst that = this;\n\n\t\tthis._isSelectingPOV = true;\n\t\tthis._selectPOVDeferred = new Defer();\n\n\t\tthis.toggleControls(false);\n\t\tthis._dom.classList.add(this._createClass('selecting-pov'));\n\t\tthis._selectPOVDeferred.promise.then(() => {\n\t\t\tthis.toggleControls(true);\n\t\t\tthis._dom.classList.remove(this._createClass('selecting-pov'));\n\t\t});\n\n\t\treturn this._selectPOVDeferred.promise;\n\t}\n\n\tpublic toggleControls(show?: boolean): void {\n\t\tthis._dom.querySelector('.pnlm-controls-container').classList.toggle(this._createClass('hide'), !show);\n\t\tthis._dom.querySelector('.pnlm-panorama-info').classList.toggle(this._createClass('hide'), !show);\n\n\t}\n\n\tpublic addDOM(elm: HTMLElement) {\n\t\tthis._dom.appendChild(elm);\n\t}\n\n\tpublic deleteDOM(elm: HTMLElement) {\n\t\tthis._dom.removeChild(elm);\n\t}\n\n\tpublic addOverlay(elm: any, pov: POV) {\n\t\tconst params: PannellumOverlay = {\n\t\t\tid: generateId(),\n\t\t\tpitch: pov.pitch,\n\t\t\tyaw: pov.yaw,\n\t\t\ttype: 'info',\n\t\t\tcreateTooltipFunc: (divParent) => render(elm, divParent)\n\t\t};\n\n\t\tthis._viewer.addHotSpot(params);\n\t}\n\n\tpublic deleteOverlay(item: Info | string | number) {\n\t\tlet index;\n\n\t\tif (typeof item === 'object') {\n\t\t\tindex = item.id;\n\t\t} else {\n\t\t\tindex = item;\n\t\t}\n\n\t\tthis._viewer.removeHotSpot(index);\n\t}\n\n\tpublic forceToRender() {\n\t\tthis._viewer.setYaw(this._viewer.getYaw());\n\t}\n\n\tpublic addInfoElement(obj: {id?: string, description?: string, title?: string, POV?: POV, isEdit?: boolean }) {\n\t\tlet {id, title, description, POV, isEdit} = obj;\n\t\tid = id || generateId();\n\t\tdescription = description || 'Description';\n\t\ttitle = title || 'Title';\n\t\tisEdit = typeof isEdit === 'boolean' ? isEdit : false;\n\t\tconst pano = this.getPano();\n\t\tconst info = {\n\t\t\tid,\n\t\t\tPOV,\n\t\t\ttitle,\n\t\t\tdescription,\n\t\t\tinfoElement: (\n\t\t\t\t<InfoElement isEdit={isEdit} classPrefix={this._classPrefix} title={title} description={description} id={id} />\n\t\t\t)\n\t\t};\n\n\t\tpano.infos.add(info);\n\t\tthis._addInfo(info);\n\t}\n\n\tpublic deleteInfoElement(elem: Info | string): void {\n\t\tconst pano = this.getPano();\n\t\tif (typeof elem === 'string') {\n\t\t\telem = pano.infos.get(elem);\n\t\t}\n\n\t\tpano.infos.delete(elem);\n\t\tthis.deleteOverlay(elem);\n\t}\n\n\tpublic getPano(id: string = this._viewer.getScene()): Pano | null {\n\t\treturn this._panos.get(id);\n\t}\n\n\t/**\n\t * @deprecated Use get pano\n\t */\n\tpublic getCurrentPano(): Pano {\n\t\treturn this.getPano();\n\t}\n\n\tpublic getPOV(): POV {\n\t\tconst pov = {\n\t\t\tpitch: 0,\n\t\t\tyaw: 0\n\t\t};\n\n\t\tif (this._viewer) {\n\t\t\tpov.yaw = this._viewer.getYaw(),\n\t\t\tpov.pitch = this._viewer.getPitch();\n\t\t}\n\n\t\treturn pov;\n\t}\n\n\tpublic deleteLink(link: Link | string): void {\n\t\tconst pano = this.getPano();\n\n\t\tif(typeof link === 'string') {\n\t\t\tlink = pano.links.get(link);\n\t\t}\n\n\t\tpano.links.delete(link.id);\n\t\tthis._viewer.removeHotSpot(link.id);\n\t}\n\n\tpublic createLinkTo(pano: Pano | string, pov: POV = this.getPOV(), targetPOV: POV = {pitch: 0, yaw:0}): void {\n\t\tif (!this._isLoaded) return console.info('Viewer not loaded');\n\n\t\tif (typeof pano !== 'object' ) {\n\t\t\tpano = this.getPano(pano);\n\t\t}\n\n\t\tif (!pano) throw new Error('parameter missing: pano');\n\n\t\tconst link: Link = {\n\t\t\tPOV: pov,\n\t\t\tid: generateId(),\n\t\t\ttargetPOV,\n\t\t\tto: pano\n\t\t};\n\n\t\tconst currentPano = this.getCurrentPano();\n\n\t\tcurrentPano.links.add(link);\n\t\tthis._addLink(link);\n\n\t\tconst event = new CustomEvent('newLink', {detail: link});\n\t\tthis._dom.dispatchEvent(event);\n\t}\n\n\t// ----------------------------------- PRIVATE ----------------------------------------------------------------\n\tprivate _init(): void {\n\t\tthis._processTour();\n\t\tthis._initViewer();\n\t\tthis._setListeners();\n\t}\n\n\tprivate _initViewer(): void {\n\t\tconst params: PannellumOpts = {\n\t\t\tautoLoad: false,\n\t\t\t// zoom level 120, 100 default, 50 most\n\t\t\tdefault: {\n\t\t\t\tfirstScene: this._first.id,\n\t\t\t\tpitch: 0,\n\t\t\t\tsceneFadeDuration: 1000,\n\t\t\t\tyaw: 0\n\t\t\t},\n\t\t\thfov: 120,\n\t\t\tscenes: this._pannellumPanos.table,\n\t\t\tshowControls: true\n\t\t};\n\n\t\tif (this._preview) {\n\t\t\tparams.preview = this._preview.url;\n\t\t}\n\n\t\tthis._viewer = pannellum.viewer(this._dom, params);\n\t}\n\n\tprivate _createClass(className): string {\n\t\treturn `${this._classPrefix}-${className}`;\n\t}\n\n\tprivate _processPanos(): void {\n\n\t\t// check to refactor this part\n\t\tthis._panos = new Hashtable(this._tour.photoSpheres.map((photoSphere) => {\n\t\t\treturn {\n\t\t\t\tid: photoSphere.id,\n\t\t\t\tinfoElements: new Hashtable(photoSphere.infoElements),\n\t\t\t\tname: photoSphere.name,\n\t\t\t\tPOV: photoSphere.POV,\n\t\t\t\turl: photoSphere.link,\n\t\t\t};\n\t\t}));\n\n\t\tthis._tour.photoSpheres.forEach((photoSphere) => {\n\t\t\tconst pano = this._panos.get(photoSphere.id);\n\t\t\tpano.links = new Hashtable(photoSphere.links.map(this._transformToLink.bind(this)));\n\t\t\tpano.infos = new Hashtable(photoSphere.infoElements.map(this._transformToInfo.bind(this)));\n\t\t});\n\n\t\tthis._pannellumPanos = new Hashtable(this._panos.array.map(this._transformToPannellumPano.bind(this)));\n\t}\n\n\tprivate _processTour(): void {\n\t\tconst image = this._tour.images && this._tour.images[0];\n\n\t\tif (image) {\n\t\t\tthis._preview = {url: image.link, name: image.name, id: image.id};\n\t\t}\n\n\t\tthis._name = this._tour.name;\n\t\tthis._description = this._tour.description;\n\n\t\tthis._processPanos();\n\n\t\tif (this._tour.firstPhotoSphereId) {\n\t\t\tthis._first = this._panos.get(this._tour.firstPhotoSphereId);\n\t\t\tthis._first.POV = this._tour.POV;\n\t\t} else {\n\t\t\tthis._first = this._panos.get();\n\t\t\tthis._first.POV = {\n\t\t\t\tpitch: 0,\n\t\t\t\tyaw: 0\n\t\t\t};\n\t\t}\n\t}\n\n\tprivate _setListeners(): void {\n\t\tthis._viewer.on('load', this._onLoadPano.bind(this));\n\t\tthis._viewer.on('mousedown', this._onClick.bind(this));\n\t\tthis._viewer.on('touchstart', this._onClick.bind(this));\n\t\tthis._dom.addEventListener(InfoElement.EVENTS.TOGGLE_INFO_ELEMENT, this.forceToRender.bind(this));\n\t\tthis._dom.addEventListener(InfoElement.EVENTS.UPDATE_INFO_ELEMENT, this._updateInfoListener.bind(this));\n\t\tthis._dom.addEventListener(InfoElement.EVENTS.DELETE_INFO_ELEMENT, this._deleteInfoListener.bind(this));\n\t}\n\n\tprivate _deleteInfoListener(ev) {\n\t\tconst data = ev.detail;\n\t\tthis.deleteInfoElement(data.id);\n\t}\n\n\tprivate _updateInfoListener(ev) {\n\t\tconst data = ev.detail;\n\t\tconst info = this.getPano().infos.get(data.id);\n\t\tinfo.title = data.title;\n\t\tinfo.description = data.title;\n\t}\n\n\tprivate _onClick(mouseEvent: any): void {\n\n\t\tif (!this._isSelectingPOV) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst event = (mouseEvent.targetTouches && mouseEvent.targetTouches[0]) || mouseEvent;\n\n\t\tconst coords = this._viewer.mouseEventToCoords(event);\n\n\t\tconst pov = {\n\t\t\tpitch: coords[0],\n\t\t\tyaw: coords[1]\n\t\t};\n\n\t\tthis._isSelectingPOV = false;\n\t\tthis._selectPOVDeferred.resolve(pov);\n\t\tthis._selectPOVDeferred = null;\n\t}\n\n\tprivate _onLoadPano(id): void {\n\t\tthis._isLoaded = true;\n\t\tthis._setLinks();\n\t\tthis._setInfos();\n\n\t\t// NOTE use CustomEvent to pass data\n\t\tconst event = new Event('load');\n\n\t\tthis._dom.dispatchEvent(event);\n\t}\n\n\tprivate _setLinks(): void {\n\t\tconst links = this.getCurrentPano().links;\n\t\tlinks.array.forEach((link) => {\n\t\t\tthis._addLink(link);\n\t\t});\n\t}\n\n\tprivate _setInfos(): void {\n\t\tconst infos = this.getCurrentPano().infos;\n\t\tinfos.array.forEach((info) => {\n\t\t\tthis._addInfo(info);\n\t\t});\n\t}\n\n\tprivate _addInfo(info: Info): void {\n\t\tthis._viewer.addHotSpot(this._transformToPannellumOverlay(info));\n\t}\n\tprivate _addLink(link: Link): void {\n\t\tthis._viewer.addHotSpot(this._transformToPannellumLink(link));\n\t}\n\n\tprivate _transformToLink(link: any): Link {\n\t\tconst pano = this._panos.get(link.toPhotoSphereId);\n\n\t\treturn {\n\t\t\tPOV: link.POV,\n\t\t\tid: link.id,\n\t\t\ttargetPOV: link.targetPOV,\n\t\t\tto: pano\n\t\t};\n\t}\n\n\tprivate _transformToInfo(infoElement): Info {\n\t\tconst { POV, id, name, description } = infoElement;\n\n\t\treturn {\n\t\t\ttitle: name,\n\t\t\tdescription,\n\t\t\tPOV,\n\t\t\tid,\n\t\t\tinfoElement: (<InfoElement classPrefix={this._classPrefix} id={id} title={name} description={description} />)\n\t\t};\n\t}\n\tprivate _transformToPannellumOverlay(info: Info): PannellumOverlay {\n\n\t\treturn {\n\t\t\tid: info.id,\n\t\t\tpitch: info.POV.pitch,\n\t\t\tyaw: info.POV.yaw,\n\t\t\ttype: 'info',\n\t\t\tcssClass: 'n',\n\t\t\tcreateTooltipFunc: (divParent: HTMLElement) => render(info.infoElement, divParent)\n\t\t};\n\t}\n\n\tprivate _transformToPannellumLink(link: Link): PannellumLink {\n\t\treturn {\n\t\t\tid: link.id,\n\t\t\tpitch: link.POV.pitch,\n\t\t\tsceneId: link.to.id,\n\t\t\ttargetPitch: link.targetPOV.pitch,\n\t\t\ttargetYaw: link.targetPOV.yaw,\n\t\t\ttext: link.to.name,\n\t\t\ttype: 'scene',\n\t\t\tyaw: link.POV.yaw\n\t\t};\n\t}\n\n\tprivate _transformToPannellumPano(pano: Pano): any {\n\t\tconst params: any = {\n\t\t\tid: pano.id,\n\t\t\tpanorama: pano.url,\n\t\t\ttitle: pano.name,\n\t\t\ttype: 'equirectangular'\n\t\t};\n\n\t\tif (pano.POV) {\n\t\t\tparams.pitch = pano.POV.pitch;\n\t\t\tparams.yaw = pano.POV.yaw;\n\t\t}\n\n\t\t// TODO if we initialize the tour with scenes we dont need to use _setLinks\n\t\tif (pano.links && pano.links.length) {\n\t\t\t// params.hotSpots = pano.links.array().map(this._transformToPannellumLink);\n\t\t}\n\n\t\treturn params;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/TourRenderer/TourRenderer.tsx","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/less/tour-renderer.less\n// module id = 9\n// module chunks = 0","// Pannellum 7617f97, https://github.com/mpetroff/pannellum\n/*\n * libpannellum - A WebGL and CSS 3D transform based Panorama Renderer\n * Copyright (c) 2012-2017 Matthew Petroff\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nwindow.libpannellum = (function(window, document, undefined) {\n\n'use strict';\n\n/**\n * Creates a new panorama renderer.\n * @constructor\n * @param {HTMLElement} container - The container element for the renderer.\n */\nfunction Renderer(container) {\n    var canvas = document.createElement('canvas');\n    canvas.style.width = canvas.style.height = '100%';\n    container.appendChild(canvas);\n\n    var program, gl, vs, fs;\n    var fallbackImgSize;\n    var world;\n    var vtmps;\n    var pose;\n    var image, imageType, dynamic;\n    var texCoordBuffer, cubeVertBuf, cubeVertTexCoordBuf, cubeVertIndBuf;\n\n    /**\n     * Initialize renderer.\n     * @memberof Renderer\n     * @instance\n     * @param {Image|Array|Object} image - Input image; format varies based on\n     *      `imageType`. For `equirectangular`, this is an image; for\n     *      `cubemap`, this is an array of images for the cube faces in the\n     *      order [+z, +x, -z, -x, +y, -y]; for `multires`, this is a\n     *      configuration object.\n     * @param {string} imageType - The type of the image: `equirectangular`,\n     *      `cubemap`, or `multires`.\n     * @param {boolean} dynamic - Whether or not the image is dynamic (e.g. video).\n     * @param {number} haov - Initial horizontal angle of view.\n     * @param {number} vaov - Initial vertical angle of view.\n     * @param {number} voffset - Initial vertical offset angle.\n     * @param {function} callback - Load callback function.\n     * @param {Object} [params] - Other configuration parameters (`horizonPitch`, `horizonRoll`, `backgroundColor`).\n     */\n    this.init = function(_image, _imageType, _dynamic, haov, vaov, voffset, callback, params) {\n        // Default argument for image type\n        if (typeof _imageType === undefined)\n            _imageType = 'equirectangular';\n\n        if (_imageType != 'equirectangular' && _imageType != 'cubemap' &&\n            _imageType != 'multires') {\n            console.log('Error: invalid image type specified!');\n            throw {type: 'config error'};\n        }\n\n        imageType = _imageType;\n        image = _image;\n        dynamic = _dynamic;\n\n        // Clear old data\n        if (program) {\n            if (vs) {\n                gl.detachShader(program, vs);\n                gl.deleteShader(vs);\n            }\n            if (fs) {\n                gl.detachShader(program, fs);\n                gl.deleteShader(fs);\n            }\n            gl.bindBuffer(gl.ARRAY_BUFFER, null);\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n            if (program.texture)\n                gl.deleteTexture(program.texture);\n            if (program.nodeCache)\n                for (var i = 0; i < program.nodeCache.length; i++)\n                    gl.deleteTexture(program.nodeCache[i].texture);\n            gl.deleteProgram(program);\n            program = undefined;\n        }\n        pose = undefined;\n\n        var s;\n        \n        // This awful browser specific test exists because iOS 8/9 and IE 11\n        // don't display non-power-of-two cubemap textures but also don't\n        // throw an error (tested on an iPhone 5c / iOS 8.1.3 / iOS 9.2 /\n        // iOS 10.3.1).\n        // Therefore, the WebGL context is never created for these browsers for\n        // NPOT cubemaps, and the CSS 3D transform fallback renderer is used\n        // instead.\n        if (!(imageType == 'cubemap' &&\n            (image[0].width & (image[0].width - 1)) !== 0 &&\n            (navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/) ||\n            navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/) ||\n            navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/) ||\n            navigator.userAgent.match(/Trident.*rv[ :]*11\\./)))) {\n            // Enable WebGL on canvas\n            if (!gl)\n                gl = canvas.getContext('experimental-webgl', {alpha: false, depth: false});\n            if (gl && gl.getError() == 1286)\n                handleWebGLError1286();\n        }\n        \n        // If there is no WebGL, fall back to CSS 3D transform renderer.\n        // While browser specific tests are usually frowned upon, the\n        // fallback viewer only really works with WebKit/Blink and IE 10/11\n        // (it doesn't work properly in Firefox).\n        if (!gl && ((imageType == 'multires' && image.hasOwnProperty('fallbackPath')) ||\n            imageType == 'cubemap') &&\n            ('WebkitAppearance' in document.documentElement.style ||\n            navigator.userAgent.match(/Trident.*rv[ :]*11\\./) ||\n            navigator.appVersion.indexOf('MSIE 10') !== -1)) {\n            // Remove old world if it exists\n            if (world) {\n                container.removeChild(world);\n            }\n            \n            // Initialize renderer\n            world = document.createElement('div');\n            world.className = 'pnlm-world';\n            \n            // Add images\n            var path;\n            if (image.basePath) {\n                path = image.basePath + image.fallbackPath;\n            } else {\n                path = image.fallbackPath;\n            }\n            var sides = ['f', 'r', 'b', 'l', 'u', 'd'];\n            var loaded = 0;\n            var onLoad = function() {\n                // Draw image on canvas\n                var faceCanvas = document.createElement('canvas');\n                faceCanvas.className = 'pnlm-face pnlm-' + sides[this.side] + 'face';\n                world.appendChild(faceCanvas);\n                var faceContext = faceCanvas.getContext('2d');\n                faceCanvas.style.width = this.width + 4 + 'px';\n                faceCanvas.style.height = this.height + 4 + 'px';\n                faceCanvas.width = this.width + 4;\n                faceCanvas.height = this.height + 4;\n                faceContext.drawImage(this, 2, 2);\n                var imgData = faceContext.getImageData(0, 0, faceCanvas.width, faceCanvas.height);\n                var data = imgData.data;\n                \n                // Duplicate edge pixels\n                var i;\n                var j;\n                for (i = 2; i < faceCanvas.width - 2; i++) {\n                    for (j = 0; j < 4; j++) {\n                        data[(i + faceCanvas.width) * 4 + j] = data[(i + faceCanvas.width * 2) * 4 + j];\n                        data[(i + faceCanvas.width * (faceCanvas.height - 2)) * 4 + j] = data[(i + faceCanvas.width * (faceCanvas.height - 3)) * 4 + j];\n                    }\n                }\n                for (i = 2; i < faceCanvas.height - 2; i++) {\n                    for (j = 0; j < 4; j++) {\n                        data[(i * faceCanvas.width + 1) * 4 + j] = data[(i * faceCanvas.width + 2) * 4 + j];\n                        data[((i + 1) * faceCanvas.width - 2) * 4 + j] = data[((i + 1) * faceCanvas.width - 3) * 4 + j];\n                    }\n                }\n                for (j = 0; j < 4; j++) {\n                    data[(faceCanvas.width + 1) * 4 + j] = data[(faceCanvas.width * 2 + 2) * 4 + j];\n                    data[(faceCanvas.width * 2 - 2) * 4 + j] = data[(faceCanvas.width * 3 - 3) * 4 + j];\n                    data[(faceCanvas.width * (faceCanvas.height - 2) + 1) * 4 + j] = data[(faceCanvas.width * (faceCanvas.height - 3) + 2) * 4 + j];\n                    data[(faceCanvas.width * (faceCanvas.height - 1) - 2) * 4 + j] = data[(faceCanvas.width * (faceCanvas.height - 2) - 3) * 4 + j];\n                }\n                for (i = 1; i < faceCanvas.width - 1; i++) {\n                    for (j = 0; j < 4; j++) {\n                        data[i * 4 + j] = data[(i + faceCanvas.width) * 4 + j];\n                        data[(i + faceCanvas.width * (faceCanvas.height - 1)) * 4 + j] = data[(i + faceCanvas.width * (faceCanvas.height - 2)) * 4 + j];\n                    }\n                }\n                for (i = 1; i < faceCanvas.height - 1; i++) {\n                    for (j = 0; j < 4; j++) {\n                        data[(i * faceCanvas.width) * 4 + j] = data[(i * faceCanvas.width + 1) * 4 + j];\n                        data[((i + 1) * faceCanvas.width - 1) * 4 + j] = data[((i + 1) * faceCanvas.width - 2) * 4 + j];\n                    }\n                }\n                for (j = 0; j < 4; j++) {\n                    data[j] = data[(faceCanvas.width + 1) * 4 + j];\n                    data[(faceCanvas.width - 1) * 4 + j] = data[(faceCanvas.width * 2 - 2) * 4 + j];\n                    data[(faceCanvas.width * (faceCanvas.height - 1)) * 4 + j] = data[(faceCanvas.width * (faceCanvas.height - 2) + 1) * 4 + j];\n                    data[(faceCanvas.width * faceCanvas.height - 1) * 4 + j] = data[(faceCanvas.width * (faceCanvas.height - 1) - 2) * 4 + j];\n                }\n                \n                // Draw image width duplicated edge pixels on canvas\n                faceContext.putImageData(imgData, 0, 0);\n                \n                loaded++;\n                if (loaded == 6) {\n                    fallbackImgSize = this.width;\n                    container.appendChild(world);\n                    callback();\n                }\n            };\n            for (s = 0; s < 6; s++) {\n                var faceImg = new Image();\n                faceImg.crossOrigin = 'anonymous';\n                faceImg.side = s;\n                faceImg.onload = onLoad;\n                if (imageType == 'multires') {\n                    faceImg.src = encodeURI(path.replace('%s', sides[s]) + '.' + image.extension);\n                } else {\n                    faceImg.src = encodeURI(image[s].src);\n                }\n            }\n            \n            return;\n        } else if (!gl) {\n            console.log('Error: no WebGL support detected!');\n            throw {type: 'no webgl'};\n        }\n        if (image.basePath) {\n            image.fullpath = image.basePath + image.path;\n        } else {\n            image.fullpath = image.path;\n        }\n        image.invTileResolution = 1 / image.tileResolution;\n        \n        var vertices = createCube();\n        vtmps = [];\n        for (s = 0; s < 6; s++) {\n            vtmps[s] = vertices.slice(s * 12, s * 12 + 12);\n            vertices = createCube();\n        }\n        \n        // Make sure image isn't too big\n        var width, maxWidth;\n        if (imageType == 'equirectangular') {\n            width = Math.max(image.width, image.height);\n            maxWidth = gl.getParameter(gl.MAX_TEXTURE_SIZE);\n            if (width > maxWidth) {\n                console.log('Error: The image is too big; it\\'s ' + width + 'px wide, but this device\\'s maximum supported width is ' + maxWidth + 'px.');\n                throw {type: 'webgl size error', width: width, maxWidth: maxWidth};\n            }\n        } else if (imageType == 'cubemap') {\n            width = image[0].width;\n            maxWidth = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);\n            if (width > maxWidth) {\n                console.log('Error: The cube face image is too big; it\\'s ' + width + 'px wide, but this device\\'s maximum supported width is ' + maxWidth + 'px.');\n                throw {type: 'webgl size error', width: width, maxWidth: maxWidth};\n            }\n        }\n\n        // Store horizon pitch and roll if applicable\n        if (params !== undefined && (params.horizonPitch !== undefined || params.horizonRoll !== undefined))\n            pose = [params.horizonPitch == undefined ? 0 : params.horizonPitch,\n                    params.horizonRoll == undefined ? 0 : params.horizonRoll];\n\n        // Set 2d texture binding\n        var glBindType = gl.TEXTURE_2D;\n\n        // Create viewport for entire canvas\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n        // Create vertex shader\n        vs = gl.createShader(gl.VERTEX_SHADER);\n        var vertexSrc = v;\n        if (imageType == 'multires') {\n            vertexSrc = vMulti;\n        }\n        gl.shaderSource(vs, vertexSrc);\n        gl.compileShader(vs);\n\n        // Create fragment shader\n        fs = gl.createShader(gl.FRAGMENT_SHADER);\n        var fragmentSrc = fragEquirectangular;\n        if (imageType == 'cubemap') {\n            glBindType = gl.TEXTURE_CUBE_MAP;\n            fragmentSrc = fragCube;\n        } else if (imageType == 'multires') {\n            fragmentSrc = fragMulti;\n        }\n        gl.shaderSource(fs, fragmentSrc);\n        gl.compileShader(fs);\n\n        // Link WebGL program\n        program = gl.createProgram();\n        gl.attachShader(program, vs);\n        gl.attachShader(program, fs);\n        gl.linkProgram(program);\n\n        // Log errors\n        if (!gl.getShaderParameter(vs, gl.COMPILE_STATUS))\n            console.log(gl.getShaderInfoLog(vs));\n        if (!gl.getShaderParameter(fs, gl.COMPILE_STATUS))\n            console.log(gl.getShaderInfoLog(fs));\n        if (!gl.getProgramParameter(program, gl.LINK_STATUS))\n            console.log(gl.getProgramInfoLog(program));\n\n        // Use WebGL program\n        gl.useProgram(program);\n\n        program.drawInProgress = false;\n\n        // Look up texture coordinates location\n        program.texCoordLocation = gl.getAttribLocation(program, 'a_texCoord');\n        gl.enableVertexAttribArray(program.texCoordLocation);\n\n        if (imageType != 'multires') {\n            // Provide texture coordinates for rectangle\n            if (!texCoordBuffer)\n                texCoordBuffer = gl.createBuffer();\n            gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]), gl.STATIC_DRAW);\n            gl.vertexAttribPointer(program.texCoordLocation, 2, gl.FLOAT, false, 0, 0);\n\n            // Pass aspect ratio\n            program.aspectRatio = gl.getUniformLocation(program, 'u_aspectRatio');\n            gl.uniform1f(program.aspectRatio, canvas.clientWidth / canvas.clientHeight);\n\n            // Locate psi, theta, focal length, horizontal extent, vertical extent, and vertical offset\n            program.psi = gl.getUniformLocation(program, 'u_psi');\n            program.theta = gl.getUniformLocation(program, 'u_theta');\n            program.f = gl.getUniformLocation(program, 'u_f');\n            program.h = gl.getUniformLocation(program, 'u_h');\n            program.v = gl.getUniformLocation(program, 'u_v');\n            program.vo = gl.getUniformLocation(program, 'u_vo');\n            program.rot = gl.getUniformLocation(program, 'u_rot');\n\n            // Pass horizontal extent, vertical extent, and vertical offset\n            gl.uniform1f(program.h, haov / (Math.PI * 2.0));\n            gl.uniform1f(program.v, vaov / Math.PI);\n            gl.uniform1f(program.vo, voffset / Math.PI * 2);\n\n            // Set background color\n            if (imageType == 'equirectangular') {\n                program.backgroundColor = gl.getUniformLocation(program, 'u_backgroundColor');\n                var color = params.backgroundColor ? params.backgroundColor : [0, 0, 0];\n                gl.uniform4fv(program.backgroundColor, color.concat([1]));\n            }\n\n            // Create texture\n            program.texture = gl.createTexture();\n            gl.bindTexture(glBindType, program.texture);\n\n            // Upload images to texture depending on type\n            if (imageType == 'cubemap') {\n                // Load all six sides of the cube map\n                gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image[1]);\n                gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_X, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image[3]);\n                gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Y, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image[4]);\n                gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Y, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image[5]);\n                gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Z, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image[0]);\n                gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Z, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image[2]);\n            } else {\n                // Upload image to the texture\n                gl.texImage2D(glBindType, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image);\n            }\n\n            // Set parameters for rendering any size\n            gl.texParameteri(glBindType, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(glBindType, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(glBindType, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.texParameteri(glBindType, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n        } else {\n            // Look up vertex coordinates location\n            program.vertPosLocation = gl.getAttribLocation(program, 'a_vertCoord');\n            gl.enableVertexAttribArray(program.vertPosLocation);\n\n            // Create buffers\n            if (!cubeVertBuf)\n                cubeVertBuf = gl.createBuffer();\n            if (!cubeVertTexCoordBuf)\n                cubeVertTexCoordBuf = gl.createBuffer();\n            if (!cubeVertIndBuf)\n                cubeVertIndBuf = gl.createBuffer();\n\n            // Bind texture coordinate buffer and pass coordinates to WebGL\n            gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertTexCoordBuf);\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0,0,1,0,1,1,0,1]), gl.STATIC_DRAW);\n\n            // Bind square index buffer and pass indicies to WebGL\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVertIndBuf);\n            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array([0,1,2,0,2,3]), gl.STATIC_DRAW);\n\n            // Find uniforms\n            program.perspUniform = gl.getUniformLocation(program, 'u_perspMatrix');\n            program.cubeUniform = gl.getUniformLocation(program, 'u_cubeMatrix');\n            //program.colorUniform = gl.getUniformLocation(program, 'u_color');\n\n            program.level = -1;\n\n            program.currentNodes = [];\n            program.nodeCache = [];\n            program.nodeCacheTimestamp = 0;\n        }\n\n        // Check if there was an error\n        var err = gl.getError();\n        if (err !== 0) {\n            console.log('Error: Something went wrong with WebGL!', err);\n            throw {type: 'webgl error'};\n        }\n\n        callback();\n     };\n\n    /**\n     * Destroy renderer.\n     * @memberof Renderer\n     * @instance\n     */\n    this.destroy = function() {\n        if (container !== undefined) {\n            if (canvas !== undefined && container.contains(canvas)) {\n                container.removeChild(canvas);\n            }\n            if (world !== undefined && container.contains(world)) {\n                container.removeChild(world);\n            }\n        }\n        if (gl) {\n            // The spec says this is only supposed to simulate losing the WebGL\n            // context, but in practice it tends to actually free the memory.\n            var extension = gl.getExtension('WEBGL_lose_context');\n            if (extension)\n                extension.loseContext();\n        }\n    };\n\n    /**\n     * Resize renderer (call after resizing container).\n     * @memberof Renderer\n     * @instance\n     */\n    this.resize = function() {\n        var pixelRatio = window.devicePixelRatio || 1;\n        canvas.width = canvas.clientWidth * pixelRatio;\n        canvas.height = canvas.clientHeight * pixelRatio;\n        if (gl) {\n            if (gl.getError() == 1286)\n                handleWebGLError1286();\n            gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n            if (imageType != 'multires') {\n                gl.uniform1f(program.aspectRatio, canvas.clientWidth / canvas.clientHeight);\n            }\n        }\n    };\n    // Initialize canvas size\n    this.resize();\n\n    /**\n     * Set renderer horizon pitch and roll.\n     * @memberof Renderer\n     * @instance\n     */\n    this.setPose = function(horizonPitch, horizonRoll) {\n        pose = [horizonPitch, horizonRoll];\n    };\n\n    /**\n     * Render new view of panorama.\n     * @memberof Renderer\n     * @instance\n     * @param {number} pitch - Pitch to render at (in radians).\n     * @param {number} yaw - Yaw to render at (in radians).\n     * @param {number} hfov - Horizontal field of view to render with (in radians).\n     * @param {Object} [params] - Extra configuration parameters. \n     * @param {number} [params.roll] - Camera roll (in radians).\n     * @param {boolean} [params.returnImage] - Return rendered image?\n     */\n    this.render = function(pitch, yaw, hfov, params) {\n        var focal, i, s, roll = 0;\n        if (params === undefined)\n            params = {};\n        if (params.roll)\n            roll = params.roll;\n\n        // Apply pitch and roll transformation if applicable\n        if (pose !== undefined) {\n            var horizonPitch = pose[0],\n                horizonRoll = pose[1];\n\n            // Calculate new pitch and yaw\n            var orig_pitch = pitch,\n                orig_yaw = yaw,\n                x = Math.cos(horizonRoll) * Math.sin(pitch) * Math.sin(horizonPitch) +\n                    Math.cos(pitch) * (Math.cos(horizonPitch) * Math.cos(yaw) +\n                    Math.sin(horizonRoll) * Math.sin(horizonPitch) * Math.sin(yaw)),\n                y = -Math.sin(pitch) * Math.sin(horizonRoll) +\n                    Math.cos(pitch) * Math.cos(horizonRoll) * Math.sin(yaw),\n                z = Math.cos(horizonRoll) * Math.cos(horizonPitch) * Math.sin(pitch) +\n                    Math.cos(pitch) * (-Math.cos(yaw) * Math.sin(horizonPitch) +\n                    Math.cos(horizonPitch) * Math.sin(horizonRoll) * Math.sin(yaw));\n            pitch = Math.asin(Math.max(Math.min(z, 1), -1));\n            yaw = Math.atan2(y, x);\n\n            // Calculate roll\n            var v = [Math.cos(orig_pitch) * (Math.sin(horizonRoll) * Math.sin(horizonPitch) * Math.cos(orig_yaw) -\n                    Math.cos(horizonPitch) * Math.sin(orig_yaw)),\n                    Math.cos(orig_pitch) * Math.cos(horizonRoll) * Math.cos(orig_yaw),\n                    Math.cos(orig_pitch) * (Math.cos(horizonPitch) * Math.sin(horizonRoll) * Math.cos(orig_yaw) +\n                    Math.sin(orig_yaw) * Math.sin(horizonPitch))],\n                w = [-Math.cos(pitch) * Math.sin(yaw), Math.cos(pitch) * Math.cos(yaw)];\n            var roll_adj = Math.acos(Math.max(Math.min((v[0]*w[0] + v[1]*w[1]) /\n                (Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2]) *\n                Math.sqrt(w[0]*w[0]+w[1]*w[1])), 1), -1));\n            if (v[2] < 0)\n                roll_adj = 2 * Math.PI - roll_adj;\n            roll += roll_adj;\n        }\n\n        // If no WebGL\n        if (!gl && (imageType == 'multires' || imageType == 'cubemap')) {\n            // Determine face transforms\n            s = fallbackImgSize / 2;\n            \n            var transforms = {\n                f: 'translate3d(-' + (s + 2) + 'px, -' + (s + 2) + 'px, -' + s + 'px)',\n                b: 'translate3d(' + (s + 2) + 'px, -' + (s + 2) + 'px, ' + s + 'px) rotateX(180deg) rotateZ(180deg)',\n                u: 'translate3d(-' + (s + 2) + 'px, -' + s + 'px, ' + (s + 2) + 'px) rotateX(270deg)',\n                d: 'translate3d(-' + (s + 2) + 'px, ' + s + 'px, -' + (s + 2) + 'px) rotateX(90deg)',\n                l: 'translate3d(-' + s + 'px, -' + (s + 2) + 'px, ' + (s + 2) + 'px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)',\n                r: 'translate3d(' + s + 'px, -' + (s + 2) + 'px, -' + (s + 2) + 'px) rotateY(270deg)'\n            };\n            focal = 1 / Math.tan(hfov / 2);\n            var zoom = focal * canvas.clientWidth / 2 + 'px';\n            var transform = 'perspective(' + zoom + ') translateZ(' + zoom + ') rotateX(' + pitch + 'rad) rotateY(' + yaw + 'rad) ';\n            \n            // Apply face transforms\n            var faces = Object.keys(transforms);\n            for (i = 0; i < 6; i++) {\n                var face = world.querySelector('.pnlm-' + faces[i] + 'face').style;\n                face.webkitTransform = transform + transforms[faces[i]];\n                face.transform = transform + transforms[faces[i]];\n            }\n            return;\n        }\n        \n        if (imageType != 'multires') {\n            // Calculate focal length from vertical field of view\n            var vfov = 2 * Math.atan(Math.tan(hfov * 0.5) / (canvas.clientWidth / canvas.clientHeight));\n            focal = 1 / Math.tan(vfov * 0.5);\n\n            // Pass psi, theta, roll, and focal length\n            gl.uniform1f(program.psi, yaw);\n            gl.uniform1f(program.theta, pitch);\n            gl.uniform1f(program.rot, roll);\n            gl.uniform1f(program.f, focal);\n            \n            if (dynamic === true) {\n                // Update texture if dynamic\n                if (imageType == 'equirectangular') {\n                    gl.bindTexture(gl.TEXTURE_2D, program.texture);\n                    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image);\n                }\n            }\n            \n            // Draw using current buffer\n            gl.drawArrays(gl.TRIANGLES, 0, 6);\n        \n        } else {\n            // Create perspective matrix\n            var perspMatrix = makePersp(hfov, canvas.clientWidth / canvas.clientHeight, 0.1, 100.0);\n            \n            // Find correct zoom level\n            checkZoom(hfov);\n            \n            // Create rotation matrix\n            var matrix = identityMatrix3();\n            matrix = rotateMatrix(matrix, -roll, 'z');\n            matrix = rotateMatrix(matrix, -pitch, 'x');\n            matrix = rotateMatrix(matrix, yaw, 'y');\n            matrix = makeMatrix4(matrix);\n            \n            // Set matrix uniforms\n            gl.uniformMatrix4fv(program.perspUniform, false, new Float32Array(transposeMatrix4(perspMatrix)));\n            gl.uniformMatrix4fv(program.cubeUniform, false, new Float32Array(transposeMatrix4(matrix)));\n            \n            // Find current nodes\n            var rotPersp = rotatePersp(perspMatrix, matrix);\n            program.nodeCache.sort(multiresNodeSort);\n            if (program.nodeCache.length > 200 &&\n                program.nodeCache.length > program.currentNodes.length + 50) {\n                // Remove older nodes from cache\n                var removed = program.nodeCache.splice(200, program.nodeCache.length - 200);\n                for (var i = 0; i < removed.length; i++) {\n                    // Explicitly delete textures\n                    gl.deleteTexture(removed[i].texture);\n                }\n            }\n            program.currentNodes = [];\n            \n            var sides = ['f', 'b', 'u', 'd', 'l', 'r'];\n            for (s = 0; s < 6; s++) {\n                var ntmp = new MultiresNode(vtmps[s], sides[s], 1, 0, 0, image.fullpath);\n                testMultiresNode(rotPersp, ntmp, pitch, yaw, hfov);\n            }\n            program.currentNodes.sort(multiresNodeRenderSort);\n            // Only process one tile per frame to improve responsiveness\n            for (i = 0; i < program.currentNodes.length; i++) {\n                if (!program.currentNodes[i].texture) {\n                    setTimeout(processNextTile, 0, program.currentNodes[i]);\n                    break;\n                }\n            }\n            \n            // Draw tiles\n            multiresDraw();\n        }\n        \n        if (params.returnImage !== undefined) {\n            return canvas.toDataURL('image/png');\n        }\n    };\n    \n    /**\n     * Check if images are loading.\n     * @memberof Renderer\n     * @instance\n     * @returns {boolean} Whether or not images are loading.\n     */\n    this.isLoading = function() {\n        if (gl && imageType == 'multires') {\n            for ( var i = 0; i < program.currentNodes.length; i++ ) {\n                if (!program.currentNodes[i].textureLoaded) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    \n    /**\n     * Retrieve renderer's canvas.\n     * @memberof Renderer\n     * @instance\n     * @returns {HTMLElement} Renderer's canvas.\n     */\n    this.getCanvas = function() {\n        return canvas;\n    };\n    \n    /**\n     * Sorting method for multires nodes.\n     * @private\n     * @param {MultiresNode} a - First node.\n     * @param {MultiresNode} b - Second node.\n     * @returns {number} Base tiles first, then higher timestamp first.\n     */\n    function multiresNodeSort(a, b) {\n        // Base tiles are always first\n        if (a.level == 1 && b.level != 1) {\n            return -1;\n        }\n        if (b. level == 1 && a.level != 1) {\n            return 1;\n        }\n        \n        // Higher timestamp first\n        return b.timestamp - a.timestamp;\n    }\n    \n    /**\n     * Sorting method for multires node rendering.\n     * @private\n     * @param {MultiresNode} a - First node.\n     * @param {MultiresNode} b - Second node.\n     * @returns {number} Lower zoom levels first, then closest to center first.\n     */\n    function multiresNodeRenderSort(a, b) {\n        // Lower zoom levels first\n        if (a.level != b.level) {\n            return a.level - b.level;\n        }\n        \n        // Lower distance from center first\n        return a.diff - b.diff;\n    }\n    \n    /**\n     * Draws multires nodes.\n     * @private\n     */\n    function multiresDraw() {\n        if (!program.drawInProgress) {\n            program.drawInProgress = true;\n            for ( var i = 0; i < program.currentNodes.length; i++ ) {\n                if (program.currentNodes[i].textureLoaded) {\n                    //var color = program.currentNodes[i].color;\n                    //gl.uniform4f(program.colorUniform, color[0], color[1], color[2], 1.0);\n                    \n                    // Bind vertex buffer and pass vertices to WebGL\n                    gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertBuf);\n                    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(program.currentNodes[i].vertices), gl.STATIC_DRAW);\n                    gl.vertexAttribPointer(program.vertPosLocation, 3, gl.FLOAT, false, 0, 0);\n                    \n                    // Prep for texture\n                    gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertTexCoordBuf);\n                    gl.vertexAttribPointer(program.texCoordLocation, 2, gl.FLOAT, false, 0, 0);\n                    \n                    // Bind texture and draw tile\n                    gl.bindTexture(gl.TEXTURE_2D, program.currentNodes[i].texture); // Bind program.currentNodes[i].texture to TEXTURE0\n                    gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);\n                }\n            }\n            program.drawInProgress = false;\n        }\n    }\n\n    /**\n     * Creates new multires node.\n     * @constructor\n     * @private\n     * @param {number[]} vertices - Node's verticies.\n     * @param {string} side - Node's cube face.\n     * @param {number} level - Node's zoom level.\n     * @param {number} x - Node's x position.\n     * @param {number} y - Node's y position.\n     * @param {string} path - Node's path.\n     */\n    function MultiresNode(vertices, side, level, x, y, path) {\n        this.vertices = vertices;\n        this.side = side;\n        this.level = level;\n        this.x = x;\n        this.y = y;\n        this.path = path.replace('%s',side).replace('%l',level).replace('%x',x).replace('%y',y);\n    }\n\n    /**\n     * Test if multires node is visible. If it is, add it to current nodes,\n     * load its texture, and load appropriate child nodes.\n     * @private\n     * @param {number[]} rotPersp - Rotated perspective matrix.\n     * @param {MultiresNode} node - Multires node to check.\n     * @param {number} pitch - Pitch to check at.\n     * @param {number} yaw - Yaw to check at.\n     * @param {number} hfov - Horizontal field of view to check at.\n     */\n    function testMultiresNode(rotPersp, node, pitch, yaw, hfov) {\n        if (checkSquareInView(rotPersp, node.vertices)) {\n            // Calculate central angle between center of view and center of tile\n            var v = node.vertices;\n            var x = v[0] + v[3] + v[6] + v[ 9];\n            var y = v[1] + v[4] + v[7] + v[10];\n            var z = v[2] + v[5] + v[8] + v[11];\n            var r = Math.sqrt(x*x + y*y + z*z);\n            var theta = Math.asin(z / r);\n            var phi = Math.atan2(y, x);\n            var ydiff = phi - yaw;\n            ydiff += (ydiff > Math.PI) ? -2 * Math.PI : (ydiff < -Math.PI) ? 2 * Math.PI : 0;\n            ydiff = Math.abs(ydiff);\n            node.diff = Math.acos(Math.sin(pitch) * Math.sin(theta) + Math.cos(pitch) * Math.cos(theta) * Math.cos(ydiff));\n            \n            // Add node to current nodes and load texture if needed\n            var inCurrent = false;\n            for (var k = 0; k < program.nodeCache.length; k++) {\n                if (program.nodeCache[k].path == node.path) {\n                    inCurrent = true;\n                    program.nodeCache[k].timestamp = program.nodeCacheTimestamp++;\n                    program.nodeCache[k].diff = node.diff;\n                    program.currentNodes.push(program.nodeCache[k]);\n                    break;\n                }\n            }\n            if (!inCurrent) {\n                //node.color = [Math.random(), Math.random(), Math.random()];\n                node.timestamp = program.nodeCacheTimestamp++;\n                program.currentNodes.push(node);\n                program.nodeCache.push(node);\n            }\n            \n            // TODO: Test error\n            // Create child nodes\n            if (node.level < program.level) {\n                var cubeSize = image.cubeResolution * Math.pow(2, node.level - image.maxLevel);\n                var numTiles = Math.ceil(cubeSize * image.invTileResolution) - 1;\n                var doubleTileSize = cubeSize % image.tileResolution * 2;\n                var lastTileSize = (cubeSize * 2) % image.tileResolution;\n                if (lastTileSize === 0) {\n                    lastTileSize = image.tileResolution;\n                }\n                if (doubleTileSize === 0) {\n                    doubleTileSize = image.tileResolution * 2;\n                }\n                var f = 0.5;\n                if (node.x == numTiles || node.y == numTiles) {\n                    f = 1.0 - image.tileResolution / (image.tileResolution + lastTileSize);\n                }\n                var i = 1.0 - f;\n                var children = [];\n                var vtmp, ntmp;\n                var f1 = f, f2 = f, f3 = f, i1 = i, i2 = i, i3 = i;\n                // Handle non-symmetric tiles\n                if (lastTileSize < image.tileResolution) {\n                    if (node.x == numTiles && node.y != numTiles) {\n                        f2 = 0.5;\n                        i2 = 0.5;\n                        if (node.side == 'd' || node.side == 'u') {\n                            f3 = 0.5;\n                            i3 = 0.5;\n                        }\n                    } else if (node.x != numTiles && node.y == numTiles) {\n                        f1 = 0.5;\n                        i1 = 0.5;\n                        if (node.side == 'l' || node.side == 'r') {\n                            f3 = 0.5;\n                            i3 = 0.5;\n                        }\n                    }\n                }\n                // Handle small tiles that have fewer than four children\n                if (doubleTileSize <= image.tileResolution) {\n                    if (node.x == numTiles) {\n                        f1 = 0;\n                        i1 = 1;\n                        if (node.side == 'l' || node.side == 'r') {\n                            f3 = 0;\n                            i3 = 1;\n                        }\n                    }\n                    if (node.y == numTiles) {\n                        f2 = 0;\n                        i2 = 1;\n                        if (node.side == 'd' || node.side == 'u') {\n                            f3 = 0;\n                            i3 = 1;\n                        }\n                    }\n                }\n                \n                vtmp = [           v[0],             v[1],             v[2],\n                        v[0]*f1+v[3]*i1,    v[1]*f+v[4]*i,  v[2]*f3+v[5]*i3,\n                        v[0]*f1+v[6]*i1,  v[1]*f2+v[7]*i2,  v[2]*f3+v[8]*i3,\n                          v[0]*f+v[9]*i, v[1]*f2+v[10]*i2, v[2]*f3+v[11]*i3\n                ];\n                ntmp = new MultiresNode(vtmp, node.side, node.level + 1, node.x*2, node.y*2, image.fullpath);\n                children.push(ntmp);\n                if (!(node.x == numTiles && doubleTileSize <= image.tileResolution)) {\n                    vtmp = [v[0]*f1+v[3]*i1,    v[1]*f+v[4]*i,  v[2]*f3+v[5]*i3,\n                                       v[3],             v[4],             v[5],\n                              v[3]*f+v[6]*i,  v[4]*f2+v[7]*i2,  v[5]*f3+v[8]*i3,\n                            v[0]*f1+v[6]*i1,  v[1]*f2+v[7]*i2,  v[2]*f3+v[8]*i3\n                    ];\n                    ntmp = new MultiresNode(vtmp, node.side, node.level + 1, node.x*2+1, node.y*2, image.fullpath);\n                    children.push(ntmp);\n                }\n                if (!(node.x == numTiles && doubleTileSize <= image.tileResolution) &&\n                    !(node.y == numTiles && doubleTileSize <= image.tileResolution)) {\n                    vtmp = [v[0]*f1+v[6]*i1,  v[1]*f2+v[7]*i2,  v[2]*f3+v[8]*i3,\n                              v[3]*f+v[6]*i,  v[4]*f2+v[7]*i2,  v[5]*f3+v[8]*i3,\n                                       v[6],             v[7],             v[8],\n                            v[9]*f1+v[6]*i1,   v[10]*f+v[7]*i, v[11]*f3+v[8]*i3\n                    ];\n                    ntmp = new MultiresNode(vtmp, node.side, node.level + 1, node.x*2+1, node.y*2+1, image.fullpath);\n                    children.push(ntmp);\n                }\n                if (!(node.y == numTiles && doubleTileSize <= image.tileResolution)) {\n                    vtmp = [  v[0]*f+v[9]*i, v[1]*f2+v[10]*i2, v[2]*f3+v[11]*i3,\n                            v[0]*f1+v[6]*i1,  v[1]*f2+v[7]*i2,  v[2]*f3+v[8]*i3,\n                            v[9]*f1+v[6]*i1,   v[10]*f+v[7]*i, v[11]*f3+v[8]*i3,\n                                       v[9],            v[10],            v[11]\n                    ];\n                    ntmp = new MultiresNode(vtmp, node.side, node.level + 1, node.x*2, node.y*2+1, image.fullpath);\n                    children.push(ntmp);\n                }\n                for (var j = 0; j < children.length; j++) {\n                    testMultiresNode(rotPersp, children[j], pitch, yaw, hfov);\n                }\n            }\n        }\n    }\n    \n    /**\n     * Creates cube vertex array.\n     * @private\n     * @returns {number[]} Cube vertex array.\n     */\n    function createCube() {\n        return [-1,  1, -1,  1,  1, -1,  1, -1, -1, -1, -1, -1, // Front face\n                 1,  1,  1, -1,  1,  1, -1, -1,  1,  1, -1,  1, // Back face\n                -1,  1,  1,  1,  1,  1,  1,  1, -1, -1,  1, -1, // Up face\n                -1, -1, -1,  1, -1, -1,  1, -1,  1, -1, -1,  1, // Down face\n                -1,  1,  1, -1,  1, -1, -1, -1, -1, -1, -1,  1, // Left face\n                 1,  1, -1,  1,  1,  1,  1, -1,  1,  1, -1, -1  // Right face\n        ];\n    }\n    \n    /**\n     * Creates 3x3 identity matrix.\n     * @private\n     * @returns {number[]} Identity matrix.\n     */\n    function identityMatrix3() {\n        return [\n            1, 0, 0,\n            0, 1, 0,\n            0, 0, 1\n        ];\n    }\n    \n    /**\n     * Rotates a 3x3 matrix.\n     * @private\n     * @param {number[]} m - Matrix to rotate.\n     * @param {number[]} angle - Angle to rotate by in radians.\n     * @param {string} axis - Axis to rotate about (`x`, `y`, or `z`).\n     * @returns {number[]} Rotated matrix.\n     */\n    function rotateMatrix(m, angle, axis) {\n        var s = Math.sin(angle);\n        var c = Math.cos(angle);\n        if (axis == 'x') {\n            return [\n                m[0], c*m[1] + s*m[2], c*m[2] - s*m[1],\n                m[3], c*m[4] + s*m[5], c*m[5] - s*m[4],\n                m[6], c*m[7] + s*m[8], c*m[8] - s*m[7]\n            ];\n        }\n        if (axis == 'y') {\n            return [\n                c*m[0] - s*m[2], m[1], c*m[2] + s*m[0],\n                c*m[3] - s*m[5], m[4], c*m[5] + s*m[3],\n                c*m[6] - s*m[8], m[7], c*m[8] + s*m[6]\n            ];\n        }\n        if (axis == 'z') {\n            return [\n                c*m[0] + s*m[1], c*m[1] - s*m[0], m[2],\n                c*m[3] + s*m[4], c*m[4] - s*m[3], m[5],\n                c*m[6] + s*m[7], c*m[7] - s*m[6], m[8]\n            ];\n        }\n    }\n    \n    /**\n     * Turns a 3x3 matrix into a 4x4 matrix.\n     * @private\n     * @param {number[]} m - Input matrix.\n     * @returns {number[]} Expanded matrix.\n     */\n    function makeMatrix4(m) {\n        return [\n            m[0], m[1], m[2],    0,\n            m[3], m[4], m[5],    0,\n            m[6], m[7], m[8],    0,\n               0,    0,    0,    1\n        ];\n    }\n    \n    /**\n     * Transposes a 4x4 matrix.\n     * @private\n     * @param {number[]} m - Input matrix.\n     * @returns {number[]} Transposed matrix.\n     */\n    function transposeMatrix4(m) {\n        return [\n            m[ 0], m[ 4], m[ 8], m[12],\n            m[ 1], m[ 5], m[ 9], m[13],\n            m[ 2], m[ 6], m[10], m[14],\n            m[ 3], m[ 7], m[11], m[15]\n        ];\n    }\n    \n    /**\n     * Creates a perspective matrix.\n     * @private\n     * @param {number} hfov - Desired horizontal field of view.\n     * @param {number} aspect - Desired aspect ratio.\n     * @param {number} znear - Near distance.\n     * @param {number} zfar - Far distance.\n     * @returns {number[]} Generated perspective matrix.\n     */\n    function makePersp(hfov, aspect, znear, zfar) {\n        var fovy = 2 * Math.atan(Math.tan(hfov/2) * canvas.clientHeight / canvas.clientWidth);\n        var f = 1 / Math.tan(fovy/2);\n        return [\n            f/aspect,   0,  0,  0,\n                   0,   f,  0,  0,\n                   0,   0,  (zfar+znear)/(znear-zfar), (2*zfar*znear)/(znear-zfar),\n                   0,   0, -1,  0\n        ];\n    }\n    \n    /**\n     * Processes a loaded texture image into a WebGL texture.\n     * @private\n     * @param {Image} img - Input image.\n     * @param {WebGLTexture} tex - Texture to bind image to.\n     */\n    function processLoadedTexture(img, tex) {\n        gl.bindTexture(gl.TEXTURE_2D, tex);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, img);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    }\n\n    // Based on http://blog.tojicode.com/2012/03/javascript-memory-optimization-and.html\n    var loadTexture = (function() {\n        var cacheTop = 4;   // Maximum number of concurrents loads\n        var textureImageCache = {};\n        var pendingTextureRequests = [];\n\n        function TextureImageLoader() {\n            var self = this;\n            this.texture = this.callback = null;\n            this.image = new Image();\n            this.image.crossOrigin = 'anonymous';\n            this.image.addEventListener('load', function() {\n                processLoadedTexture(self.image, self.texture);\n                self.callback(self.texture);\n                releaseTextureImageLoader(self);\n            });\n        };\n\n        TextureImageLoader.prototype.loadTexture = function(src, texture, callback) {\n            this.texture = texture;\n            this.callback = callback;\n            this.image.src = src;\n        };\n\n        function PendingTextureRequest(src, texture, callback) {\n            this.src = src;\n            this.texture = texture;\n            this.callback = callback;\n        };\n\n        function releaseTextureImageLoader(til) {\n            if (pendingTextureRequests.length) {\n                var req = pendingTextureRequests.shift();\n                til.loadTexture(req.src, req.texture, req.callback);\n            } else\n                textureImageCache[cacheTop++] = til;\n        }\n\n        for (var i = 0; i < cacheTop; i++)\n            textureImageCache[i] = new TextureImageLoader();\n\n        return function(src, callback) {\n            var texture = gl.createTexture();\n            if (cacheTop)\n                textureImageCache[--cacheTop].loadTexture(src, texture, callback);\n            else\n                pendingTextureRequests.push(new PendingTextureRequest(src, texture, callback));\n            return texture;\n        };\n    })();\n\n    /**\n     * Loads image and creates texture for a multires node / tile.\n     * @private\n     * @param {MultiresNode} node - Input node.\n     */\n    function processNextTile(node) {\n        if (!node.textureLoad) {\n            node.textureLoad = true;\n            loadTexture(encodeURI(node.path + '.' + image.extension), function(texture) {\n                node.texture = texture;\n                node.textureLoaded = true;\n            });\n        }\n    }\n    \n    /**\n     * Finds and applies optimal multires zoom level.\n     * @private\n     * @param {number} hfov - Horizontal field of view to check at.\n     */\n    function checkZoom(hfov) {\n        // Find optimal level\n        var newLevel = 1;\n        while ( newLevel < image.maxLevel &&\n            canvas.width > image.tileResolution *\n            Math.pow(2, newLevel - 1) * Math.tan(hfov / 2) * 0.707 ) {\n            newLevel++;\n        }\n        \n        // Apply change\n        program.level = newLevel;\n    }\n    \n    /**\n     * Rotates perspective matrix.\n     * @private\n     * @param {number[]} p - Perspective matrix.\n     * @param {number[]} r - Rotation matrix.\n     * @returns {number[]} Rotated matrix.\n     */\n    function rotatePersp(p, r) {\n        return [\n            p[ 0]*r[0], p[ 0]*r[1], p[ 0]*r[ 2],     0,\n            p[ 5]*r[4], p[ 5]*r[5], p[ 5]*r[ 6],     0,\n            p[10]*r[8], p[10]*r[9], p[10]*r[10], p[11],\n                 -r[8],      -r[9],      -r[10],     0\n        ];\n    }\n    \n    /**\n     * Applies rotated perspective matrix to a 3-vector\n     * (last element is inverted).\n     * @private\n     * @param {number[]} m - Rotated perspective matrix.\n     * @param {number[]} v - Input 3-vector.\n     * @returns {number[]} Resulting 4-vector.\n     */\n    function applyRotPerspToVec(m, v) {\n        return [\n                    m[ 0]*v[0] + m[ 1]*v[1] + m[ 2]*v[2],\n                    m[ 4]*v[0] + m[ 5]*v[1] + m[ 6]*v[2],\n            m[11] + m[ 8]*v[0] + m[ 9]*v[1] + m[10]*v[2],\n                 1/(m[12]*v[0] + m[13]*v[1] + m[14]*v[2])\n        ];\n    }\n    \n    /**\n     * Checks if a vertex is visible.\n     * @private\n     * @param {number[]} m - Rotated perspective matrix.\n     * @param {number[]} v - Input vertex.\n     * @returns {number} 1 or -1 if the vertex is or is not visible,\n     *      respectively.\n     */\n    function checkInView(m, v) {\n        var vpp = applyRotPerspToVec(m, v);\n        var winX = vpp[0]*vpp[3];\n        var winY = vpp[1]*vpp[3];\n        var winZ = vpp[2]*vpp[3];\n        var ret = [0, 0, 0];\n        \n        if ( winX < -1 )\n            ret[0] = -1;\n        if ( winX > 1 )\n            ret[0] = 1;\n        if ( winY < -1 )\n            ret[1] = -1;\n        if ( winY > 1 )\n            ret[1] = 1;\n        if ( winZ < -1 || winZ > 1 )\n            ret[2] = 1;\n        return ret;\n    }\n    \n    /**\n     * Checks if a square (tile) is visible.\n     * @private\n     * @param {number[]} m - Rotated perspective matrix.\n     * @param {number[]} v - Square's vertex array.\n     * @returns {boolean} Whether or not the square is visible.\n     */\n    function checkSquareInView(m, v) {\n        var check1 = checkInView(m, v.slice(0, 3));\n        var check2 = checkInView(m, v.slice(3, 6));\n        var check3 = checkInView(m, v.slice(6, 9));\n        var check4 = checkInView(m, v.slice(9, 12));\n        var testX = check1[0] + check2[0] + check3[0] + check4[0];\n        if ( testX == -4 || testX == 4 )\n            return false;\n        var testY = check1[1] + check2[1] + check3[1] + check4[1];\n        if ( testY == -4 || testY == 4 )\n            return false;\n        var testZ = check1[2] + check2[2] + check3[2] + check4[2];\n        return testZ != 4;\n        \n\n    }\n\n    /**\n     * On iOS (iPhone 5c, iOS 10.3), this WebGL error occurs when the canvas is\n     * too big. Unfortuately, there's no way to test for this beforehand, so we\n     * reduce the canvas size if this error is thrown.\n     * @private\n     */\n    function handleWebGLError1286() {\n        console.log('Reducing canvas size due to error 1286!');\n        canvas.width = Math.round(canvas.width / 2);\n        canvas.height = Math.round(canvas.height / 2);\n    }\n}\n\n// Vertex shader for equirectangular and cube\nvar v = [\n'attribute vec2 a_texCoord;',\n'varying vec2 v_texCoord;',\n\n'void main() {',\n    // Set position\n    'gl_Position = vec4(a_texCoord, 0.0, 1.0);',\n    \n    // Pass the coordinates to the fragment shader\n    'v_texCoord = a_texCoord;',\n'}'\n].join('');\n\n// Vertex shader for multires\nvar vMulti = [\n'attribute vec3 a_vertCoord;',\n'attribute vec2 a_texCoord;',\n\n'uniform mat4 u_cubeMatrix;',\n'uniform mat4 u_perspMatrix;',\n\n'varying mediump vec2 v_texCoord;',\n\n'void main(void) {',\n    // Set position\n    'gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);',\n    \n    // Pass the coordinates to the fragment shader\n    'v_texCoord = a_texCoord;',\n'}'\n].join('');\n\n// Fragment shader\nvar fragEquiCubeBase = [\n'precision mediump float;',\n\n'uniform float u_aspectRatio;',\n'uniform float u_psi;',\n'uniform float u_theta;',\n'uniform float u_f;',\n'uniform float u_h;',\n'uniform float u_v;',\n'uniform float u_vo;',\n'uniform float u_rot;',\n\n'const float PI = 3.14159265358979323846264;',\n\n// Texture\n'uniform sampler2D u_image;',\n'uniform samplerCube u_imageCube;',\n\n// Coordinates passed in from vertex shader\n'varying vec2 v_texCoord;',\n\n// Background color (display for partial panoramas)\n'uniform vec4 u_backgroundColor;',\n\n'void main() {',\n    // Map canvas/camera to sphere\n    'float x = v_texCoord.x * u_aspectRatio;',\n    'float y = v_texCoord.y;',\n    'float sinrot = sin(u_rot);',\n    'float cosrot = cos(u_rot);',\n    'float rot_x = x * cosrot - y * sinrot;',\n    'float rot_y = x * sinrot + y * cosrot;',\n    'float sintheta = sin(u_theta);',\n    'float costheta = cos(u_theta);',\n    'float a = u_f * costheta - rot_y * sintheta;',\n    'float root = sqrt(rot_x * rot_x + a * a);',\n    'float lambda = atan(rot_x / root, a / root) + u_psi;',\n    'float phi = atan((rot_y * costheta + u_f * sintheta) / root);',\n].join('\\n');\n\n// Fragment shader\nvar fragCube = fragEquiCubeBase + [\n    // Look up color from texture\n    'float cosphi = cos(phi);',\n    'gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));',\n'}'\n].join('\\n');\n\n// Fragment shader\nvar fragEquirectangular = fragEquiCubeBase + [\n    // Wrap image\n    'lambda = mod(lambda + PI, PI * 2.0) - PI;',\n\n    // Map texture to sphere\n    'vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));',\n\n    // Look up color from texture\n    // Map from [-1,1] to [0,1] and flip y-axis\n    'if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)',\n        'gl_FragColor = u_backgroundColor;',\n    'else',\n        'gl_FragColor = texture2D(u_image, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));',\n'}'\n].join('\\n');\n\n// Fragment shader\nvar fragMulti = [\n'varying mediump vec2 v_texCoord;',\n'uniform sampler2D u_sampler;',\n//'uniform mediump vec4 u_color;',\n\n'void main(void) {',\n    // Look up color from texture\n    'gl_FragColor = texture2D(u_sampler, v_texCoord);',\n//    'gl_FragColor = u_color;',\n'}'\n].join('');\n\nreturn {\n    renderer: function(container, image, imagetype, dynamic) {\n        return new Renderer(container, image, imagetype, dynamic);\n    }\n};\n\n})(window, document);\n/**\n * Provides requestAnimationFrame in a cross browser way.\n * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n */\n\nif ( !window.requestAnimationFrame ) {\n\n    window.requestAnimationFrame = ( function() {\n\n        return window.webkitRequestAnimationFrame ||\n        window.mozRequestAnimationFrame ||\n        window.oRequestAnimationFrame ||\n        window.msRequestAnimationFrame ||\n        function( /* function FrameRequestCallback */ callback, /* DOMElement Element */ element ) {\n\n            window.setTimeout( callback, 1000 / 60 );\n\n        };\n\n    } )();\n\n}\n/*\n * Pannellum - An HTML5 based Panorama Viewer\n * Copyright (c) 2011-2017 Matthew Petroff\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nwindow.pannellum = (function(window, document, undefined) {\n\n'use strict';\n\n/**\n * Creates a new panorama viewer.\n * @constructor\n * @param {HTMLElement|string} container - The container (div) element for the\n *      viewer, or its ID.\n * @param {Object} initialConfig - Inital configuration for viewer.\n */\nfunction Viewer(container, initialConfig) {\n\nvar _this = this;\n\n// Declare variables\nvar config,\n    renderer,\n    preview,\n    isUserInteracting = false,\n    latestInteraction = Date.now(),\n    onPointerDownPointerX = 0,\n    onPointerDownPointerY = 0,\n    onPointerDownPointerDist = -1,\n    onPointerDownYaw = 0,\n    onPointerDownPitch = 0,\n    keysDown = new Array(10),\n    fullscreenActive = false,\n    loaded = false,\n    error = false,\n    isTimedOut = false,\n    listenersAdded = false,\n    panoImage,\n    prevTime,\n    speed = {'yaw': 0, 'pitch': 0, 'hfov': 0},\n    animating = false,\n    orientation = false,\n    orientationYawOffset = 0,\n    autoRotateStart,\n    autoRotateSpeed = 0,\n    origHfov,\n    origPitch,\n    animatedMove = {},\n    externalEventListeners = {},\n    specifiedPhotoSphereExcludes = [],\n    update = false, // Should we update when still to render dynamic content\n    hotspotsCreated = false;\n\nvar defaultConfig = {\n    hfov: 100,\n    minHfov: 50,\n    maxHfov: 120,\n    pitch: 0,\n    minPitch: undefined,\n    maxPitch: undefined,\n    yaw: 0,\n    minYaw: -180,\n    maxYaw: 180,\n    roll: 0,\n    haov: 360,\n    vaov: 180,\n    vOffset: 0,\n    autoRotate: false,\n    autoRotateInactivityDelay: -1,\n    autoRotateStopDelay: undefined,\n    type: 'equirectangular',\n    northOffset: 0,\n    showFullscreenCtrl: true,\n    dynamic: false,\n    doubleClickZoom: true,\n    keyboardZoom: true,\n    mouseZoom: true,\n    showZoomCtrl: true,\n    autoLoad: false,\n    showControls: true,\n    orientationOnByDefault: false,\n    hotSpotDebug: false,\n    backgroundColor: [0, 0, 0],\n    animationTimingFunction: timingFunction,\n    draggable: true,\n};\n\n// Translatable / configurable strings\n// Some strings contain '%s', which is a placeholder for inserted values\n// When setting strings in external configuration, `\\n` should be used instead of `<br>` to insert line breaks\ndefaultConfig.strings = {\n    // Labels\n    loadButtonLabel: 'Click to<br>Load<br>Panorama',\n    loadingLabel: 'Loading...',\n    bylineLabel: 'by %s',    // One substitution: author\n\n    // Errors\n    noPanoramaError: 'No panorama image was specified.',\n    fileAccessError: 'The file %s could not be accessed.',  // One substitution: file URL\n    malformedURLError: 'There is something wrong with the panorama URL.',\n    iOS8WebGLError: \"Due to iOS 8's broken WebGL implementation, only \" +\n                    \"progressive encoded JPEGs work for your device (this \" +\n                    \"panorama uses standard encoding).\",\n    genericWebGLError: 'Your browser does not have the necessary WebGL support to display this panorama.',\n    textureSizeError: 'This panorama is too big for your device! It\\'s ' +\n                '%spx wide, but your device only supports images up to ' +\n                '%spx wide. Try another device.' +\n                ' (If you\\'re the author, try scaling down the image.)',    // Two substitutions: image width, max image width\n    unknownError: 'Unknown error. Check developer console.',\n}\n\nvar usedKeyNumbers = [16, 17, 27, 37, 38, 39, 40, 61, 65, 68, 83, 87, 107, 109, 173, 187, 189];\n\n// Initialize container\ncontainer = typeof container === 'string' ? document.getElementById(container) : container;\ncontainer.classList.add('pnlm-container');\ncontainer.tabIndex = 0;\n\n// Create container for ui\nvar uiContainer = document.createElement('div');\nuiContainer.className = 'pnlm-ui';\ncontainer.appendChild(uiContainer);\n\n// Create container for renderer\nvar renderContainer = document.createElement('div');\nrenderContainer.className = 'pnlm-render-container';\ncontainer.appendChild(renderContainer);\nvar dragFix = document.createElement('div');\ndragFix.className = 'pnlm-dragfix';\nuiContainer.appendChild(dragFix);\n\n// Display about information on right click\nvar aboutMsg = document.createElement('span');\naboutMsg.className = 'pnlm-about-msg';\naboutMsg.innerHTML = '<a href=\"https://pannellum.org/\" target=\"_blank\">Pannellum</a> 7617f97';\nuiContainer.appendChild(aboutMsg);\ndragFix.addEventListener('contextmenu', aboutMessage);\n\n// Create info display\nvar infoDisplay = {};\n\n// Hot spot debug indicator\nvar hotSpotDebugIndicator = document.createElement('div');\nhotSpotDebugIndicator.className = 'pnlm-sprite pnlm-hot-spot-debug-indicator';\nuiContainer.appendChild(hotSpotDebugIndicator);\n\n// Panorama info\ninfoDisplay.container = document.createElement('div');\ninfoDisplay.container.className = 'pnlm-panorama-info';\ninfoDisplay.title = document.createElement('div');\ninfoDisplay.title.className = 'pnlm-title-box';\ninfoDisplay.container.appendChild(infoDisplay.title);\ninfoDisplay.author = document.createElement('div');\ninfoDisplay.author.className = 'pnlm-author-box';\ninfoDisplay.container.appendChild(infoDisplay.author);\nuiContainer.appendChild(infoDisplay.container);\n\n// Load box\ninfoDisplay.load = {};\ninfoDisplay.load.box = document.createElement('div');\ninfoDisplay.load.box.className = 'pnlm-load-box';\ninfoDisplay.load.box.innerHTML = '<p class=\"pnlm-loading-title\"></p>';\ninfoDisplay.load.lbox = document.createElement('div');\ninfoDisplay.load.lbox.className = 'pnlm-lbox';\ninfoDisplay.load.lbox.innerHTML = '<div class=\"pnlm-loading\"></div>';\ninfoDisplay.load.box.appendChild(infoDisplay.load.lbox);\ninfoDisplay.load.lbar = document.createElement('div');\ninfoDisplay.load.lbar.className = 'pnlm-lbar';\ninfoDisplay.load.lbarFill = document.createElement('div');\ninfoDisplay.load.lbarFill.className = 'pnlm-lbar-fill';\ninfoDisplay.load.lbar.appendChild(infoDisplay.load.lbarFill);\ninfoDisplay.load.box.appendChild(infoDisplay.load.lbar);\ninfoDisplay.load.msg = document.createElement('p');\ninfoDisplay.load.msg.className = 'pnlm-lmsg';\ninfoDisplay.load.box.appendChild(infoDisplay.load.msg);\nuiContainer.appendChild(infoDisplay.load.box);\n\n// Error message\ninfoDisplay.errorMsg = document.createElement('div');\ninfoDisplay.errorMsg.className = 'pnlm-error-msg pnlm-info-box';\nuiContainer.appendChild(infoDisplay.errorMsg);\n\n// Create controls\nvar controls = {};\ncontrols.container = document.createElement('div');\ncontrols.container.className = 'pnlm-controls-container';\nuiContainer.appendChild(controls.container);\n\n// Load button\ncontrols.load = document.createElement('div');\ncontrols.load.className = 'pnlm-load-button';\ncontrols.load.addEventListener('click', function() {\n    processOptions();\n    load();\n});\nuiContainer.appendChild(controls.load);\n\n// Zoom controls\ncontrols.zoom = document.createElement('div');\ncontrols.zoom.className = 'pnlm-zoom-controls pnlm-controls';\ncontrols.zoomIn = document.createElement('div');\ncontrols.zoomIn.className = 'pnlm-zoom-in pnlm-sprite pnlm-control';\ncontrols.zoomIn.addEventListener('click', zoomIn);\ncontrols.zoom.appendChild(controls.zoomIn);\ncontrols.zoomOut = document.createElement('div');\ncontrols.zoomOut.className = 'pnlm-zoom-out pnlm-sprite pnlm-control';\ncontrols.zoomOut.addEventListener('click', zoomOut);\ncontrols.zoom.appendChild(controls.zoomOut);\ncontrols.container.appendChild(controls.zoom);\n\n// Fullscreen toggle\ncontrols.fullscreen = document.createElement('div');\ncontrols.fullscreen.addEventListener('click', toggleFullscreen);\ncontrols.fullscreen.className = 'pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control';\nif (document.fullscreenEnabled || document.mozFullScreenEnabled || document.webkitFullscreenEnabled || document.msFullscreenEnabled)\n    controls.container.appendChild(controls.fullscreen);\n\n// Device orientation toggle\ncontrols.orientation = document.createElement('div');\ncontrols.orientation.addEventListener('click', function(e) {\n    if (orientation)\n        stopOrientation();\n    else\n        startOrientation();\n});\ncontrols.orientation.addEventListener('mousedown', function(e) {e.stopPropagation();});\ncontrols.orientation.addEventListener('touchstart', function(e) {e.stopPropagation();});\ncontrols.orientation.addEventListener('pointerdown', function(e) {e.stopPropagation();});\ncontrols.orientation.className = 'pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control';\nvar orientationSupport, startOrientationIfSupported = false;\nfunction deviceOrientationTest(e) {\n    window.removeEventListener('deviceorientation', deviceOrientationTest);\n    if (e && e.alpha !== null && e.beta !== null && e.gamma !== null) {\n        controls.container.appendChild(controls.orientation);\n        orientationSupport = true;\n        if (startOrientationIfSupported)\n            startOrientation();\n    } else {\n        orientationSupport = false;\n    }\n}\nif (window.DeviceOrientationEvent) {\n    window.addEventListener('deviceorientation', deviceOrientationTest);\n} else {\n    orientationSupport = false;\n}\n\n// Compass\nvar compass = document.createElement('div');\ncompass.className = 'pnlm-compass pnlm-controls pnlm-control';\nuiContainer.appendChild(compass);\n\n// Load and process configuration\nif (initialConfig.firstScene) {\n    // Activate first scene if specified in URL\n    mergeConfig(initialConfig.firstScene);\n} else if (initialConfig.default && initialConfig.default.firstScene) {\n    // Activate first scene if specified in file\n    mergeConfig(initialConfig.default.firstScene);\n} else {\n    mergeConfig(null);\n}\nprocessOptions(true);\n\n/**\n * Initializes viewer.\n * @private\n */\nfunction init() {\n    // Display an error for IE 9 as it doesn't work but also doesn't otherwise\n    // show an error (older versions don't work at all)\n    // Based on: http://stackoverflow.com/a/10965203\n    var div = document.createElement(\"div\");\n    div.innerHTML = \"<!--[if lte IE 9]><i></i><![endif]-->\";\n    if (div.getElementsByTagName(\"i\").length == 1) {\n        anError();\n        return;\n    }\n\n    origHfov = config.hfov;\n    origPitch = config.pitch;\n\n    var i, p;\n\n    if (config.type == 'cubemap') {\n        panoImage = [];\n        for (i = 0; i < 6; i++) {\n            panoImage.push(new Image());\n            panoImage[i].crossOrigin = 'anonymous';\n        }\n        infoDisplay.load.lbox.style.display = 'block';\n        infoDisplay.load.lbar.style.display = 'none';\n    } else if (config.type == 'multires') {\n        var c = JSON.parse(JSON.stringify(config.multiRes));    // Deep copy\n        // Avoid \"undefined\" in path, check (optional) multiRes.basePath, too\n        // Use only multiRes.basePath if it's an absolute URL\n        if (config.basePath && config.multiRes.basePath &&\n            !(/^(?:[a-z]+:)?\\/\\//i.test(config.multiRes.basePath))) {\n            c.basePath = config.basePath + config.multiRes.basePath;\n        } else if (config.multiRes.basePath) {\n            c.basePath = config.multiRes.basePath;\n        } else if(config.basePath) {\n            c.basePath = config.basePath;\n        }\n        panoImage = c;\n    } else {\n        if (config.dynamic === true) {\n            panoImage = config.panorama;\n        } else {\n            if (config.panorama === undefined) {\n                anError(config.strings.noPanoramaError);\n                return;\n            }\n            panoImage = new Image();\n        }\n    }\n\n    // Configure image loading\n    if (config.type == 'cubemap') {\n        // Quick loading counter for synchronous loading\n        var itemsToLoad = 6;\n\n        var onLoad = function() {\n            itemsToLoad--;\n            if (itemsToLoad === 0) {\n                onImageLoad();\n            }\n        };\n\n        var onError = function(e) {\n            var a = document.createElement('a');\n            a.href = e.target.src;\n            a.innerHTML = a.href;\n            anError(config.strings.fileAccessError.replace('%s', a.outerHTML));\n        };\n\n        for (i = 0; i < panoImage.length; i++) {\n            panoImage[i].onload = onLoad;\n            panoImage[i].onerror = onError;\n            p = config.cubeMap[i];\n            if (config.basePath && !absoluteURL(p)) {\n                p = config.basePath + p;\n            }\n            panoImage[i].src = encodeURI(p);\n        }\n    } else if (config.type == 'multires') {\n        onImageLoad();\n    } else {\n        p = '';\n        if (config.basePath) {\n            p = config.basePath;\n        }\n\n        if (config.dynamic !== true) {\n            // Still image\n            p = absoluteURL(config.panorama) ? config.panorama : p + config.panorama;\n\n            panoImage.onload = function() {\n                window.URL.revokeObjectURL(this.src);  // Clean up\n                onImageLoad();\n            };\n\n            var xhr = new XMLHttpRequest();\n            xhr.onloadend = function() {\n                if (xhr.status != 200) {\n                    // Display error if image can't be loaded\n                    var a = document.createElement('a');\n                    a.href = encodeURI(p);\n                    a.innerHTML = a.href;\n                    anError(config.strings.fileAccessError.replace('%s', a.outerHTML));\n                }\n                var img = this.response;\n                parseGPanoXMP(img);\n                infoDisplay.load.msg.innerHTML = '';\n            };\n            xhr.onprogress = function(e) {\n                if (e.lengthComputable) {\n                    // Display progress\n                    var percent = e.loaded / e.total * 100;\n                    infoDisplay.load.lbarFill.style.width = percent + '%';\n                    var unit, numerator, denominator;\n                    if (e.total > 1e6) {\n                        unit = 'MB';\n                        numerator = (e.loaded / 1e6).toFixed(2);\n                        denominator = (e.total / 1e6).toFixed(2);\n                    } else if (e.total > 1e3) {\n                        unit = 'kB';\n                        numerator = (e.loaded / 1e3).toFixed(1);\n                        denominator = (e.total / 1e3).toFixed(1);\n                    } else {\n                        unit = 'B';\n                        numerator = e.loaded;\n                        denominator = e.total;\n                    }\n                    infoDisplay.load.msg.innerHTML = numerator + ' / ' + denominator + ' ' + unit;\n                } else {\n                    // Display loading spinner\n                    infoDisplay.load.lbox.style.display = 'block';\n                    infoDisplay.load.lbar.style.display = 'none';\n                }\n            };\n            try {\n                xhr.open('GET', p, true);\n            } catch (e) {\n                // Malformed URL\n                anError(config.strings.malformedURLError);\n            }\n            xhr.responseType = 'blob';\n            xhr.setRequestHeader('Accept', 'image/*,*/*;q=0.9');\n            xhr.send();\n        }\n    }\n\n    uiContainer.classList.add('pnlm-grab');\n    uiContainer.classList.remove('pnlm-grabbing');\n}\n\n/**\n * Test if URL is absolute or relative.\n * @private\n * @param {string} url - URL to test\n * @returns {boolean} True if absolute, else false\n */\nfunction absoluteURL(url) {\n    // From http://stackoverflow.com/a/19709846\n    return new RegExp('^(?:[a-z]+:)?//', 'i').test(url) || url[0] == '/' || url.slice(0, 5) == 'blob:';\n};\n\n/**\n * Create renderer and initialize event listeners once image is loaded.\n * @private\n */\nfunction onImageLoad() {\n    if (!renderer)\n        renderer = new libpannellum.renderer(renderContainer);\n\n    // Only add event listeners once\n    if (!listenersAdded) {\n        listenersAdded = true;\n        dragFix.addEventListener('mousedown', onDocumentMouseDown, false);\n        document.addEventListener('mousemove', onDocumentMouseMove, false);\n        document.addEventListener('mouseup', onDocumentMouseUp, false);\n        if (config.mouseZoom) {\n            uiContainer.addEventListener('mousewheel', onDocumentMouseWheel, false);\n            uiContainer.addEventListener('DOMMouseScroll', onDocumentMouseWheel, false);\n        }\n        if (config.doubleClickZoom) {\n            dragFix.addEventListener('dblclick', onDocumentDoubleClick, false);\n        }\n        uiContainer.addEventListener('mozfullscreenchange', onFullScreenChange, false);\n        uiContainer.addEventListener('webkitfullscreenchange', onFullScreenChange, false);\n        uiContainer.addEventListener('msfullscreenchange', onFullScreenChange, false);\n        uiContainer.addEventListener('fullscreenchange', onFullScreenChange, false);\n        window.addEventListener('resize', onDocumentResize, false);\n        window.addEventListener('orientationchange', onDocumentResize, false);\n        uiContainer.addEventListener('keydown', onDocumentKeyPress, false);\n        uiContainer.addEventListener('keyup', onDocumentKeyUp, false);\n        uiContainer.addEventListener('blur', clearKeys, false);\n        document.addEventListener('mouseleave', onDocumentMouseUp, false);\n        dragFix.addEventListener('touchstart', onDocumentTouchStart, false);\n        dragFix.addEventListener('touchmove', onDocumentTouchMove, false);\n        dragFix.addEventListener('touchend', onDocumentTouchEnd, false);\n        dragFix.addEventListener('pointerdown', onDocumentPointerDown, false);\n        dragFix.addEventListener('pointermove', onDocumentPointerMove, false);\n        dragFix.addEventListener('pointerup', onDocumentPointerUp, false);\n        dragFix.addEventListener('pointerleave', onDocumentPointerUp, false);\n\n        // Deal with MS pointer events\n        if (window.navigator.pointerEnabled)\n            container.style.touchAction = 'none';\n    }\n\n    renderInit();\n    setTimeout(function(){isTimedOut = true;}, 500);\n}\n\n/**\n * Parses Google Photo Sphere XMP Metadata.\n * https://developers.google.com/photo-sphere/metadata/\n * @private\n * @param {Image} image - Image to read XMP metadata from.\n */\nfunction parseGPanoXMP(image) {\n    var reader = new FileReader();\n    reader.addEventListener('loadend', function() {\n        var img = reader.result;\n\n        // This awful browser specific test exists because iOS 8 does not work\n        // with non-progressive encoded JPEGs.\n        if (navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)) {\n            var flagIndex = img.indexOf('\\xff\\xc2');\n            if (flagIndex < 0 || flagIndex > 65536)\n                anError(config.strings.iOS8WebGLError);\n        }\n\n        var start = img.indexOf('<x:xmpmeta');\n        if (start > -1 && config.ignoreGPanoXMP !== true) {\n            var xmpData = img.substring(start, img.indexOf('</x:xmpmeta>') + 12);\n\n            // Extract the requested tag from the XMP data\n            var getTag = function(tag) {\n                var result;\n                if (xmpData.indexOf(tag + '=\"') >= 0) {\n                    result = xmpData.substring(xmpData.indexOf(tag + '=\"') + tag.length + 2);\n                    result = result.substring(0, result.indexOf('\"'));\n                } else if (xmpData.indexOf(tag + '>') >= 0) {\n                    result = xmpData.substring(xmpData.indexOf(tag + '>') + tag.length + 1);\n                    result = result.substring(0, result.indexOf('<'));\n                }\n                if (result !== undefined) {\n                    return Number(result);\n                }\n                return null;\n            };\n\n            // Relevant XMP data\n            var xmp = {\n                fullWidth: getTag('GPano:FullPanoWidthPixels'),\n                croppedWidth: getTag('GPano:CroppedAreaImageWidthPixels'),\n                fullHeight: getTag('GPano:FullPanoHeightPixels'),\n                croppedHeight: getTag('GPano:CroppedAreaImageHeightPixels'),\n                topPixels: getTag('GPano:CroppedAreaTopPixels'),\n                heading: getTag('GPano:PoseHeadingDegrees'),\n                horizonPitch: getTag('GPano:PosePitchDegrees'),\n                horizonRoll: getTag('GPano:PoseRollDegrees')\n            };\n\n            if (xmp.fullWidth !== null && xmp.croppedWidth !== null &&\n                xmp.fullHeight !== null && xmp.croppedHeight !== null &&\n                xmp.topPixels !== null) {\n\n                // Set up viewer using GPano XMP data\n                if (specifiedPhotoSphereExcludes.indexOf('haov') < 0)\n                    config.haov = xmp.croppedWidth / xmp.fullWidth * 360;\n                if (specifiedPhotoSphereExcludes.indexOf('vaov') < 0)\n                    config.vaov = xmp.croppedHeight / xmp.fullHeight * 180;\n                if (specifiedPhotoSphereExcludes.indexOf('vOffset') < 0)\n                    config.vOffset = ((xmp.topPixels + xmp.croppedHeight / 2) / xmp.fullHeight - 0.5) * -180;\n                if (xmp.heading !== null && specifiedPhotoSphereExcludes.indexOf('northOffset') < 0) {\n                    // TODO: make sure this works correctly for partial panoramas\n                    config.northOffset = xmp.heading;\n                    if (config.compass !== false) {\n                        config.compass = true;\n                    }\n                }\n                if (xmp.horizonPitch !== null && xmp.horizonRoll !== null) {\n                    if (specifiedPhotoSphereExcludes.indexOf('horizonPitch') < 0)\n                        config.horizonPitch = xmp.horizonPitch;\n                    if (specifiedPhotoSphereExcludes.indexOf('horizonRoll') < 0)\n                        config.horizonRoll = xmp.horizonRoll;\n                }\n\n                // TODO: add support for initial view settings\n            }\n        }\n\n        // Load panorama\n        panoImage.src = window.URL.createObjectURL(image);\n    });\n    if (reader.readAsBinaryString !== undefined)\n        reader.readAsBinaryString(image);\n    else\n        reader.readAsText(image);\n}\n\n/**\n * Displays an error message.\n * @private\n * @param {string} errorMsg - Error message to display. If not specified, a\n *      generic WebGL error is displayed.\n */\nfunction anError(errorMsg) {\n    if (errorMsg === undefined)\n        errorMsg = config.strings.genericWebGLError;\n    infoDisplay.errorMsg.innerHTML = '<p>' + errorMsg + '</p>';\n    controls.load.style.display = 'none';\n    infoDisplay.load.box.style.display = 'none';\n    infoDisplay.errorMsg.style.display = 'table';\n    error = true;\n    renderContainer.style.display = 'none';\n    fireEvent('error', errorMsg);\n}\n\n/**\n * Hides error message display.\n * @private\n */\nfunction clearError() {\n    if (error) {\n        infoDisplay.load.box.style.display = 'none';\n        infoDisplay.errorMsg.style.display = 'none';\n        error = false;\n        fireEvent('errorcleared');\n    }\n}\n\n/**\n * Displays about message.\n * @private\n * @param {MouseEvent} event - Right click location\n */\nfunction aboutMessage(event) {\n    var pos = mousePosition(event);\n    aboutMsg.style.left = pos.x + 'px';\n    aboutMsg.style.top = pos.y + 'px';\n    clearTimeout(aboutMessage.t1);\n    clearTimeout(aboutMessage.t2);\n    aboutMsg.style.display = 'block';\n    aboutMsg.style.opacity = 1;\n    aboutMessage.t1 = setTimeout(function() {aboutMsg.style.opacity = 0;}, 2000);\n    aboutMessage.t2 = setTimeout(function() {aboutMsg.style.display = 'none';}, 2500);\n    event.preventDefault();\n}\n\n/**\n * Calculate mouse position relative to top left of viewer container.\n * @private\n * @param {MouseEvent} event - Mouse event to use in calculation\n * @returns {Object} Calculated X and Y coordinates\n */\nfunction mousePosition(event) {\n    var bounds = container.getBoundingClientRect();\n    var pos = {};\n    pos.x = event.clientX - bounds.left;\n    pos.y = event.clientY - bounds.top;\n    return pos;\n}\n\n/**\n * Event handler for mouse clicks. Initializes panning. Prints center and click\n * location coordinates when hot spot debugging is enabled.\n * @private\n * @param {MouseEvent} event - Document mouse down event.\n */\nfunction onDocumentMouseDown(event) {\n    // Override default action\n    event.preventDefault();\n    // But not all of it\n    container.focus();\n\n    // Only do something if the panorama is loaded\n    if (!loaded || !config.draggable) {\n        return;\n    }\n\n    // Calculate mouse position relative to top left of viewer container\n    var pos = mousePosition(event);\n\n    // Log pitch / yaw of mouse click when debugging / placing hot spots\n    if (config.hotSpotDebug) {\n        var coords = mouseEventToCoords(event);\n        console.log('Pitch: ' + coords[0] + ', Yaw: ' + coords[1] + ', Center Pitch: ' +\n            config.pitch + ', Center Yaw: ' + config.yaw + ', HFOV: ' + config.hfov);\n    }\n\n    // Turn off auto-rotation if enabled\n    stopAnimation();\n\n    stopOrientation();\n    config.roll = 0;\n\n    speed.hfov = 0;\n\n    isUserInteracting = true;\n    latestInteraction = Date.now();\n\n    onPointerDownPointerX = pos.x;\n    onPointerDownPointerY = pos.y;\n\n    onPointerDownYaw = config.yaw;\n    onPointerDownPitch = config.pitch;\n\n    uiContainer.classList.add('pnlm-grabbing');\n    uiContainer.classList.remove('pnlm-grab');\n\n    fireEvent('mousedown', event);\n    animateInit();\n}\n\n/**\n * Event handler for double clicks. Zooms in at clicked location\n * @private\n * @param {MouseEvent} event - Document mouse down event.\n */\nfunction onDocumentDoubleClick(event) {\n    if (config.minHfov === config.hfov) {\n        _this.setHfov(origHfov, 1000);\n    } else {\n        var coords = mouseEventToCoords(event);\n        _this.lookAt(coords[0], coords[1], config.minHfov, 1000);\n    }\n}\n\n/**\n * Calculate panorama pitch and yaw from location of mouse event.\n * @private\n * @param {MouseEvent} event - Document mouse down event.\n * @returns {number[]} [pitch, yaw]\n */\nfunction mouseEventToCoords(event) {\n    var pos = mousePosition(event);\n    var canvas = renderer.getCanvas();\n    var canvasWidth = canvas.clientWidth,\n        canvasHeight = canvas.clientHeight;\n    var x = pos.x / canvasWidth * 2 - 1;\n    var y = (1 - pos.y / canvasHeight * 2) * canvasHeight / canvasWidth;\n    var focal = 1 / Math.tan(config.hfov * Math.PI / 360);\n    var s = Math.sin(config.pitch * Math.PI / 180);\n    var c = Math.cos(config.pitch * Math.PI / 180);\n    var a = focal * c - y * s;\n    var root = Math.sqrt(x*x + a*a);\n    var pitch = Math.atan((y * c + focal * s) / root) * 180 / Math.PI;\n    var yaw = Math.atan2(x / root, a / root) * 180 / Math.PI + config.yaw;\n    if (yaw < -180)\n        yaw += 360;\n    if (yaw > 180)\n        yaw -= 360;\n    return [pitch, yaw];\n}\n\n/**\n * Event handler for mouse moves. Pans center of view.\n * @private\n * @param {MouseEvent} event - Document mouse move event.\n */\nfunction onDocumentMouseMove(event) {\n    if (isUserInteracting && loaded) {\n        latestInteraction = Date.now();\n        var canvas = renderer.getCanvas();\n        var canvasWidth = canvas.clientWidth,\n            canvasHeight = canvas.clientHeight;\n        var pos = mousePosition(event);\n        //TODO: This still isn't quite right\n        var yaw = ((Math.atan(onPointerDownPointerX / canvasWidth * 2 - 1) - Math.atan(pos.x / canvasWidth * 2 - 1)) * 180 / Math.PI * config.hfov / 90) + onPointerDownYaw;\n        speed.yaw = (yaw - config.yaw) % 360 * 0.2;\n        config.yaw = yaw;\n\n        var vfov = 2 * Math.atan(Math.tan(config.hfov/360*Math.PI) * canvasHeight / canvasWidth) * 180 / Math.PI;\n\n        var pitch = ((Math.atan(pos.y / canvasHeight * 2 - 1) - Math.atan(onPointerDownPointerY / canvasHeight * 2 - 1)) * 180 / Math.PI * vfov / 90) + onPointerDownPitch;\n        speed.pitch = (pitch - config.pitch) * 0.2;\n        config.pitch = pitch;\n    }\n}\n\n/**\n * Event handler for mouse up events. Stops panning.\n * @private\n */\nfunction onDocumentMouseUp(event) {\n    if (!isUserInteracting) {\n        return;\n    }\n    isUserInteracting = false;\n    if (Date.now() - latestInteraction > 15) {\n        // Prevents jump when user rapidly moves mouse, stops, and then\n        // releases the mouse button\n        speed.pitch = speed.yaw = 0;\n    }\n    uiContainer.classList.add('pnlm-grab');\n    uiContainer.classList.remove('pnlm-grabbing');\n    latestInteraction = Date.now();\n\n    fireEvent('mouseup', event);\n}\n\n/**\n * Event handler for touches. Initializes panning if one touch or zooming if\n * two touches.\n * @private\n * @param {TouchEvent} event - Document touch start event.\n */\nfunction onDocumentTouchStart(event) {\n    // Only do something if the panorama is loaded\n    if (!loaded || !config.draggable) {\n        return;\n    }\n\n    // Turn off auto-rotation if enabled\n    stopAnimation();\n\n    stopOrientation();\n    config.roll = 0;\n\n    speed.hfov = 0;\n\n    // Calculate touch position relative to top left of viewer container\n    var pos0 = mousePosition(event.targetTouches[0]);\n\n    onPointerDownPointerX = pos0.x;\n    onPointerDownPointerY = pos0.y;\n\n    if (event.targetTouches.length == 2) {\n        // Down pointer is the center of the two fingers\n        var pos1 = mousePosition(event.targetTouches[1]);\n        onPointerDownPointerX += (pos1.x - pos0.x) * 0.5;\n        onPointerDownPointerY += (pos1.y - pos0.y) * 0.5;\n        onPointerDownPointerDist = Math.sqrt((pos0.x - pos1.x) * (pos0.x - pos1.x) +\n                                             (pos0.y - pos1.y) * (pos0.y - pos1.y));\n    }\n    isUserInteracting = true;\n    latestInteraction = Date.now();\n\n    onPointerDownYaw = config.yaw;\n    onPointerDownPitch = config.pitch;\n\n    fireEvent('touchstart', event);\n    animateInit();\n}\n\n/**\n * Event handler for touch movements. Pans center of view if one touch or\n * adjusts zoom if two touches.\n * @private\n * @param {TouchEvent} event - Document touch move event.\n */\nfunction onDocumentTouchMove(event) {\n    if (!config.draggable) {\n        return;\n    }\n\n    // Override default action\n    event.preventDefault();\n    if (loaded) {\n        latestInteraction = Date.now();\n    }\n    if (isUserInteracting && loaded) {\n        var pos0 = mousePosition(event.targetTouches[0]);\n        var clientX = pos0.x;\n        var clientY = pos0.y;\n\n        if (event.targetTouches.length == 2 && onPointerDownPointerDist != -1) {\n            var pos1 = mousePosition(event.targetTouches[1]);\n            clientX += (pos1.x - pos0.x) * 0.5;\n            clientY += (pos1.y - pos0.y) * 0.5;\n            var clientDist = Math.sqrt((pos0.x - pos1.x) * (pos0.x - pos1.x) +\n                                       (pos0.y - pos1.y) * (pos0.y - pos1.y));\n            setHfov(config.hfov + (onPointerDownPointerDist - clientDist) * 0.1);\n            onPointerDownPointerDist = clientDist;\n        }\n\n        // The smaller the config.hfov value (the more zoomed-in the user is), the faster\n        // yaw/pitch are perceived to change on one-finger touchmove (panning) events and vice versa.\n        // To improve usability at both small and large zoom levels (config.hfov values)\n        // we introduce a dynamic pan speed coefficient.\n        //\n        // Currently this seems to *roughly* keep initial drag/pan start position close to\n        // the user's finger while panning regardless of zoom level / config.hfov value.\n        var touchmovePanSpeedCoeff = config.hfov / 360;\n\n        var yaw = (onPointerDownPointerX - clientX) * touchmovePanSpeedCoeff + onPointerDownYaw;\n        speed.yaw = (yaw - config.yaw) % 360 * 0.2;\n        config.yaw = yaw;\n\n        var pitch = (clientY - onPointerDownPointerY) * touchmovePanSpeedCoeff + onPointerDownPitch;\n        speed.pitch = (pitch - config.pitch) * 0.2;\n        config.pitch = pitch;\n    }\n}\n\n/**\n * Event handler for end of touches. Stops panning and/or zooming.\n * @private\n */\nfunction onDocumentTouchEnd() {\n    isUserInteracting = false;\n    if (Date.now() - latestInteraction > 150) {\n        speed.pitch = speed.yaw = 0;\n    }\n    onPointerDownPointerDist = -1;\n    latestInteraction = Date.now();\n\n    fireEvent('touchend', event);\n}\n\nvar pointerIDs = [],\n    pointerCoordinates = [];\n/**\n * Event handler for touch starts in IE / Edge.\n * @private\n * @param {PointerEvent} event - Document pointer down event.\n */\nfunction onDocumentPointerDown(event) {\n    if (event.pointerType == 'touch') {\n        pointerIDs.push(event.pointerId);\n        pointerCoordinates.push({clientX: event.clientX, clientY: event.clientY});\n        event.targetTouches = pointerCoordinates;\n        onDocumentTouchStart(event);\n        event.preventDefault();\n    }\n}\n\n/**\n * Event handler for touch moves in IE / Edge.\n * @private\n * @param {PointerEvent} event - Document pointer move event.\n */\nfunction onDocumentPointerMove(event) {\n    if (event.pointerType == 'touch') {\n        for (var i = 0; i < pointerIDs.length; i++) {\n            if (event.pointerId == pointerIDs[i]) {\n                pointerCoordinates[i].clientX = event.clientX;\n                pointerCoordinates[i].clientY = event.clientY;\n                event.targetTouches = pointerCoordinates;\n                onDocumentTouchMove(event);\n                //event.preventDefault();\n                return;\n            }\n        }\n    }\n}\n\n/**\n * Event handler for touch ends in IE / Edge.\n * @private\n * @param {PointerEvent} event - Document pointer up event.\n */\nfunction onDocumentPointerUp(event) {\n    if (event.pointerType == 'touch') {\n        var defined = false;\n        for (var i = 0; i < pointerIDs.length; i++) {\n            if (event.pointerId == pointerIDs[i])\n                pointerIDs[i] = undefined;\n            if (pointerIDs[i])\n                defined = true;\n        }\n        if (!defined) {\n            pointerIDs = [];\n            pointerCoordinates = [];\n            onDocumentTouchEnd();\n        }\n        event.preventDefault();\n    }\n}\n\n/**\n * Event handler for mouse wheel. Changes zoom.\n * @private\n * @param {WheelEvent} event - Document mouse wheel event.\n */\nfunction onDocumentMouseWheel(event) {\n    // Only do something if the panorama is loaded and mouse wheel zoom is enabled\n    if (!loaded || (config.mouseZoom == 'fullscreenonly' && !fullscreenActive)) {\n        return;\n    }\n\n    event.preventDefault();\n\n    // Turn off auto-rotation if enabled\n    stopAnimation();\n    latestInteraction = Date.now();\n\n    if (event.wheelDeltaY) {\n        // WebKit\n        setHfov(config.hfov - event.wheelDeltaY * 0.05);\n        speed.hfov = event.wheelDelta < 0 ? 1 : -1;\n    } else if (event.wheelDelta) {\n        // Opera / Explorer 9\n        setHfov(config.hfov - event.wheelDelta * 0.05);\n        speed.hfov = event.wheelDelta < 0 ? 1 : -1;\n    } else if (event.detail) {\n        // Firefox\n        setHfov(config.hfov + event.detail * 1.5);\n        speed.hfov = event.detail > 0 ? 1 : -1;\n    }\n\n    animateInit();\n}\n\n/**\n * Event handler for key presses. Updates list of currently pressed keys.\n * @private\n * @param {KeyboardEvent} event - Document key press event.\n */\nfunction onDocumentKeyPress(event) {\n    // Turn off auto-rotation if enabled\n    stopAnimation();\n    latestInteraction = Date.now();\n\n    stopOrientation();\n    config.roll = 0;\n\n    // Record key pressed\n    var keynumber = event.which || event.keycode;\n\n    // Override default action for keys that are used\n    if (usedKeyNumbers.indexOf(keynumber) < 0)\n        return\n    event.preventDefault();\n\n    // If escape key is pressed\n    if (keynumber == 27) {\n        // If in fullscreen mode\n        if (fullscreenActive) {\n            toggleFullscreen();\n        }\n    } else {\n        // Change key\n        changeKey(keynumber, true);\n    }\n}\n\n/**\n * Clears list of currently pressed keys.\n * @private\n */\nfunction clearKeys() {\n    for (var i = 0; i < 10; i++) {\n        keysDown[i] = false;\n    }\n}\n\n/**\n * Event handler for key releases. Updates list of currently pressed keys.\n * @private\n * @param {KeyboardEvent} event - Document key up event.\n */\nfunction onDocumentKeyUp(event) {\n    // Record key pressed\n    var keynumber = event.which || event.keycode;\n\n    // Override default action for keys that are used\n    if (usedKeyNumbers.indexOf(keynumber) < 0)\n        return\n    event.preventDefault();\n\n    // Change key\n    changeKey(keynumber, false);\n}\n\n/**\n * Updates list of currently pressed keys.\n * @private\n * @param {number} keynumber - Key number.\n * @param {boolean} value - Whether or not key is pressed.\n */\nfunction changeKey(keynumber, value) {\n    var keyChanged = false;\n    switch(keynumber) {\n        // If minus key is released\n        case 109: case 189: case 17: case 173:\n            if (keysDown[0] != value) { keyChanged = true; }\n            keysDown[0] = value; break;\n\n        // If plus key is released\n        case 107: case 187: case 16: case 61:\n            if (keysDown[1] != value) { keyChanged = true; }\n            keysDown[1] = value; break;\n\n        // If up arrow is released\n        case 38:\n            if (keysDown[2] != value) { keyChanged = true; }\n            keysDown[2] = value; break;\n\n        // If \"w\" is released\n        case 87:\n            if (keysDown[6] != value) { keyChanged = true; }\n            keysDown[6] = value; break;\n\n        // If down arrow is released\n        case 40:\n            if (keysDown[3] != value) { keyChanged = true; }\n            keysDown[3] = value; break;\n\n        // If \"s\" is released\n        case 83:\n            if (keysDown[7] != value) { keyChanged = true; }\n            keysDown[7] = value; break;\n\n        // If left arrow is released\n        case 37:\n            if (keysDown[4] != value) { keyChanged = true; }\n            keysDown[4] = value; break;\n\n        // If \"a\" is released\n        case 65:\n            if (keysDown[8] != value) { keyChanged = true; }\n            keysDown[8] = value; break;\n\n        // If right arrow is released\n        case 39:\n            if (keysDown[5] != value) { keyChanged = true; }\n            keysDown[5] = value; break;\n\n        // If \"d\" is released\n        case 68:\n            if (keysDown[9] != value) { keyChanged = true; }\n            keysDown[9] = value;\n    }\n\n    if (keyChanged && value) {\n        if (typeof performance !== 'undefined' && performance.now()) {\n            prevTime = performance.now();\n        } else {\n            prevTime = Date.now();\n        }\n        animateInit();\n    }\n}\n\n/**\n * Pans and/or zooms panorama based on currently pressed keys. Also handles\n * panorama \"inertia\" and auto rotation.\n * @private\n */\nfunction keyRepeat() {\n    // Only do something if the panorama is loaded\n    if (!loaded) {\n        return;\n    }\n\n    var isKeyDown = false;\n\n    var prevPitch = config.pitch;\n    var prevYaw = config.yaw;\n    var prevZoom = config.hfov;\n\n    var newTime;\n    if (typeof performance !== 'undefined' && performance.now()) {\n        newTime = performance.now();\n    } else {\n        newTime = Date.now();\n    }\n    if (prevTime === undefined) {\n        prevTime = newTime;\n    }\n    var diff = (newTime - prevTime) * config.hfov / 1700;\n    diff = Math.min(diff, 1.0);\n\n    // If minus key is down\n    if (keysDown[0] && config.keyboardZoom === true) {\n        setHfov(config.hfov + (speed.hfov * 0.8 + 0.5) * diff);\n        isKeyDown = true;\n    }\n\n    // If plus key is down\n    if (keysDown[1] && config.keyboardZoom === true) {\n        setHfov(config.hfov + (speed.hfov * 0.8 - 0.2) * diff);\n        isKeyDown = true;\n    }\n\n    // If up arrow or \"w\" is down\n    if (keysDown[2] || keysDown[6]) {\n        // Pan up\n        config.pitch += (speed.pitch * 0.8 + 0.2) * diff;\n        isKeyDown = true;\n    }\n\n    // If down arrow or \"s\" is down\n    if (keysDown[3] || keysDown[7]) {\n        // Pan down\n        config.pitch += (speed.pitch * 0.8 - 0.2) * diff;\n        isKeyDown = true;\n    }\n\n    // If left arrow or \"a\" is down\n    if (keysDown[4] || keysDown[8]) {\n        // Pan left\n        config.yaw += (speed.yaw * 0.8 - 0.2) * diff;\n        isKeyDown = true;\n    }\n\n    // If right arrow or \"d\" is down\n    if (keysDown[5] || keysDown[9]) {\n        // Pan right\n        config.yaw += (speed.yaw * 0.8 + 0.2) * diff;\n        isKeyDown = true;\n    }\n\n    if (isKeyDown)\n        latestInteraction = Date.now();\n\n    // If auto-rotate\n    var inactivityInterval = Date.now() - latestInteraction;\n    if (config.autoRotate) {\n        // Pan\n        if (newTime - prevTime > 0.001) {\n            var timeDiff = (newTime - prevTime) / 1000;\n            var yawDiff = (speed.yaw / timeDiff * diff - config.autoRotate * 0.2) * timeDiff\n            yawDiff = (-config.autoRotate > 0 ? 1 : -1) * Math.min(Math.abs(config.autoRotate * timeDiff), Math.abs(yawDiff));\n            config.yaw += yawDiff;\n        }\n\n        // Deal with stopping auto rotation after a set delay\n        if (config.autoRotateStopDelay) {\n            config.autoRotateStopDelay -= newTime - prevTime;\n            if (config.autoRotateStopDelay <= 0) {\n                config.autoRotateStopDelay = false;\n                autoRotateSpeed = config.autoRotate;\n                config.autoRotate = 0;\n            }\n        }\n    }\n\n    // Animated moves\n    if (animatedMove.pitch) {\n        animateMove('pitch');\n        prevPitch = config.pitch;\n    }\n    if (animatedMove.yaw) {\n        animateMove('yaw');\n        prevYaw = config.yaw;\n    }\n    if (animatedMove.hfov) {\n        animateMove('hfov');\n        prevZoom = config.hfov;\n    }\n\n    // \"Inertia\"\n    if (diff > 0 && !config.autoRotate) {\n        // \"Friction\"\n        var friction = 0.85;\n\n        // Yaw\n        if (!keysDown[4] && !keysDown[5] && !keysDown[8] && !keysDown[9] && !animatedMove.yaw) {\n            config.yaw += speed.yaw * diff * friction;\n        }\n        // Pitch\n        if (!keysDown[2] && !keysDown[3] && !keysDown[6] && !keysDown[7] && !animatedMove.pitch) {\n            config.pitch += speed.pitch * diff * friction;\n        }\n        // Zoom\n        if (!keysDown[0] && !keysDown[1] && !animatedMove.hfov) {\n            setHfov(config.hfov + speed.hfov * diff * friction);\n        }\n    }\n\n    prevTime = newTime;\n    if (diff > 0) {\n        speed.yaw = speed.yaw * 0.8 + (config.yaw - prevYaw) / diff * 0.2;\n        speed.pitch = speed.pitch * 0.8 + (config.pitch - prevPitch) / diff * 0.2;\n        speed.hfov = speed.hfov * 0.8 + (config.hfov - prevZoom) / diff * 0.2;\n\n        // Limit speed\n        var maxSpeed = config.autoRotate ? Math.abs(config.autoRotate) : 5;\n        speed.yaw = Math.min(maxSpeed, Math.max(speed.yaw, -maxSpeed));\n        speed.pitch = Math.min(maxSpeed, Math.max(speed.pitch, -maxSpeed));\n        speed.hfov = Math.min(maxSpeed, Math.max(speed.hfov, -maxSpeed));\n    }\n\n    // Stop movement if opposite controls are pressed\n    if (keysDown[0] && keysDown[0]) {\n        speed.hfov = 0;\n    }\n    if ((keysDown[2] || keysDown[6]) && (keysDown[3] || keysDown[7])) {\n        speed.pitch = 0;\n    }\n    if ((keysDown[4] || keysDown[8]) && (keysDown[5] || keysDown[9])) {\n        speed.yaw = 0;\n    }\n}\n\n/**\n * Animates moves.\n * @param {string} axis - Axis to animate\n * @private\n */\nfunction animateMove(axis) {\n    var t = animatedMove[axis];\n    var normTime = Math.min(1, Math.max((Date.now() - t.startTime) / 1000 / (t.duration / 1000), 0));\n    var result = t.startPosition + config.animationTimingFunction(normTime) * (t.endPosition - t.startPosition);\n    if ((t.endPosition > t.startPosition && result >= t.endPosition) ||\n        (t.endPosition < t.startPosition && result <= t.endPosition) ||\n        t.endPosition === t.startPosition) {\n        result = t.endPosition;\n        speed[axis] = 0;\n        var callback = animatedMove[axis].callback,\n            callbackArgs = animatedMove[axis].callbackArgs;\n        delete animatedMove[axis];\n        if (typeof callback == 'function')\n            callback(callbackArgs);\n    }\n    config[axis] = result;\n}\n\n/**\n * @param {number} t - Normalized time in animation\n * @return {number} Position in animation\n * @private\n */\nfunction timingFunction(t) {\n    // easeInOutQuad from https://gist.github.com/gre/1650294\n    return t < 0.5 ? 2*t*t : -1+(4-2*t)*t;\n}\n\n/**\n * Event handler for document resizes. Updates viewer size and rerenders view.\n * @private\n */\nfunction onDocumentResize() {\n    // Resize panorama renderer (moved to onFullScreenChange)\n    //renderer.resize();\n    //animateInit();\n\n    // Kludge to deal with WebKit regression: https://bugs.webkit.org/show_bug.cgi?id=93525\n    onFullScreenChange();\n}\n\n/**\n * Initializes animation.\n * @private\n */\nfunction animateInit() {\n    if (animating) {\n        return;\n    }\n    animating = true;\n    animate();\n}\n\n/**\n * Animates view, using requestAnimationFrame to trigger rendering.\n * @private\n */\nfunction animate() {\n    render();\n    if (autoRotateStart)\n        clearTimeout(autoRotateStart);\n    if (isUserInteracting || orientation === true) {\n        requestAnimationFrame(animate);\n    } else if (keysDown[0] || keysDown[1] || keysDown[2] || keysDown[3] ||\n        keysDown[4] || keysDown[5] || keysDown[6] || keysDown[7] ||\n        keysDown[8] || keysDown[9] || config.autoRotate ||\n        animatedMove.pitch || animatedMove.yaw || animatedMove.hfov ||\n        Math.abs(speed.yaw) > 0.01 || Math.abs(speed.pitch) > 0.01 ||\n        Math.abs(speed.hfov) > 0.01) {\n\n        keyRepeat();\n        if (config.autoRotateInactivityDelay >= 0 && autoRotateSpeed &&\n            Date.now() - latestInteraction > config.autoRotateInactivityDelay &&\n            !config.autoRotate) {\n            config.autoRotate = autoRotateSpeed;\n            _this.lookAt(origPitch, undefined, origHfov, 3000);\n        }\n        requestAnimationFrame(animate);\n    } else if (renderer && (renderer.isLoading() || (config.dynamic === true && update))) {\n        requestAnimationFrame(animate);\n    } else {\n        animating = false;\n        prevTime = undefined;\n        var autoRotateStartTime = config.autoRotateInactivityDelay -\n            (Date.now() - latestInteraction);\n        if (autoRotateStartTime > 0) {\n            autoRotateStart = setTimeout(function() {\n                config.autoRotate = autoRotateSpeed;\n                _this.lookAt(origPitch, undefined, origHfov, 3000);\n                animateInit();\n            }, autoRotateStartTime);\n        } else if (config.autoRotateInactivityDelay >= 0 && autoRotateSpeed) {\n            config.autoRotate = autoRotateSpeed;\n            _this.lookAt(origPitch, undefined, origHfov, 3000);\n            animateInit();\n        }\n    }\n}\n\n/**\n * Renders panorama view.\n * @private\n */\nfunction render() {\n    var tmpyaw;\n\n    if (loaded) {\n        if (config.yaw > 180) {\n            config.yaw -= 360;\n        } else if (config.yaw < -180) {\n            config.yaw += 360;\n        }\n\n        // Keep a tmp value of yaw for autoRotate comparison later\n        tmpyaw = config.yaw;\n\n        // Ensure the yaw is within min and max allowed\n        var yawRange = config.maxYaw - config.minYaw,\n            minYaw = -180,\n            maxYaw = 180;\n        if (yawRange < 360) {\n            minYaw = config.minYaw + config.hfov / 2;\n            maxYaw = config.maxYaw - config.hfov / 2;\n            if (yawRange < config.hfov) {\n                // Lock yaw to average of min and max yaw when both can be seen at once\n                minYaw = maxYaw = (minYaw + maxYaw) / 2;\n            }\n        }\n        config.yaw = Math.max(minYaw, Math.min(maxYaw, config.yaw));\n\n        // Check if we autoRotate in a limited by min and max yaw\n        // If so reverse direction\n        if (config.autoRotate !== false && tmpyaw != config.yaw) {\n            config.autoRotate *= -1;\n        }\n\n        // Ensure the calculated pitch is within min and max allowed\n        var canvas = renderer.getCanvas();\n        var vfov = 2 * Math.atan(Math.tan(config.hfov / 180 * Math.PI * 0.5) /\n            (canvas.width / canvas.height)) / Math.PI * 180;\n        var minPitch = config.minPitch + vfov / 2,\n            maxPitch = config.maxPitch - vfov / 2;\n        var pitchRange = config.maxPitch - config.minPitch;\n        if (pitchRange < vfov) {\n            // Lock pitch to average of min and max pitch when both can be seen at once\n            minPitch = maxPitch = (minPitch + maxPitch) / 2;\n        }\n        if (isNaN(minPitch))\n            minPitch = -90;\n        if (isNaN(maxPitch))\n            maxPitch = 90;\n        config.pitch = Math.max(minPitch, Math.min(maxPitch, config.pitch));\n\n        renderer.render(config.pitch * Math.PI / 180, config.yaw * Math.PI / 180, config.hfov * Math.PI / 180, {roll: config.roll * Math.PI / 180});\n\n        renderHotSpots();\n\n        // Update compass\n        if (config.compass) {\n            compass.style.transform = 'rotate(' + (-config.yaw - config.northOffset) + 'deg)';\n            compass.style.webkitTransform = 'rotate(' + (-config.yaw - config.northOffset) + 'deg)';\n        }\n    }\n}\n\n/**\n * Creates a new quaternion.\n * @private\n * @constructor\n * @param {Number} w - W value\n * @param {Number} x - X value\n * @param {Number} y - Y value\n * @param {Number} z - Z value\n */\nfunction Quaternion(w, x, y, z) {\n    this.w = w;\n    this.x = x;\n    this.y = y;\n    this.z = z;\n}\n\n/**\n * Multiplies quaternions.\n * @private\n * @param {Quaternion} q - Quaternion to multiply\n * @returns {Quaternion} Result of multiplication\n */\nQuaternion.prototype.multiply = function(q) {\n    return new Quaternion(this.w*q.w - this.x*q.x - this.y*q.y - this.z*q.z,\n                          this.x*q.w + this.w*q.x + this.y*q.z - this.z*q.y,\n                          this.y*q.w + this.w*q.y + this.z*q.x - this.x*q.z,\n                          this.z*q.w + this.w*q.z + this.x*q.y - this.y*q.x);\n}\n\n/**\n * Converts quaternion to Euler angles.\n * @private\n * @returns {Number[]} [phi angle, theta angle, psi angle]\n */\nQuaternion.prototype.toEulerAngles = function() {\n    var phi = Math.atan2(2 * (this.w * this.x + this.y * this.z),\n                         1 - 2 * (this.x * this.x + this.y * this.y)),\n        theta = Math.asin(2 * (this.w * this.y - this.z * this.x)),\n        psi = Math.atan2(2 * (this.w * this.z + this.x * this.y),\n                         1 - 2 * (this.y * this.y + this.z * this.z));\n    return [phi, theta, psi];\n}\n\n/**\n * Converts device orientation API Tait-Bryan angles to a quaternion.\n * @private\n * @param {Number} alpha - Alpha angle (in degrees)\n * @param {Number} beta - Beta angle (in degrees)\n * @param {Number} gamma - Gamma angle (in degrees)\n * @returns {Quaternion} Orientation quaternion\n */\nfunction taitBryanToQuaternion(alpha, beta, gamma) {\n    var r = [beta ? beta * Math.PI / 180 / 2 : 0,\n             gamma ? gamma * Math.PI / 180 / 2 : 0,\n             alpha ? alpha * Math.PI / 180 / 2 : 0];\n    var c = [Math.cos(r[0]), Math.cos(r[1]), Math.cos(r[2])],\n        s = [Math.sin(r[0]), Math.sin(r[1]), Math.sin(r[2])];\n\n    return new Quaternion(c[0]*c[1]*c[2] - s[0]*s[1]*s[2],\n                          s[0]*c[1]*c[2] - c[0]*s[1]*s[2],\n                          c[0]*s[1]*c[2] + s[0]*c[1]*s[2],\n                          c[0]*c[1]*s[2] + s[0]*s[1]*c[2]);\n}\n\n/**\n * Computes current device orientation quaternion from device orientation API\n * Tait-Bryan angles.\n * @private\n * @param {Number} alpha - Alpha angle (in degrees)\n * @param {Number} beta - Beta angle (in degrees)\n * @param {Number} gamma - Gamma angle (in degrees)\n * @returns {Quaternion} Orientation quaternion\n */\nfunction computeQuaternion(alpha, beta, gamma) {\n    // Convert Tait-Bryan angles to quaternion\n    var quaternion = taitBryanToQuaternion(alpha, beta, gamma);\n    // Apply world transform\n    quaternion = quaternion.multiply(new Quaternion(Math.sqrt(0.5), -Math.sqrt(0.5), 0, 0));\n    // Apply screen transform\n    var angle = window.orientation ? -window.orientation * Math.PI / 180 / 2 : 0;\n    return quaternion.multiply(new Quaternion(Math.cos(angle), 0, -Math.sin(angle), 0));\n}\n\n/**\n * Event handler for device orientation API. Controls pointing.\n * @private\n * @param {DeviceOrientationEvent} event - Device orientation event.\n */\nfunction orientationListener(e) {\n    var q = computeQuaternion(e.alpha, e.beta, e.gamma).toEulerAngles();\n    if (typeof(orientation) == 'number' && orientation < 10) {\n        // This kludge is necessary because iOS sometimes provides a few stale\n        // device orientation events when the listener is removed and then\n        // readded. Thus, we skip the first 10 events to prevent this from\n        // causing problems.\n        orientation += 1;\n    } else if (orientation === 10) {\n        // Record starting yaw to prevent jumping\n        orientationYawOffset = q[2] / Math.PI * 180 + config.yaw;\n        orientation = true;\n        requestAnimationFrame(animate);\n    } else {\n        config.pitch = q[0] / Math.PI * 180;\n        config.roll = -q[1] / Math.PI * 180;\n        config.yaw = -q[2] / Math.PI * 180 + orientationYawOffset;\n    }\n}\n\n/**\n * Initializes renderer.\n * @private\n */\nfunction renderInit() {\n    try {\n        var params = {};\n        if (config.horizonPitch !== undefined)\n            params.horizonPitch = config.horizonPitch * Math.PI / 180;\n        if (config.horizonRoll !== undefined)\n            params.horizonRoll = config.horizonRoll * Math.PI / 180;\n        if (config.backgroundColor !== undefined)\n            params.backgroundColor = config.backgroundColor;\n        renderer.init(panoImage, config.type, config.dynamic, config.haov * Math.PI / 180, config.vaov * Math.PI / 180, config.vOffset * Math.PI / 180, renderInitCallback, params);\n        if (config.dynamic !== true) {\n            // Allow image to be garbage collected\n            panoImage = undefined;\n        }\n    } catch(event) {\n        // Panorama not loaded\n\n        // Display error if there is a bad texture\n        if (event.type == 'webgl error' || event.type == 'no webgl') {\n            anError();\n        } else if (event.type == 'webgl size error') {\n            anError(config.strings.textureSizeError.replace('%s', event.width).replace('%s', event.maxWidth));\n        } else {\n            anError(config.strings.unknownError);\n            throw event;\n        }\n    }\n}\n\n/**\n * Triggered when render initialization finishes. Handles fading between\n * scenes as well as showing the compass and hotspots and hiding the loading\n * display.\n * @private\n */\nfunction renderInitCallback() {\n    // Fade if specified\n    if (config.sceneFadeDuration && renderer.fadeImg !== undefined) {\n        renderer.fadeImg.style.opacity = 0;\n        // Remove image\n        var fadeImg = renderer.fadeImg;\n        delete renderer.fadeImg;\n        setTimeout(function() {\n            renderContainer.removeChild(fadeImg);\n            fireEvent('scenechangefadedone');\n        }, config.sceneFadeDuration);\n    }\n\n    // Show compass if applicable\n    if (config.compass) {\n        compass.style.display = 'inline';\n    } else {\n        compass.style.display = 'none';\n    }\n\n    // Show hotspots\n    createHotSpots();\n\n    // Hide loading display\n    infoDisplay.load.box.style.display = 'none';\n    if (preview !== undefined) {\n        renderContainer.removeChild(preview);\n        preview = undefined;\n    }\n    loaded = true;\n\n    fireEvent('load');\n\n    animateInit();\n}\n\n/**\n * Creates hot spot element for the current scene.\n * @private\n * @param {Object} hs - The configuration for the hotspot\n */\nfunction createHotSpot(hs) {\n    // Make sure hot spot pitch and yaw are numbers\n    hs.pitch = Number(hs.pitch) || 0;\n    hs.yaw = Number(hs.yaw) || 0;\n\n    var div = document.createElement('div');\n    div.className = 'pnlm-hotspot-base'\n    if (hs.cssClass)\n        div.className += ' ' + hs.cssClass;\n    else\n        div.className += ' pnlm-hotspot pnlm-sprite pnlm-' + escapeHTML(hs.type);\n\n    var span = document.createElement('span');\n    if (hs.text)\n        span.innerHTML = escapeHTML(hs.text);\n\n    var a;\n    if (hs.video) {\n        var video = document.createElement('video'),\n            p = hs.video;\n        if (config.basePath && !absoluteURL(p))\n            p = config.basePath + p;\n        video.src = encodeURI(p);\n        video.controls = true;\n        video.style.width = hs.width + 'px';\n        renderContainer.appendChild(div);\n        span.appendChild(video);\n    } else if (hs.image) {\n        var p = hs.image;\n        if (config.basePath && !absoluteURL(p))\n            p = config.basePath + p;\n        a = document.createElement('a');\n        a.href = encodeURI(hs.URL ? hs.URL : p);\n        a.target = '_blank';\n        span.appendChild(a);\n        var image = document.createElement('img');\n        image.src = encodeURI(p);\n        image.style.width = hs.width + 'px';\n        image.style.paddingTop = '5px';\n        renderContainer.appendChild(div);\n        a.appendChild(image);\n        span.style.maxWidth = 'initial';\n    } else if (hs.URL) {\n        a = document.createElement('a');\n        a.href = encodeURI(hs.URL);\n        a.target = '_blank';\n        renderContainer.appendChild(a);\n        div.style.cursor = 'pointer';\n        span.style.cursor = 'pointer';\n        a.appendChild(div);\n    } else {\n        if (hs.sceneId) {\n            div.onclick = div.ontouchend = function() {\n                if (!div.clicked) {\n                    div.clicked = true;\n                    loadScene(hs.sceneId, hs.targetPitch, hs.targetYaw, hs.targetHfov);\n                }\n                return false;\n            };\n            div.style.cursor = 'pointer';\n            span.style.cursor = 'pointer';\n        }\n        renderContainer.appendChild(div);\n    }\n\n    if (hs.createTooltipFunc) {\n        hs.createTooltipFunc(div, hs.createTooltipArgs);\n    } else if (hs.text || hs.video || hs.image) {\n        div.classList.add('pnlm-tooltip');\n        div.appendChild(span);\n        span.style.width = span.scrollWidth - 20 + 'px';\n        span.style.marginLeft = -(span.scrollWidth - div.offsetWidth) / 2 + 'px';\n        span.style.marginTop = -span.scrollHeight - 12 + 'px';\n    }\n    if (hs.clickHandlerFunc) {\n        div.addEventListener('click', function(e) {\n            hs.clickHandlerFunc(e, hs.clickHandlerArgs);\n        }, 'false');\n        div.style.cursor = 'pointer';\n        span.style.cursor = 'pointer';\n    }\n    hs.div = div;\n};\n\n/**\n * Creates hot spot elements for the current scene.\n * @private\n */\nfunction createHotSpots() {\n    if (hotspotsCreated) return;\n\n    if (!config.hotSpots) {\n        config.hotSpots = [];\n    } else {\n        // Sort by pitch so tooltip is never obscured by another hot spot\n        config.hotSpots = config.hotSpots.sort(function(a, b) {\n            return a.pitch < b.pitch;\n        });\n        config.hotSpots.forEach(createHotSpot);\n    }\n    hotspotsCreated = true;\n    renderHotSpots();\n}\n\n/**\n * Destroys currently create hot spot elements.\n * @private\n */\nfunction destroyHotSpots() {\n    var hs = config.hotSpots;\n    hotspotsCreated = false;\n    delete config.hotSpots;\n    if (hs) {\n        for (var i = 0; i < hs.length; i++) {\n            var current = hs[i].div;\n            while(current.parentNode != renderContainer) {\n                current = current.parentNode;\n            }\n            renderContainer.removeChild(current);\n        }\n        hs.length = 0;\n    }\n}\n\n/**\n * Renders hot spot, updating its position and visibility.\n * @private\n */\nfunction renderHotSpot(hs) {\n    var hsPitchSin = Math.sin(hs.pitch * Math.PI / 180),\n        hsPitchCos = Math.cos(hs.pitch * Math.PI / 180),\n        configPitchSin = Math.sin(config.pitch * Math.PI / 180),\n        configPitchCos = Math.cos(config.pitch * Math.PI / 180),\n        yawCos = Math.cos((-hs.yaw + config.yaw) * Math.PI / 180);\n    var z = hsPitchSin * configPitchSin + hsPitchCos * yawCos * configPitchCos;\n    if ((hs.yaw <= 90 && hs.yaw > -90 && z <= 0) ||\n      ((hs.yaw > 90 || hs.yaw <= -90) && z <= 0)) {\n        hs.div.style.visibility = 'hidden';\n    } else {\n        var yawSin = Math.sin((-hs.yaw + config.yaw) * Math.PI / 180),\n            hfovTan = Math.tan(config.hfov * Math.PI / 360);\n        hs.div.style.visibility = 'visible';\n        // Subpixel rendering doesn't work in Firefox\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=739176\n        var canvas = renderer.getCanvas(),\n            canvasWidth = canvas.clientWidth,\n            canvasHeight = canvas.clientHeight;\n        var coord = [-canvasWidth / hfovTan * yawSin * hsPitchCos / z / 2,\n            -canvasWidth / hfovTan * (hsPitchSin * configPitchCos -\n            hsPitchCos * yawCos * configPitchSin) / z / 2];\n        // Apply roll\n        var rollSin = Math.sin(config.roll * Math.PI / 180),\n            rollCos = Math.cos(config.roll * Math.PI / 180);\n        coord = [coord[0] * rollCos - coord[1] * rollSin,\n                 coord[0] * rollSin + coord[1] * rollCos];\n        // Apply transform\n        coord[0] += (canvasWidth - hs.div.offsetWidth) / 2;\n        coord[1] += (canvasHeight - hs.div.offsetHeight) / 2;\n        var transform = 'translate(' + coord[0] + 'px, ' + coord[1] +\n            'px) translateZ(9999px) rotate(' + config.roll + 'deg)';\n        hs.div.style.webkitTransform = transform;\n        hs.div.style.MozTransform = transform;\n        hs.div.style.transform = transform;\n    }\n}\n\n/**\n * Renders hot spots, updating their positions and visibility.\n * @private\n */\nfunction renderHotSpots() {\n    config.hotSpots.forEach(renderHotSpot);\n}\n\n/**\n * Merges a scene configuration into the current configuration.\n * @private\n * @param {string} sceneId - Identifier of scene configuration to merge in.\n */\nfunction mergeConfig(sceneId) {\n    config = {};\n    var k, s;\n    var photoSphereExcludes = ['haov', 'vaov', 'vOffset', 'northOffset', 'horizonPitch', 'horizonRoll'];\n    specifiedPhotoSphereExcludes = [];\n\n    // Merge default config\n    for (k in defaultConfig) {\n        if (defaultConfig.hasOwnProperty(k)) {\n            config[k] = defaultConfig[k];\n        }\n    }\n\n    // Merge default scene config\n    for (k in initialConfig.default) {\n        if (initialConfig.default.hasOwnProperty(k)) {\n            if (k == 'strings') {\n                for (s in initialConfig.default.strings) {\n                    if (initialConfig.default.strings.hasOwnProperty(s)) {\n                        config.strings[s] = escapeHTML(initialConfig.default.strings[s]);\n                    }\n                }\n            } else {\n                config[k] = initialConfig.default[k];\n                if (photoSphereExcludes.indexOf(k) >= 0) {\n                    specifiedPhotoSphereExcludes.push(k);\n                }\n            }\n        }\n    }\n\n    // Merge current scene config\n    if ((sceneId !== null) && (sceneId !== '') && (initialConfig.scenes) && (initialConfig.scenes[sceneId])) {\n        var scene = initialConfig.scenes[sceneId];\n        for (k in scene) {\n            if (scene.hasOwnProperty(k)) {\n                if (k == 'strings') {\n                    for (s in scene.strings) {\n                        if (scene.strings.hasOwnProperty(s)) {\n                            config.strings[s] = escapeHTML(scene.strings[s]);\n                        }\n                    }\n                } else {\n                    config[k] = scene[k];\n                    if (photoSphereExcludes.indexOf(k) >= 0) {\n                        specifiedPhotoSphereExcludes.push(k);\n                    }\n                }\n            }\n        }\n        config.scene = sceneId;\n    }\n\n    // Merge initial config\n    for (k in initialConfig) {\n        if (initialConfig.hasOwnProperty(k)) {\n            if (k == 'strings') {\n                for (s in initialConfig.strings) {\n                    if (initialConfig.strings.hasOwnProperty(s)) {\n                        config.strings[s] = escapeHTML(initialConfig.strings[s]);\n                    }\n                }\n            } else {\n                config[k] = initialConfig[k];\n                if (photoSphereExcludes.indexOf(k) >= 0) {\n                    specifiedPhotoSphereExcludes.push(k);\n                }\n            }\n        }\n    }\n}\n\n/**\n * Processes configuration options.\n * @param {boolean} [isPreview] - Whether or not the preview is being displayed\n * @private\n */\nfunction processOptions(isPreview) {\n    isPreview = isPreview ? isPreview : false;\n\n    // Process preview first so it always loads before the browser hits its\n    // maximum number of connections to a server as can happen with cubic\n    // panoramas\n    if (isPreview && 'preview' in config) {\n        var p = config.preview;\n        if (config.basePath && !absoluteURL(p))\n            p = config.basePath + p;\n        preview = document.createElement('div');\n        preview.className = 'pnlm-preview-img';\n        preview.style.backgroundImage = \"url('\" + encodeURI(p) + \"')\";\n        renderContainer.appendChild(preview);\n    }\n\n    // Handle different preview values\n    var title = config.title,\n        author = config.author;\n    if (isPreview) {\n        if ('previewTitle' in config)\n            config.title = config.previewTitle;\n        if ('previewAuthor' in config)\n            config.author = config.previewAuthor;\n    }\n\n    // Reset title / author display\n    if (!config.hasOwnProperty('title'))\n        infoDisplay.title.innerHTML = '';\n    if (!config.hasOwnProperty('author'))\n        infoDisplay.author.innerHTML = '';\n    if (!config.hasOwnProperty('title') && !config.hasOwnProperty('author'))\n        infoDisplay.container.style.display = 'none';\n\n    // Fill in load button label and loading box text\n    controls.load.innerHTML = '<p>' + config.strings.loadButtonLabel + '</p>';\n    infoDisplay.load.box.querySelector('.pnlm-loading-title').innerHTML = config.strings.loadingLabel;\n\n    // Process other options\n    for (var key in config) {\n      if (config.hasOwnProperty(key)) {\n        switch(key) {\n            case 'title':\n                infoDisplay.title.innerHTML = escapeHTML(config[key]);\n                infoDisplay.container.style.display = 'inline';\n                break;\n\n            case 'author':\n                infoDisplay.author.innerHTML = config.strings.bylineLabel.replace('%s', escapeHTML(config[key]));\n                infoDisplay.container.style.display = 'inline';\n                break;\n\n            case 'fallback':\n                infoDisplay.errorMsg.innerHTML = '<p>Your browser does not support WebGL.<br><a href=\"' + encodeURI(config[key]) + '\" target=\"_blank\">Click here to view this panorama in an alternative viewer.</a></p>';\n                break;\n\n            case 'hfov':\n                setHfov(Number(config[key]));\n                break;\n\n            case 'autoLoad':\n                if (config[key] === true && renderer === undefined) {\n                    // Show loading box\n                    infoDisplay.load.box.style.display = 'inline';\n                    // Hide load button\n                    controls.load.style.display = 'none';\n                    // Initialize\n                    init();\n                }\n                break;\n\n            case 'showZoomCtrl':\n                if (config[key] && config.showControls != false) {\n                    // Show zoom controls\n                    controls.zoom.style.display = 'block';\n                } else {\n                    // Hide zoom controls\n                    controls.zoom.style.display = 'none';\n                }\n                break;\n\n            case 'showFullscreenCtrl':\n                if (config[key] && config.showControls != false && ('fullscreen' in document || 'mozFullScreen' in document ||\n                    'webkitIsFullScreen' in document || 'msFullscreenElement' in document)) {\n\n                    // Show fullscreen control\n                    controls.fullscreen.style.display = 'block';\n                } else {\n                    // Hide fullscreen control\n                    controls.fullscreen.style.display = 'none';\n                }\n                break;\n\n            case 'hotSpotDebug':\n                if (config[key])\n                    hotSpotDebugIndicator.style.display = 'block';\n                else\n                    hotSpotDebugIndicator.style.display = 'none';\n                break;\n\n            case 'showControls':\n                if (!config[key]) {\n                    controls.orientation.style.display = 'none';\n                    controls.zoom.style.display = 'none';\n                    controls.fullscreen.style.display = 'none';\n                }\n                break;\n\n            case 'orientationOnByDefault':\n                if (config[key]) {\n                    if (orientationSupport === undefined)\n                        startOrientationIfSupported = true;\n                    else if (orientationSupport === true)\n                        startOrientation();\n                }\n                break;\n        }\n      }\n    }\n\n    if (isPreview) {\n        // Restore original values if changed for preview\n        if (title)\n            config.title = title;\n        else\n            delete config.title;\n        if (author)\n            config.author = author;\n        else\n            delete config.author;\n    }\n}\n\n/**\n * Toggles fullscreen mode.\n * @private\n */\nfunction toggleFullscreen() {\n    if (loaded && !error) {\n        if (!fullscreenActive) {\n            try {\n                if (container.requestFullscreen) {\n                    container.requestFullscreen();\n                } else if (container.mozRequestFullScreen) {\n                    container.mozRequestFullScreen();\n                } else if (container.msRequestFullscreen) {\n                    container.msRequestFullscreen();\n                } else {\n                    container.webkitRequestFullScreen();\n                }\n            } catch(event) {\n                // Fullscreen doesn't work\n            }\n        } else {\n            if (document.exitFullscreen) {\n                document.exitFullscreen();\n            } else if (document.mozCancelFullScreen) {\n                document.mozCancelFullScreen();\n            } else if (document.webkitCancelFullScreen) {\n                document.webkitCancelFullScreen();\n            } else if (document.msExitFullscreen) {\n                document.msExitFullscreen();\n            }\n        }\n    }\n}\n\n/**\n * Event handler for fullscreen changes.\n * @private\n */\nfunction onFullScreenChange() {\n    if (document.fullscreen || document.mozFullScreen || document.webkitIsFullScreen || document.msFullscreenElement) {\n        controls.fullscreen.classList.add('pnlm-fullscreen-toggle-button-active');\n        fullscreenActive = true;\n    } else {\n        controls.fullscreen.classList.remove('pnlm-fullscreen-toggle-button-active');\n        fullscreenActive = false;\n    }\n\n    // Resize renderer (deal with browser quirks and fixes #155)\n    renderer.resize();\n    setHfov(config.hfov);\n    animateInit();\n}\n\n/**\n * Increases panorama zoom. For use with zoom button.\n * @private\n */\nfunction zoomIn() {\n    if (loaded) {\n        setHfov(config.hfov - 5);\n        animateInit();\n    }\n}\n\n/**\n * Decreases panorama zoom. For use with zoom button.\n * @private\n */\nfunction zoomOut() {\n    if (loaded) {\n        setHfov(config.hfov + 5);\n        animateInit();\n    }\n}\n\n/**\n * Clamps horzontal field of view to viewer's limits.\n * @private\n * @param {number} hfov - Input horizontal field of view (in degrees)\n * @return {number} - Clamped horizontal field of view (in degrees)\n */\nfunction constrainHfov(hfov) {\n    // Keep field of view within bounds\n    var minHfov = config.minHfov;\n    if (config.type == 'multires' && renderer) {\n        minHfov = Math.min(minHfov, renderer.getCanvas().width / (config.multiRes.cubeResolution / 90 * 0.9));\n    }\n    if (minHfov > config.maxHfov) {\n        // Don't change view if bounds don't make sense\n        console.log('HFOV bounds do not make sense (minHfov > maxHfov).')\n        return config.hfov;\n    } if (hfov < minHfov) {\n        return minHfov;\n    } else if (hfov > config.maxHfov) {\n        return config.maxHfov;\n    } else {\n        return hfov;\n    }\n}\n\n/**\n * Sets viewer's horizontal field of view.\n * @private\n * @param {number} hfov - Desired horizontal field of view in degrees.\n */\nfunction setHfov(hfov) {\n    config.hfov = constrainHfov(hfov);\n}\n\n/**\n * Stops auto rotation and animated moves.\n * @private\n */\nfunction stopAnimation() {\n    animatedMove = {};\n    autoRotateSpeed = config.autoRotate ? config.autoRotate : autoRotateSpeed;\n    config.autoRotate = false;\n}\n\n/**\n * Loads panorama.\n * @private\n */\nfunction load() {\n    // Since WebGL error handling is very general, first we clear any error box\n    // since it is a new scene and the error from previous maybe because of lacking\n    // memory etc and not because of a lack of WebGL support etc\n    clearError();\n\n    controls.load.style.display = 'none';\n    infoDisplay.load.box.style.display = 'inline';\n    init();\n}\n\n/**\n * Loads scene.\n * @private\n * @param {string} sceneId - Identifier of scene configuration to merge in.\n * @param {number} targetPitch - Pitch viewer should be centered on once scene loads.\n * @param {number} targetYaw - Yaw viewer should be centered on once scene loads.\n * @param {number} targetHfov - HFOV viewer should use once scene loads.\n * @param {boolean} [fadeDone] - If `true`, fade setup is skipped.\n */\nfunction loadScene(sceneId, targetPitch, targetYaw, targetHfov, fadeDone) {\n    loaded = false;\n    animatedMove = {};\n\n    // Set up fade if specified\n    var fadeImg, workingPitch, workingYaw, workingHfov;\n    if (config.sceneFadeDuration && !fadeDone) {\n        var data = renderer.render(config.pitch * Math.PI / 180, config.yaw * Math.PI / 180, config.hfov * Math.PI / 180, {returnImage: true});\n        if (data !== undefined) {\n            fadeImg = new Image();\n            fadeImg.className = 'pnlm-fade-img';\n            fadeImg.style.transition = 'opacity ' + (config.sceneFadeDuration / 1000) + 's';\n            fadeImg.style.width = '100%';\n            fadeImg.style.height = '100%';\n            fadeImg.onload = function() {\n                loadScene(sceneId, targetPitch, targetYaw, targetHfov, true);\n            };\n            fadeImg.src = data;\n            renderContainer.appendChild(fadeImg);\n            renderer.fadeImg = fadeImg;\n            return;\n        }\n    }\n\n    // Set new pointing\n    if (targetPitch === 'same') {\n        workingPitch = config.pitch;\n    } else {\n        workingPitch = targetPitch;\n    }\n    if (targetYaw === 'same') {\n        workingYaw = config.yaw;\n    } else if (targetYaw === 'sameAzimuth') {\n        workingYaw = config.yaw + (config.northOffset || 0) - (initialConfig.scenes[sceneId].northOffset || 0);\n    } else {\n        workingYaw = targetYaw;\n    }\n    if (targetHfov === 'same') {\n        workingHfov = config.hfov;\n    } else {\n        workingHfov = targetHfov;\n    }\n\n    // Destroy hot spots from previous scene\n    destroyHotSpots();\n\n    // Create the new config for the scene\n    mergeConfig(sceneId);\n\n    // Stop motion\n    speed.yaw = speed.pitch = speed.hfov = 0;\n\n    // Reload scene\n    processOptions();\n    if (workingPitch !== undefined) {\n        config.pitch = workingPitch;\n    }\n    if (workingYaw !== undefined) {\n        config.yaw = workingYaw;\n    }\n    if (workingHfov !== undefined) {\n        config.hfov = workingHfov;\n    }\n    fireEvent('scenechange', sceneId);\n    load();\n}\n\n/**\n * Stop using device orientation.\n * @private\n */\nfunction stopOrientation() {\n    window.removeEventListener('deviceorientation', orientationListener);\n    controls.orientation.classList.remove('pnlm-orientation-button-active');\n    orientation = false;\n}\n\n/**\n * Start using device orientation.\n * @private\n */\nfunction startOrientation() {\n    orientation = 1;\n    window.addEventListener('deviceorientation', orientationListener);\n    controls.orientation.classList.add('pnlm-orientation-button-active');\n}\n\n/**\n * Escapes HTML string (to mitigate possible DOM XSS attacks).\n * @private\n * @param {string} s - String to escape\n * @returns {string} Escaped string\n */\nfunction escapeHTML(s) {\n    if (!initialConfig.escapeHTML)\n        return String(s).split('\\n').join('<br>');\n    return String(s).split(/&/g).join('&amp;')\n        .split('\"').join('&quot;')\n        .split(\"'\").join('&#39;')\n        .split('<').join('&lt;')\n        .split('>').join('&gt;')\n        .split('/').join('&#x2f;')\n        .split('\\n').join('<br>');  // Allow line breaks\n}\n\n/**\n * Checks whether or not a panorama is loaded.\n * @memberof Viewer\n * @instance\n * @returns {boolean} `true` if a panorama is loaded, else `false`\n */\nthis.isLoaded = function() {\n    return loaded;\n};\n\n/**\n * Returns the pitch of the center of the view.\n * @memberof Viewer\n * @instance\n * @returns {number} Pitch in degrees\n */\nthis.getPitch = function() {\n    return config.pitch;\n};\n\n/**\n * Sets the pitch of the center of the view.\n * @memberof Viewer\n * @instance\n * @param {number} pitch - Pitch in degrees\n * @param {boolean|number} [animated=1000] - Animation duration in milliseconds or false for no animation\n * @param {function} [callback] - Function to call when animation finishes\n * @param {object} [callbackArgs] - Arguments to pass to callback function\n * @returns {Viewer} `this`\n */\nthis.setPitch = function(pitch, animated, callback, callbackArgs) {\n    animated = animated == undefined ? 1000: Number(animated);\n    if (animated) {\n        animatedMove.pitch = {\n            'startTime': Date.now(),\n            'startPosition': config.pitch,\n            'endPosition': pitch,\n            'duration': animated,\n            'callback': callback,\n            'callbackArgs': callbackArgs\n        }\n    } else {\n        config.pitch = pitch;\n    }\n    animateInit();\n    return this;\n};\n\n/**\n * Returns the minimum and maximum allowed pitches (in degrees).\n * @memberof Viewer\n * @instance\n * @returns {number[]} [minimum pitch, maximum pitch]\n */\nthis.getPitchBounds = function() {\n    return [config.minPitch, config.maxPitch];\n};\n\n/**\n * Set the minimum and maximum allowed pitches (in degrees).\n * @memberof Viewer\n * @instance\n * @param {number[]} bounds - [minimum pitch, maximum pitch]\n * @returns {Viewer} `this`\n */\nthis.setPitchBounds = function(bounds) {\n    config.minPitch = Math.max(-90, Math.min(bounds[0], 90));\n    config.maxPitch = Math.max(-90, Math.min(bounds[1], 90));\n    return this;\n};\n\n/**\n * Returns the yaw of the center of the view.\n * @memberof Viewer\n * @instance\n * @returns {number} Yaw in degrees\n */\nthis.getYaw = function() {\n    return config.yaw;\n};\n\n/**\n * Sets the yaw of the center of the view.\n * @memberof Viewer\n * @instance\n * @param {number} yaw - Yaw in degrees [-180, 180]\n * @param {boolean|number} [animated=1000] - Animation duration in milliseconds or false for no animation\n * @param {function} [callback] - Function to call when animation finishes\n * @param {object} [callbackArgs] - Arguments to pass to callback function\n * @returns {Viewer} `this`\n */\nthis.setYaw = function(yaw, animated, callback, callbackArgs) {\n    animated = animated == undefined ? 1000: Number(animated);\n    yaw = ((yaw + 180) % 360) - 180 // Keep in bounds\n    if (animated) {\n        // Animate in shortest direction\n        if (config.yaw - yaw > 180)\n            yaw += 360\n        else if (yaw - config.yaw > 180)\n            yaw -= 360\n\n        animatedMove.yaw = {\n            'startTime': Date.now(),\n            'startPosition': config.yaw,\n            'endPosition': yaw,\n            'duration': animated,\n            'callback': callback,\n            'callbackArgs': callbackArgs\n        }\n    } else {\n        config.yaw = yaw;\n    }\n    animateInit();\n    return this;\n};\n\n/**\n * Returns the minimum and maximum allowed pitches (in degrees).\n * @memberof Viewer\n * @instance\n * @returns {number[]} [yaw pitch, maximum yaw]\n */\nthis.getYawBounds = function() {\n    return [config.minYaw, config.maxYaw];\n};\n\n/**\n * Set the minimum and maximum allowed yaws (in degrees [-180, 180]).\n * @memberof Viewer\n * @instance\n * @param {number[]} bounds - [minimum yaw, maximum yaw]\n * @returns {Viewer} `this`\n */\nthis.setYawBounds = function(bounds) {\n    config.minYaw = Math.max(-180, Math.min(bounds[0], 180));\n    config.maxYaw = Math.max(-180, Math.min(bounds[1], 180));\n    return this;\n};\n\n/**\n * Returns the horizontal field of view.\n * @memberof Viewer\n * @instance\n * @returns {number} Horizontal field of view in degrees\n */\nthis.getHfov = function() {\n    return config.hfov;\n};\n\n/**\n * Sets the horizontal field of view.\n * @memberof Viewer\n * @instance\n * @param {number} hfov - Horizontal field of view in degrees\n * @param {boolean|number} [animated=1000] - Animation duration in milliseconds or false for no animation\n * @param {function} [callback] - Function to call when animation finishes\n * @param {object} [callbackArgs] - Arguments to pass to callback function\n * @returns {Viewer} `this`\n */\nthis.setHfov = function(hfov, animated, callback, callbackArgs) {\n    animated = animated == undefined ? 1000: Number(animated);\n    if (animated) {\n        animatedMove.hfov = {\n            'startTime': Date.now(),\n            'startPosition': config.hfov,\n            'endPosition': constrainHfov(hfov),\n            'duration': animated,\n            'callback': callback,\n            'callbackArgs': callbackArgs\n        }\n    } else {\n        setHfov(hfov);\n    }\n    animateInit();\n    return this;\n};\n\n/**\n * Returns the minimum and maximum allowed horizontal fields of view\n * (in degrees).\n * @memberof Viewer\n * @instance\n * @returns {number[]} [minimum hfov, maximum hfov]\n */\nthis.getHfovBounds = function() {\n    return [config.minHfov, config.maxHfov];\n};\n\n/**\n * Set the minimum and maximum allowed horizontal fields of view (in degrees).\n * @memberof Viewer\n * @instance\n * @param {number[]} bounds - [minimum hfov, maximum hfov]\n * @returns {Viewer} `this`\n */\nthis.setHfovBounds = function(bounds) {\n    config.minHfov = Math.max(0, bounds[0]);\n    config.maxHfov = Math.max(0, bounds[1]);\n    return this;\n};\n\n/**\n * Set a new view. Any parameters not specified remain the same.\n * @memberof Viewer\n * @instance\n * @param {number} [pitch] - Target pitch\n * @param {number} [yaw] - Target yaw\n * @param {number} [hfov] - Target hfov\n * @param {boolean|number} [animated=1000] - Animation duration in milliseconds or false for no animation\n * @param {function} [callback] - Function to call when animation finishes\n * @param {object} [callbackArgs] - Arguments to pass to callback function\n * @returns {Viewer} `this`\n */\nthis.lookAt = function(pitch, yaw, hfov, animated, callback, callbackArgs) {\n    animated = animated == undefined ? 1000: Number(animated);\n    if (pitch !== undefined) {\n        this.setPitch(pitch, animated, callback, callbackArgs);\n        callback = undefined;\n    }\n    if (yaw !== undefined) {\n        this.setYaw(yaw, animated, callback, callbackArgs);\n        callback = undefined;\n    }\n    if (hfov !== undefined)\n        this.setHfov(hfov, animated, callback, callbackArgs);\n    return this;\n}\n\n/**\n * Returns the panorama's north offset.\n * @memberof Viewer\n * @instance\n * @returns {number} North offset in degrees\n */\nthis.getNorthOffset = function() {\n    return config.northOffset;\n};\n\n/**\n * Sets the panorama's north offset.\n * @memberof Viewer\n * @instance\n * @param {number} heading - North offset in degrees\n * @returns {Viewer} `this`\n */\nthis.setNorthOffset = function(heading) {\n    config.northOffset = Math.min(360, Math.max(0, heading));\n    animateInit();\n    return this;\n};\n\n/**\n * Returns the panorama's horizon roll.\n * @memberof Viewer\n * @instance\n * @returns {number} Horizon roll in degrees\n */\nthis.getHorizonRoll = function() {\n    return config.horizonRoll;\n};\n\n/**\n * Sets the panorama's horizon roll.\n * @memberof Viewer\n * @instance\n * @param {number} roll - Horizon roll in degrees [-90, 90]\n * @returns {Viewer} `this`\n */\nthis.setHorizonRoll = function(roll) {\n    config.horizonRoll = Math.min(90, Math.max(-90, roll));\n    renderer.setPose(config.horizonPitch * Math.PI / 180, config.horizonRoll * Math.PI / 180);\n    animateInit();\n    return this;\n};\n\n/**\n * Returns the panorama's horizon pitch.\n * @memberof Viewer\n * @instance\n * @returns {number} Horizon pitch in degrees\n */\nthis.getHorizonPitch = function() {\n    return config.horizonPitch;\n};\n\n/**\n * Sets the panorama's horizon pitch.\n * @memberof Viewer\n * @instance\n * @param {number} pitch - Horizon pitch in degrees [-90, 90]\n * @returns {Viewer} `this`\n */\nthis.setHorizonPitch = function(pitch) {\n    config.horizonPitch = Math.min(90, Math.max(-90, pitch));\n    renderer.setPose(config.horizonPitch * Math.PI / 180, config.horizonRoll * Math.PI / 180);\n    animateInit();\n    return this;\n};\n\n/**\n * Start auto rotation.\n * @memberof Viewer\n * @instance\n * @param {number} [speed] - Auto rotation speed / direction. If not specified, previous value is used.\n * @returns {Viewer} `this`\n */\nthis.startAutoRotate = function(speed) {\n    speed = speed || autoRotateSpeed || 1;\n    config.autoRotate = speed;\n    _this.lookAt(origPitch, undefined, origHfov, 3000);\n    animateInit();\n    return this;\n};\n\n/**\n * Stop auto rotation.\n * @memberof Viewer\n * @instance\n * @returns {Viewer} `this`\n */\nthis.stopAutoRotate = function() {\n    autoRotateSpeed = config.autoRotate ? config.autoRotate : autoRotateSpeed;\n    config.autoRotate = false;\n    config.autoRotateInactivityDelay = -1;\n    return this;\n};\n\n/**\n * Returns the panorama renderer.\n * @memberof Viewer\n * @instance\n * @returns {Renderer}\n */\nthis.getRenderer = function() {\n    return renderer;\n};\n\n/**\n * Sets update flag for dynamic content.\n * @memberof Viewer\n * @instance\n * @param {boolean} bool - Whether or not viewer should update even when still\n * @returns {Viewer} `this`\n */\nthis.setUpdate = function(bool) {\n    update = bool === true;\n    if (renderer === undefined)\n        onImageLoad();\n    else\n        animateInit();\n    return this;\n}\n\n/**\n * Calculate panorama pitch and yaw from location of mouse event.\n * @memberof Viewer\n * @instance\n * @param {MouseEvent} event - Document mouse down event.\n * @returns {number[]} [pitch, yaw]\n */\nthis.mouseEventToCoords = function(event) {\n    return mouseEventToCoords(event);\n}\n\n/**\n * Change scene being viewed.\n * @memberof Viewer\n * @instance\n * @param {string} sceneId - Identifier of scene to switch to.\n * @param {number} [pitch] - Pitch to use with new scene\n * @param {number} [yaw] - Yaw to use with new scene\n * @param {number} [hfov] - HFOV to use with new scene\n * @returns {Viewer} `this`\n */\nthis.loadScene = function(sceneId, pitch, yaw, hfov) {\n    if (loaded)\n        loadScene(sceneId, pitch, yaw, hfov);\n    return this;\n}\n\n/**\n * Get ID of current scene.\n * @memberof Viewer\n * @instance\n * @returns {string} ID of current scene\n */\nthis.getScene = function() {\n    return config.scene;\n}\n\n/**\n * Add a new scene.\n * @memberof Viewer\n * @instance\n * @param {string} sceneId - The ID of the new scene\n * @param {string} config - The configuration of the new scene\n * @returns {Viewer} `this`\n */\nthis.addScene = function(sceneId, config) {\n    initialConfig.scenes[sceneId] = config;\n    return this;\n};\n\n/**\n * Remove a scene.\n * @memberof Viewer\n * @instance\n * @param {string} sceneId - The ID of the scene\n * @returns {boolean} False if the scene is the current scene or if the scene doesn't exists, else true\n */\nthis.removeScene = function(sceneId) {\n    if (config.scene === sceneId || !initialConfig.scenes.hasOwnProperty(sceneId))\n        return false;\n    delete initialConfig.scenes[sceneId];\n    return true;\n};\n\n/**\n * Toggle fullscreen.\n * @memberof Viewer\n * @instance\n * @returns {Viewer} `this`\n */\nthis.toggleFullscreen = function() {\n    toggleFullscreen();\n    return this;\n}\n\n/**\n * Get configuration of current scene.\n * @memberof Viewer\n * @instance\n * @returns {Object} Configuration of current scene\n */\nthis.getConfig = function() {\n    return config;\n}\n\n/**\n * Add a new hot spot.\n * @memberof Viewer\n * @instance\n * @param {Object} hs - The configuration for the hot spot\n * @param {string} [sceneId] - Adds hot spot to specified scene if provided, else to current scene\n * @returns {Viewer} `this`\n * @throws Throws an error if the scene ID is provided but invalid\n */\nthis.addHotSpot = function(hs, sceneId) {\n    if (sceneId === undefined && config.scene === undefined) {\n        // Not a tour\n        config.hotSpots.push(hs);\n    } else {\n        // Tour\n        var id = sceneId !== undefined ? sceneId : config.scene;\n        if (initialConfig.scenes.hasOwnProperty(id)) {\n            if (!initialConfig.scenes[id].hasOwnProperty('hotSpots')) {\n                initialConfig.scenes[id].hotSpots = []; // Create hot spots array if needed\n                if (id == config.scene)\n                    config.hotSpots = initialConfig.scenes[id].hotSpots;    // Link to current config\n            }\n            initialConfig.scenes[id].hotSpots.push(hs); // Add hot spot to config\n        } else {\n            throw 'Invalid scene ID!'\n        }\n    }\n    if (sceneId === undefined || config.scene == sceneId) {\n        // Add to current scene\n        createHotSpot(hs);\n        if (loaded)\n            renderHotSpot(hs);\n    }\n    return this;\n}\n\n/**\n * Remove a hot spot.\n * @memberof Viewer\n * @instance\n * @param {string} hotSpotId - The ID of the hot spot\n * @returns {boolean} True if deletion is successful, else false\n */\nthis.removeHotSpot = function(hotSpotId) {\n    if (!config.hotSpots)\n        return false;\n    for (var i = 0; i < config.hotSpots.length; i++) {\n        if (config.hotSpots[i].hasOwnProperty('id') &&\n            config.hotSpots[i].id === hotSpotId) {\n            // Delete hot spot DOM elements\n            var current = config.hotSpots[i].div;\n            while (current.parentNode != renderContainer)\n                current = current.parentNode;\n            renderContainer.removeChild(current);\n            delete config.hotSpots[i].div;\n            // Remove hot spot from configuration\n            config.hotSpots.splice(i, 1);\n            return true;\n        }\n    }\n    return false;\n}\n\n/**\n * This method should be called if the viewer's container is resized.\n * @memberof Viewer\n * @instance\n */\nthis.resize = function() {\n    onDocumentResize();\n}\n\n/**\n * Check if a panorama is loaded.\n * @memberof Viewer\n * @instance\n * @returns {boolean} True if a panorama is loaded, else false\n */\nthis.isLoaded = function() {\n    return loaded;\n}\n\n/**\n * Check if device orientation control is supported.\n * @memberof Viewer\n * @instance\n * @returns {boolean} True if supported, else false\n */\nthis.isOrientationSupported = function() {\n    return orientationSupport || false;\n}\n\n/**\n * Stop using device orientation.\n * @memberof Viewer\n * @instance\n */\nthis.stopOrientation = function() {\n    stopOrientation();\n}\n\n/**\n * Start using device orientation (does nothing if not supported).\n * @memberof Viewer\n * @instance\n */\nthis.startOrientation = function() {\n    if (orientationSupport)\n        startOrientation();\n}\n\n/**\n * Subscribe listener to specified event.\n * @memberof Viewer\n * @instance\n * @param {string} type - Type of event to subscribe to.\n * @param {Function} listener - Listener function to subscribe to event.\n * @returns {Viewer} `this`\n */\nthis.on = function(type, listener) {\n    externalEventListeners[type] = externalEventListeners[type] || [];\n    externalEventListeners[type].push(listener);\n    return this;\n}\n\n/**\n * Remove an event listener (or listeners).\n * @memberof Viewer\n * @param {string} [type] - Type of event to remove listeners from. If not specified, all listeners are removed.\n * @param {Function} [listener] - Listener function to remove. If not specified, all listeners of specified type are removed.\n * @returns {Viewer} `this`\n */\nthis.off = function(type, listener) {\n    if (!type) {\n        // Remove all listeners if type isn't specified\n        externalEventListeners = {};\n        return this;\n    }\n    if (listener) {\n        var i = externalEventListeners[type].indexOf(listener);\n        if (i >= 0) {\n            // Remove listener if found\n            externalEventListeners[type].splice(i, 1);\n        }\n        if (externalEventListeners[type].length == 0) {\n            // Remove category if empty\n            delete externalEventListeners[type];\n        }\n    } else {\n        // Remove category of listeners if listener isn't specified\n        delete externalEventListeners[type];\n    }\n    return this;\n}\n\n/**\n * Fire listeners attached to specified event.\n * @private\n * @param {string} [type] - Type of event to fire listeners for.\n */\nfunction fireEvent(type) {\n    if (type in externalEventListeners) {\n        // Reverse iteration is useful, if event listener is removed inside its definition\n        for (var i = externalEventListeners[type].length; i > 0; i--) {\n            externalEventListeners[type][externalEventListeners[type].length - i].apply(null, [].slice.call(arguments, 1));\n        }\n    }\n}\n\n/**\n * Destructor.\n * @instance\n * @memberof Viewer\n */\nthis.destroy = function() {\n    if (renderer)\n        renderer.destroy()\n    if (listenersAdded) {\n        dragFix.removeEventListener('mousedown', onDocumentMouseDown, false);\n        dragFix.removeEventListener('dblclick', onDocumentDoubleClick, false);\n        document.removeEventListener('mousemove', onDocumentMouseMove, false);\n        document.removeEventListener('mouseup', onDocumentMouseUp, false);\n        container.removeEventListener('mousewheel', onDocumentMouseWheel, false);\n        container.removeEventListener('DOMMouseScroll', onDocumentMouseWheel, false);\n        container.removeEventListener('mozfullscreenchange', onFullScreenChange, false);\n        container.removeEventListener('webkitfullscreenchange', onFullScreenChange, false);\n        container.removeEventListener('msfullscreenchange', onFullScreenChange, false);\n        container.removeEventListener('fullscreenchange', onFullScreenChange, false);\n        window.removeEventListener('resize', onDocumentResize, false);\n        window.removeEventListener('orientationchange', onDocumentResize, false);\n        container.removeEventListener('keydown', onDocumentKeyPress, false);\n        container.removeEventListener('keyup', onDocumentKeyUp, false);\n        container.removeEventListener('blur', clearKeys, false);\n        document.removeEventListener('mouseleave', onDocumentMouseUp, false);\n        dragFix.removeEventListener('touchstart', onDocumentTouchStart, false);\n        dragFix.removeEventListener('touchmove', onDocumentTouchMove, false);\n        dragFix.removeEventListener('touchend', onDocumentTouchEnd, false);\n        dragFix.removeEventListener('pointerdown', onDocumentPointerDown, false);\n        dragFix.removeEventListener('pointermove', onDocumentPointerMove, false);\n        dragFix.removeEventListener('pointerup', onDocumentPointerUp, false);\n        dragFix.removeEventListener('pointerleave', onDocumentPointerUp, false);\n    }\n    container.innerHTML = '';\n    container.classList.remove('pnlm-container');\n    uiContainer.classList.remove('pnlm-grab');\n    uiContainer.classList.remove('pnlm-grabbing');\n}\n\n}\n\nreturn {\n    viewer: function(container, config) {\n        return new Viewer(container, config);\n    }\n};\n\n})(window, document);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/pannellum/build/pannellum.js\n// module id = 10\n// module chunks = 0","export const generateId = (): string => {\n\treturn  (new Date()).valueOf().toString();\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/TourRenderer/helpers.ts","export default class Defer<T> {\n\tresolve: (T) => void;\n\treject: (any) => void;\n\tpromise: Promise<T>;\n\n\tconstructor() {\n\t\tconst promise = new Promise((resolve, reject) => {\n\t\t\tthis.resolve = resolve;\n\t\t\tthis.reject = reject;\n\t\t});\n\n\t\tthis.promise = <Promise<T>>promise;    \n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/TourRenderer/models/Defer.ts","import linkState from 'linkstate';\nimport anchorme from 'anchorme';\nconst createDOMPurify = require('dompurify');\nimport { generateId } from '../helpers';\nimport { h, render, Component } from 'preact';\n\nconst DOMPurify = createDOMPurify();\n\nexport default class InfoElement extends Component<object, object> {\n\tpublic static EVENTS = {\n\t\tUPDATE_INFO_ELEMENT: 'UPDATE_INFO_ELEMENT',\n\t\tTOGGLE_INFO_ELEMENT: 'TOGGLE_INFO_ELEMENT',\n\t\tDELETE_INFO_ELEMENT: 'DELETE_INFO_ELEMENT'\n\t};\n\n\tpublic state: {isOpen: boolean, description: string, title: string, _description: string, _title: string};\n\tpublic props: {\n\t\tid: string,\n\t\tisEdit?: boolean,\n\t\ttitle?: string,\n\t\tdescription?: string,\n\t\tclassPrefix: string\n\t};\n\tpublic dom: Element;\n\n\tconstructor(props) {\n\t\tsuper();\n\n\t\tprops.classPrefix = props.classPrefix ? `${props.classPrefix}-info-element` : 'info-element';\n\n\t\tthis.state = {\n\t\t\tisOpen: false,\n\t\t\ttitle: props.title,\n\t\t\tdescription: props.description,\n\t\t\t_title: props.title,\n\t\t\t_description: props.description\n\t\t};\n\t}\n\n\tpublic render(props, state) {\n\t\tconst description = props.isEdit && state.isOpen ? state._description : this.addAnyLink(state._description);\n\n\t\tlet headerClass = `${props.classPrefix}-header ` + (state.isOpen ? '' : `${props.classPrefix}-clickable`);\n\t\theaderClass += state.isOpen && props.isEdit ? `${props.classPrefix}-editable` : '';\n\n\t\tconst closeClass = `${props.classPrefix}-close ${props.classPrefix}-clickable`;\n\n\t\tlet bodyClass = `${props.classPrefix}-body `;\n\t\tbodyClass += state.isOpen && props.isEdit ? `${props.classPrefix}-editable` : '';\n\n\t\treturn (\n\t\t\t<div ref={(dom) => { this.dom = dom; }} class={`${props.classPrefix}`} id={props.id}>\n\t\t\t\t{state.isOpen && <button class={closeClass} onClick={this._onClose.bind(this)}>x</button>}\n\t\t\t\t<h4 contentEditable={props.isEdit}\n\t\t\t\t\tclass={headerClass}\n\t\t\t\t\tonInput={linkState(this, '_title', 'target.textContent')}\n\t\t\t\t\tonClick={(e) => {!state.isOpen && this._toggleView()}}>\n\n\t\t\t\t\t{state._title}\n\t\t\t\t</h4>\n\t\t\t\t{state.isOpen &&\n\t\t\t\t\t<p contentEditable={props.isEdit} class={bodyClass}\n\t\t\t\t\tonInput={linkState(this, '_description', 'target.textContent')}\n\t\t\t\t\tdangerouslySetInnerHTML={!props.isEdit && {__html: this.sanitize(description)}}>\n\t\t\t\t\t\t{props.isEdit && description}\n\t\t\t\t\t</p>\n\t\t\t\t}\n\n\t\t\t\t{state.isOpen && props.isEdit &&\n\t\t\t\t\t<div class={`${props.classPrefix}-footer `}>\n\t\t\t\t\t\t<button onClick={this._updateContent.bind(this)}><i class='fa fa-disk'></i>Save</button>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t<button onClick={this._onDelete.bind(this)}>\n\t\t\t\t\t\t\t<i class='fa fa-trash'></i>Delete\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tpublic sanitize(text: string) {\n\t\treturn DOMPurify.sanitize(text, {\n\t\t\tALLOWED_ATTR: ['href'],\n\t\t\tALLOWED_TAGS: ['a']\n\t\t});\n\t}\n\n\tpublic addAnyLink(text: string) {\n\t\treturn anchorme(text);\n\t}\n\n\tprivate _updateContent(e) {\n\t\tthis.setState({\n\t\t\ttitle: this.state._title,\n\t\t\tdescription: this.state._description\n\t\t});\n\t\tthis._toggleView(false);\n\t\tthis._dispatchEvent(InfoElement.EVENTS.UPDATE_INFO_ELEMENT);\n\t}\n\n\tprivate _toggleView(show?: boolean) {\n\t\tlet isOpen: boolean;\n\n\t\tif (typeof show !== 'boolean') {\n\t\t\tisOpen = !this.state.isOpen;\n\t\t} else {\n\t\t\tisOpen = show;\n\t\t}\n\n\t\tthis.setState({\n\t\t\tisOpen\n\t\t});\n\n\t\tthis._dispatchEvent(InfoElement.EVENTS.TOGGLE_INFO_ELEMENT);\n\t}\n\n\tprivate _onClose(ev) {\n\t\tthis.setState({\n\t\t\t_description: this.state.description,\n\t\t\t_title: this.state.title\n\t\t});\n\t\tthis._toggleView(false);\n\t}\n\n\tprivate _onDelete(evt) {\n\t\tthis._dispatchEvent(InfoElement.EVENTS.DELETE_INFO_ELEMENT);\n\t}\n\n\tprivate _dispatchEvent(eventName, info: any = this._getSimpleState()) {\n\t\tconst event = new CustomEvent(eventName, { bubbles: true, detail: info});\n\t\tthis.dom.dispatchEvent(event);\n\t}\n\n\tprivate _getSimpleState() {\n\t\treturn {\n\t\t\ttitle: this.state.title,\n\t\t\tdescription: this.state.description,\n\t\t\tid: this.props.id\n\t\t};\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/TourRenderer/models/InfoElement.tsx","function dlv(obj, key, def, p) {\n\tp = 0;\n\tkey = key.split ? key.split('.') : key;\n\twhile (obj && p<key.length) { obj = obj[key[p++]]; }\n\treturn obj===undefined ? def : obj;\n}\n\n/** Create an Event handler function that sets a given state property.\n *\t@param {Component} component\tThe component whose state should be updated\n *\t@param {string} key\t\t\t\tA dot-notated key path to update in the component's state\n *\t@param {string} eventPath\t\tA dot-notated key path to the value that should be retrieved from the Event or component\n *\t@returns {function} linkedStateHandler\n */\nfunction linkState(component, key, eventPath) {\n\tvar path = key.split('.'),\n\t\tcache = component.__lsc || (component.__lsc = {});\n\n\treturn cache[key+eventPath] || (cache[key+eventPath] = function(e) {\n\t\tvar t = e && e.target || this,\n\t\t\tstate = {},\n\t\t\tobj = state,\n\t\t\tv = typeof eventPath==='string' ? dlv(e, eventPath) : t.nodeName ? (t.type.match(/^che|rad/) ? t.checked : t.value) : e,\n\t\t\ti = 0;\n\t\tfor ( ; i<path.length-1; i++) {\n\t\t\tobj = obj[path[i]] || (obj[path[i]] = !i && component.state[path[i]] || {});\n\t\t}\n\t\tobj[path[i]] = v;\n\t\tcomponent.setState(state);\n\t});\n}\n\nexport default linkState;\n//# sourceMappingURL=linkstate.es.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/linkstate/dist/linkstate.es.js\n// module id = 14\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nvar email_1 = require(\"./tests/email\");\nvar ip_1 = require(\"./tests/ip\");\nvar url_1 = require(\"./tests/url\");\nvar transform_1 = require(\"./transform/transform\");\nvar hasprotocol_1 = require(\"./tests/hasprotocol\");\nvar anchorme = function (str, options) {\n    options = util_1.defaultOptions(options);\n    var result = transform_1.default(str, options);\n    return result;\n};\n// exposing few functions for extra uses\nanchorme.validate = {\n    ip: ip_1.default,\n    url: function (input) {\n        // simple wrapper that does what \"identify.ts\" does initially\n        // remove the protocal\n        var protocol = hasprotocol_1.default(input) || \"\";\n        input = input.substr(protocol.length);\n        input = encodeURI(input);\n        return url_1.default(input);\n    },\n    email: email_1.default\n};\nexports.default = anchorme;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/anchorme/dist-node/index.js\n// module id = 15\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar separate_1 = require(\"../separate/separate\");\nvar identify_1 = require(\"./identify\");\nvar separate_2 = require(\"../separate/separate\");\nfunction default_1(str, options) {\n    var arr = separate_2.separate(str);\n    var identified = identify_1.default(arr, options);\n    // custom filtering-out function\n    if (options.exclude) {\n        for (var index = 0; index < identified.length; index++) {\n            var element = identified[index];\n            if (typeof element === \"object\" && options.exclude(element))\n                identified[index] = element.raw;\n        }\n    }\n    // return the current list (with words being filtered out)\n    if (options.list) {\n        var listed = [];\n        for (var i = 0; i < identified.length; i++) {\n            var fragment = identified[i];\n            if (typeof fragment !== \"string\")\n                listed.push(fragment);\n        }\n        return listed;\n    }\n    // transform objects to HTML tags\n    identified = identified.map(function (fragment) {\n        if (typeof fragment === \"string\")\n            return fragment;\n        return url2tag(fragment, options);\n    });\n    // join and return\n    return separate_1.deSeparate(identified);\n}\nexports.default = default_1;\nfunction url2tag(fragment, options) {\n    var href = fragment.protocol + fragment.encoded;\n    var original = fragment.raw;\n    if (typeof options.truncate === \"number\") {\n        if (original.length > options.truncate)\n            original = original.substring(0, options.truncate) + \"...\";\n    }\n    if (typeof options.truncate === \"object\") {\n        if (original.length > (options.truncate[0] + options.truncate[1]))\n            original = original.substr(0, options.truncate[0]) + \"...\" + original.substr(original.length - options.truncate[1]);\n    }\n    if (options.attributes === undefined)\n        options.attributes = [];\n    return \"<a href=\\\"\" + href + \"\\\" \" + options.attributes.map(function (attribute) {\n        if (typeof attribute === 'function') {\n            var name = (attribute(fragment) || {}).name;\n            var value = (attribute(fragment) || {}).value;\n            if (name && !value)\n                return \" name \";\n            if (name && value)\n                return \" \" + name + \"=\\\"\" + value + \"\\\" \";\n        }\n        else\n            return \" \" + attribute.name + \"=\\\"\" + attribute.value + \"\\\" \";\n    }).join(\"\") + \">\" + original + \"</a>\";\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/anchorme/dist-node/transform/transform.js\n// module id = 16\n// module chunks = 0","/**\n *\n * @hack\n *\n * This is a dirty hack to fix URLs that have parenthesis and quotation marks in them\n * For example take this paragraph:\n *\n * \"\"\"\"\n * I visited this url: \"http://www.wikipedia.com/some_article(with_paranthesis)\"\n * and this URL: (http://www.wikipedia.com/some_article(with_paranthesis))\n * \"\"\"\"\n *\n * The quotation marks `'` `\"` and parenthesis `(` `)` `[` `]`\n * can be considered to be part of the URL, and as a\n * punctuation marks surrounding the URL.\n * While this hack works for the most part, it's quite dirty and\n * I may replace it with something better in the future.\n *\n *\n * Another fix is removing punctuation marks that may appear at the end of URL\n * Example:\n *\n * \"\"\"\"\n * I've visited google.com, facebook.com, and yahoo.com.\n * \"\"\"\"\n *\n * @todo: replace the following function with something cleaner.\n *\n *\n**/\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction fixSeparators(arr, sep1, sep2) {\n    arr.forEach(function (bit, i) {\n        if ((bit.indexOf(\".\") > -1) &&\n            (!(arr[i - 1] === sep1 && arr[i + 1] === sep2)) &&\n            (arr[i + 1] === sep1 || arr[i + 1] === sep2) // the one after it, is either sep1 or sep2\n        ) {\n            arr[i] = arr[i] + arr[i + 1];\n            if (typeof arr[i + 2] === \"string\")\n                arr[i] = arr[i] + arr[i + 2];\n            if (typeof arr[i + 3] === \"string\")\n                arr[i] = arr[i] + arr[i + 3];\n            if (typeof arr[i + 4] === \"string\")\n                arr[i] = arr[i] + arr[i + 4];\n            arr.splice(i + 1, 4);\n            fixSeparators(arr, sep1, sep2);\n        }\n    });\n    return arr;\n}\nexports.fixSeparators = fixSeparators;\nfunction default_1(arr) {\n    arr = fixSeparators(arr, \"(\", \")\");\n    arr = fixSeparators(arr, \"[\", \"]\");\n    arr = fixSeparators(arr, \"\\\"\", \"\\\"\");\n    arr = fixSeparators(arr, \"'\", \"'\");\n    return arr;\n}\nexports.default = default_1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/anchorme/dist-node/separate/fix.js\n// module id = 17\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar email_1 = require(\"../tests/email\");\nvar hasprotocol_1 = require(\"../tests/hasprotocol\");\nvar lists_1 = require(\"../lists\");\nvar ip_1 = require(\"../tests/ip\");\nvar url_1 = require(\"../tests/url\");\nfunction default_1(inputArr, options) {\n    return inputArr.map(function (fragment, index) {\n        var encoded = encodeURI(fragment);\n        // quick validations\n        // 1\n        if (encoded.indexOf(\".\") < 1 && (!hasprotocol_1.default(encoded)))\n            return fragment;\n        var urlObj = null;\n        var protocol = hasprotocol_1.default(encoded) || \"\";\n        // remove the protocol before proceeding to any other test\n        if (protocol)\n            encoded = encoded.substr(protocol.length);\n        // test 1: it's a file\n        if (options.files && protocol === \"file:///\" && encoded.split(/\\/|\\\\/).length - 1) {\n            urlObj = {\n                reason: \"file\",\n                protocol: protocol,\n                raw: fragment,\n                encoded: encoded,\n            };\n        }\n        // test 2: it's a URL\n        if ((!urlObj) && options.urls && url_1.default(encoded)) {\n            urlObj = {\n                reason: \"url\",\n                protocol: protocol ? protocol : typeof options.defaultProtocol === \"function\" ? options.defaultProtocol(fragment) : options.defaultProtocol,\n                raw: fragment,\n                encoded: encoded,\n            };\n        }\n        // test 3: it's an email\n        if ((!urlObj) && options.emails && email_1.default(encoded)) {\n            urlObj = {\n                reason: \"email\",\n                protocol: \"mailto:\",\n                raw: fragment,\n                encoded: encoded,\n            };\n        }\n        // test 4: it's an IP\n        if ((!urlObj) && options.ips && ip_1.default(encoded)) {\n            urlObj = {\n                reason: \"ip\",\n                protocol: protocol ? protocol : typeof options.defaultProtocol === \"function\" ? options.defaultProtocol(fragment) : options.defaultProtocol,\n                raw: fragment,\n                encoded: encoded,\n            };\n        }\n        if (!urlObj)\n            return fragment;\n        else {\n            if ((inputArr[index - 1] === \"'\" || inputArr[index - 1] === '\"') && ~lists_1.htmlAttrs.indexOf(inputArr[index - 2]))\n                return fragment;\n            return urlObj;\n        }\n    });\n}\nexports.default = default_1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/anchorme/dist-node/transform/identify.js\n// module id = 18\n// module chunks = 0","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.DOMPurify = factory());\n}(this, (function () { 'use strict';\n\nvar html = ['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr'];\n\n// SVG\nvar svg = ['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'audio', 'canvas', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'video', 'view', 'vkern'];\n\nvar svgFilters = ['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'feSpecularLighting', 'feTile', 'feTurbulence'];\n\nvar mathMl = ['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmuliscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mpspace', 'msqrt', 'mystyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover'];\n\nvar text = ['#text'];\n\nvar html$1 = ['accept', 'action', 'align', 'alt', 'autocomplete', 'background', 'bgcolor', 'border', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'coords', 'crossorigin', 'datetime', 'default', 'dir', 'disabled', 'download', 'enctype', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'integrity', 'ismap', 'label', 'lang', 'list', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'multiple', 'name', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'type', 'usemap', 'valign', 'value', 'width', 'xmlns'];\n\nvar svg$1 = ['accent-height', 'accumulate', 'additivive', 'alignment-baseline', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'specularconstant', 'specularexponent', 'spreadmethod', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'tabindex', 'targetx', 'targety', 'transform', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan'];\n\nvar mathMl$1 = ['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns'];\n\nvar xml = ['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink'];\n\n/* Add properties to a lookup table */\nfunction addToSet(set, array) {\n  var l = array.length;\n  while (l--) {\n    if (typeof array[l] === 'string') {\n      array[l] = array[l].toLowerCase();\n    }\n    set[array[l]] = true;\n  }\n  return set;\n}\n\n/* Shallow clone an object */\nfunction clone(object) {\n  var newObject = {};\n  var property = void 0;\n  for (property in object) {\n    if (Object.prototype.hasOwnProperty.call(object, property)) {\n      newObject[property] = object[property];\n    }\n  }\n  return newObject;\n}\n\nvar MUSTACHE_EXPR = /\\{\\{[\\s\\S]*|[\\s\\S]*\\}\\}/gm; // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nvar ERB_EXPR = /<%[\\s\\S]*|[\\s\\S]*%>/gm;\nvar DATA_ATTR = /^data-[\\-\\w.\\u00B7-\\uFFFF]/; // eslint-disable-line no-useless-escape\nvar ARIA_ATTR = /^aria-[\\-\\w]+$/; // eslint-disable-line no-useless-escape\nvar IS_ALLOWED_URI = /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i; // eslint-disable-line no-useless-escape\nvar IS_SCRIPT_OR_DATA = /^(?:\\w+script|data):/i;\nvar ATTR_WHITESPACE = /[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205f\\u3000]/g; // This needs to be extensive thanks to Webkit/Blink's behavior\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar getGlobal = function getGlobal() {\n  return typeof window === 'undefined' ? null : window;\n};\n\nfunction createDOMPurify() {\n  var window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n\n  var DOMPurify = function DOMPurify(root) {\n    return createDOMPurify(root);\n  };\n\n  /**\n   * Version label, exposed for easier checks\n   * if DOMPurify is up to date or not\n   */\n  DOMPurify.version = '1.0.3';\n\n  /**\n   * Array of elements that DOMPurify removed during sanitation.\n   * Empty if nothing was removed.\n   */\n  DOMPurify.removed = [];\n\n  if (!window || !window.document || window.document.nodeType !== 9) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n\n    return DOMPurify;\n  }\n\n  var originalDocument = window.document;\n  var useDOMParser = false; // See comment below\n  var useXHR = false;\n\n  var document = window.document;\n  var DocumentFragment = window.DocumentFragment,\n      HTMLTemplateElement = window.HTMLTemplateElement,\n      Node = window.Node,\n      NodeFilter = window.NodeFilter,\n      _window$NamedNodeMap = window.NamedNodeMap,\n      NamedNodeMap = _window$NamedNodeMap === undefined ? window.NamedNodeMap || window.MozNamedAttrMap : _window$NamedNodeMap,\n      Text = window.Text,\n      Comment = window.Comment,\n      DOMParser = window.DOMParser,\n      _window$XMLHttpReques = window.XMLHttpRequest,\n      XMLHttpRequest = _window$XMLHttpReques === undefined ? window.XMLHttpRequest : _window$XMLHttpReques,\n      _window$encodeURI = window.encodeURI,\n      encodeURI = _window$encodeURI === undefined ? window.encodeURI : _window$encodeURI;\n\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n\n  if (typeof HTMLTemplateElement === 'function') {\n    var template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n\n  var _document = document,\n      implementation = _document.implementation,\n      createNodeIterator = _document.createNodeIterator,\n      getElementsByTagName = _document.getElementsByTagName,\n      createDocumentFragment = _document.createDocumentFragment;\n\n  var importNode = originalDocument.importNode;\n\n  var hooks = {};\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported = implementation && typeof implementation.createHTMLDocument !== 'undefined' && document.documentMode !== 9;\n\n  var MUSTACHE_EXPR$$1 = MUSTACHE_EXPR,\n      ERB_EXPR$$1 = ERB_EXPR,\n      DATA_ATTR$$1 = DATA_ATTR,\n      ARIA_ATTR$$1 = ARIA_ATTR,\n      IS_SCRIPT_OR_DATA$$1 = IS_SCRIPT_OR_DATA,\n      ATTR_WHITESPACE$$1 = ATTR_WHITESPACE;\n\n\n  var IS_ALLOWED_URI$$1 = IS_ALLOWED_URI;\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n\n  /* allowed element names */\n  var ALLOWED_TAGS = null;\n  var DEFAULT_ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray(html), _toConsumableArray(svg), _toConsumableArray(svgFilters), _toConsumableArray(mathMl), _toConsumableArray(text)));\n\n  /* Allowed attribute names */\n  var ALLOWED_ATTR = null;\n  var DEFAULT_ALLOWED_ATTR = addToSet({}, [].concat(_toConsumableArray(html$1), _toConsumableArray(svg$1), _toConsumableArray(mathMl$1), _toConsumableArray(xml)));\n\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  var FORBID_TAGS = null;\n\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  var FORBID_ATTR = null;\n\n  /* Decide if ARIA attributes are okay */\n  var ALLOW_ARIA_ATTR = true;\n\n  /* Decide if custom data attributes are okay */\n  var ALLOW_DATA_ATTR = true;\n\n  /* Decide if unknown protocols are okay */\n  var ALLOW_UNKNOWN_PROTOCOLS = false;\n\n  /* Output should be safe for jQuery's $() factory? */\n  var SAFE_FOR_JQUERY = false;\n\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  var SAFE_FOR_TEMPLATES = false;\n\n  /* Decide if document with <html>... should be returned */\n  var WHOLE_DOCUMENT = false;\n\n  /* Track whether config is already set on this instance of DOMPurify. */\n  var SET_CONFIG = false;\n\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  var FORCE_BODY = false;\n\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html string.\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  var RETURN_DOM = false;\n\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html string */\n  var RETURN_DOM_FRAGMENT = false;\n\n  /* If `RETURN_DOM` or `RETURN_DOM_FRAGMENT` is enabled, decide if the returned DOM\n   * `Node` is imported into the current `Document`. If this flag is not enabled the\n   * `Node` will belong (its ownerDocument) to a fresh `HTMLDocument`, created by\n   * DOMPurify. */\n  var RETURN_DOM_IMPORT = false;\n\n  /* Output should be free from DOM clobbering attacks? */\n  var SANITIZE_DOM = true;\n\n  /* Keep element content when removing element? */\n  var KEEP_CONTENT = true;\n\n  /* Allow usage of profiles like html, svg and mathMl */\n  var USE_PROFILES = {};\n\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  var FORBID_CONTENTS = addToSet({}, ['audio', 'head', 'math', 'script', 'style', 'template', 'svg', 'video']);\n\n  /* Tags that are safe for data: URIs */\n  var DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image']);\n\n  /* Attributes safe for values like \"javascript:\" */\n  var URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'summary', 'title', 'value', 'style', 'xmlns']);\n\n  /* Keep a reference to config to pass to hooks */\n  var CONFIG = null;\n\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n\n  var formElement = document.createElement('form');\n\n  /**\n   * _parseConfig\n   *\n   * @param  optional config literal\n   */\n  // eslint-disable-next-line complexity\n  var _parseConfig = function _parseConfig(cfg) {\n    /* Shield configuration object from tampering */\n    if ((typeof cfg === 'undefined' ? 'undefined' : _typeof(cfg)) !== 'object') {\n      cfg = {};\n    }\n    /* Set configuration parameters */\n    ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR) : DEFAULT_ALLOWED_ATTR;\n    FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS) : {};\n    FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR) : {};\n    USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    SAFE_FOR_JQUERY = cfg.SAFE_FOR_JQUERY || false; // Default false\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_DOM_IMPORT = cfg.RETURN_DOM_IMPORT || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n\n    IS_ALLOWED_URI$$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI$$1;\n\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray(text)));\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html);\n        addToSet(ALLOWED_ATTR, html$1);\n      }\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg);\n        addToSet(ALLOWED_ATTR, svg$1);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg$1);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl);\n        addToSet(ALLOWED_ATTR, mathMl$1);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n    }\n\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS);\n    }\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR);\n    }\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR);\n    }\n\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (Object && 'freeze' in Object) {\n      Object.freeze(cfg);\n    }\n\n    CONFIG = cfg;\n  };\n\n  /**\n   * _forceRemove\n   *\n   * @param  a DOM node\n   */\n  var _forceRemove = function _forceRemove(node) {\n    DOMPurify.removed.push({ element: node });\n    try {\n      node.parentNode.removeChild(node);\n    } catch (err) {\n      node.outerHTML = '';\n    }\n  };\n\n  /**\n   * _removeAttribute\n   *\n   * @param  an Attribute name\n   * @param  a DOM node\n   */\n  var _removeAttribute = function _removeAttribute(name, node) {\n    DOMPurify.removed.push({\n      attribute: node.getAttributeNode(name),\n      from: node\n    });\n    node.removeAttribute(name);\n  };\n\n  /**\n   * _initDocument\n   *\n   * @param  a string of dirty markup\n   * @return a DOM, filled with the dirty markup\n   */\n  var _initDocument = function _initDocument(dirty) {\n    /* Create a HTML document */\n    var doc = void 0;\n    var body = void 0;\n\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    }\n\n    /* Use XHR if necessary because Safari 10.1 and newer are buggy */\n    if (useXHR) {\n      try {\n        dirty = encodeURI(dirty);\n      } catch (err) {}\n      var xhr = new XMLHttpRequest();\n      xhr.responseType = 'document';\n      xhr.open('GET', 'data:text/html;charset=utf-8,' + dirty, false);\n      xhr.send(null);\n      doc = xhr.response;\n    }\n\n    /* Use DOMParser to workaround Firefox bug (see comment below) */\n    if (useDOMParser) {\n      try {\n        doc = new DOMParser().parseFromString(dirty, 'text/html');\n      } catch (err) {}\n    }\n\n    /* Otherwise use createHTMLDocument, because DOMParser is unsafe in\n    Safari (see comment below) */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createHTMLDocument('');\n      body = doc.body;\n      body.parentNode.removeChild(body.parentNode.firstElementChild);\n      body.outerHTML = dirty;\n    }\n\n    /* Work on whole document or just its body */\n    return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n  };\n\n  // Safari 10.1+ (unfixed as of time of writing) has a catastrophic bug in\n  // its implementation of DOMParser such that the following executes the\n  // JavaScript:\n  //\n  // new DOMParser()\n  //   .parseFromString('<svg onload=alert(document.domain)>', 'text/html');\n  //\n  // Later, it was also noticed that even more assumed benign and inert ways\n  // of creating a document are now insecure thanks to Safari. So we work\n  // around that with a feature test and use XHR to create the document in\n  // case we really have to. That one seems safe for now.\n  //\n  // However, Firefox uses a different parser for innerHTML rather than\n  // DOMParser (see https://bugzilla.mozilla.org/show_bug.cgi?id=1205631)\n  // which means that you *must* use DOMParser, otherwise the output may\n  // not be safe if used in a document.write context later.\n  //\n  // So we feature detect the Firefox bug and use the DOMParser if necessary.\n  if (DOMPurify.isSupported) {\n    (function () {\n      var doc = _initDocument('<svg><g onload=\"this.parentNode.remove()\"></g></svg>');\n      if (!doc.querySelector('svg')) {\n        useXHR = true;\n      }\n      try {\n        doc = _initDocument('<svg><p><style><img src=\"</style><img src=x onerror=alert(1)//\">');\n        if (doc.querySelector('svg img')) {\n          useDOMParser = true;\n        }\n      } catch (err) {}\n    })();\n  }\n\n  /**\n   * _createIterator\n   *\n   * @param  document/fragment to create iterator for\n   * @return iterator instance\n   */\n  var _createIterator = function _createIterator(root) {\n    return createNodeIterator.call(root.ownerDocument || root, root, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, function () {\n      return NodeFilter.FILTER_ACCEPT;\n    }, false);\n  };\n\n  /**\n   * _isClobbered\n   *\n   * @param  element to check for clobbering attacks\n   * @return true if clobbered, false if safe\n   */\n  var _isClobbered = function _isClobbered(elm) {\n    if (elm instanceof Text || elm instanceof Comment) {\n      return false;\n    }\n    if (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function') {\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * _isNode\n   *\n   * @param object to check whether it's a DOM node\n   * @return true is object is a DOM node\n   */\n  var _isNode = function _isNode(obj) {\n    return (typeof Node === 'undefined' ? 'undefined' : _typeof(Node)) === 'object' ? obj instanceof Node : obj && (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object' && typeof obj.nodeType === 'number' && typeof obj.nodeName === 'string';\n  };\n\n  /**\n   * _executeHook\n   * Execute user configurable hooks\n   *\n   * @param  {String} entryPoint  Name of the hook's entry point\n   * @param  {Node} currentNode\n   */\n  var _executeHook = function _executeHook(entryPoint, currentNode, data) {\n    if (!hooks[entryPoint]) {\n      return;\n    }\n\n    hooks[entryPoint].forEach(function (hook) {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  };\n\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   *\n   * @param   node to check for permission to exist\n   * @return  true if node was killed, false if left alive\n   */\n  var _sanitizeElements = function _sanitizeElements(currentNode) {\n    var content = void 0;\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeElements', currentNode, null);\n\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Now let's check the element's type and name */\n    var tagName = currentNode.nodeName.toLowerCase();\n\n    /* Execute a hook if present */\n    _executeHook('uponSanitizeElement', currentNode, {\n      tagName: tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Keep content except for black-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName] && typeof currentNode.insertAdjacentHTML === 'function') {\n        try {\n          currentNode.insertAdjacentHTML('AfterEnd', currentNode.innerHTML);\n        } catch (err) {}\n      }\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Convert markup to cover jQuery behavior */\n    if (SAFE_FOR_JQUERY && !currentNode.firstElementChild && (!currentNode.content || !currentNode.content.firstElementChild) && /</g.test(currentNode.textContent)) {\n      DOMPurify.removed.push({ element: currentNode.cloneNode() });\n      currentNode.innerHTML = currentNode.textContent.replace(/</g, '&lt;');\n    }\n\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      content = content.replace(MUSTACHE_EXPR$$1, ' ');\n      content = content.replace(ERB_EXPR$$1, ' ');\n      if (currentNode.textContent !== content) {\n        DOMPurify.removed.push({ element: currentNode.cloneNode() });\n        currentNode.textContent = content;\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeElements', currentNode, null);\n\n    return false;\n  };\n\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param   node to sanitize\n   * @return  void\n   */\n  // eslint-disable-next-line complexity\n  var _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n    var attr = void 0;\n    var name = void 0;\n    var value = void 0;\n    var lcName = void 0;\n    var idAttr = void 0;\n    var attributes = void 0;\n    var l = void 0;\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeAttributes', currentNode, null);\n\n    attributes = currentNode.attributes;\n\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes) {\n      return;\n    }\n\n    var hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR\n    };\n    l = attributes.length;\n\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      attr = attributes[l];\n      name = attr.name;\n      value = attr.value.trim();\n      lcName = name.toLowerCase();\n\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n      value = hookEvent.attrValue;\n\n      /* Remove attribute */\n      // Safari (iOS + Mac), last tested v8.0.5, crashes if you try to\n      // remove a \"name\" attribute from an <img> tag that has an \"id\"\n      // attribute at the time.\n      if (lcName === 'name' && currentNode.nodeName === 'IMG' && attributes.id) {\n        idAttr = attributes.id;\n        attributes = Array.prototype.slice.apply(attributes);\n        _removeAttribute('id', currentNode);\n        _removeAttribute(name, currentNode);\n        if (attributes.indexOf(idAttr) > l) {\n          currentNode.setAttribute('id', idAttr.value);\n        }\n      } else if (\n      // This works around a bug in Safari, where input[type=file]\n      // cannot be dynamically set after type has been removed\n      currentNode.nodeName === 'INPUT' && lcName === 'type' && value === 'file' && (ALLOWED_ATTR[lcName] || !FORBID_ATTR[lcName])) {\n        continue;\n      } else {\n        // This avoids a crash in Safari v9.0 with double-ids.\n        // The trick is to first set the id to be empty and then to\n        // remove the attribute\n        if (name === 'id') {\n          currentNode.setAttribute(name, '');\n        }\n        _removeAttribute(name, currentNode);\n      }\n\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        continue;\n      }\n\n      /* Make sure attribute cannot clobber */\n      if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n        continue;\n      }\n\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        value = value.replace(MUSTACHE_EXPR$$1, ' ');\n        value = value.replace(ERB_EXPR$$1, ' ');\n      }\n\n      /* Allow valid data-* attributes: At least one character after \"-\"\n         (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n         XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n         We don't need to check the value; it's always URI safe. */\n      if (ALLOW_DATA_ATTR && DATA_ATTR$$1.test(lcName)) {\n        // This attribute is safe\n      } else if (ALLOW_ARIA_ATTR && ARIA_ATTR$$1.test(lcName)) {\n        // This attribute is safe\n        /* Otherwise, check the name is permitted */\n      } else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n        continue;\n\n        /* Check value is safe. First, is attr inert? If so, is safe */\n      } else if (URI_SAFE_ATTRIBUTES[lcName]) {\n        // This attribute is safe\n        /* Check no script, data or unknown possibly unsafe URI\n         unless we know URI values are safe for that attribute */\n      } else if (IS_ALLOWED_URI$$1.test(value.replace(ATTR_WHITESPACE$$1, ''))) {\n        // This attribute is safe\n        /* Keep image data URIs alive if src/xlink:href is allowed */\n      } else if ((lcName === 'src' || lcName === 'xlink:href') && value.indexOf('data:') === 0 && DATA_URI_TAGS[currentNode.nodeName.toLowerCase()]) {\n        // This attribute is safe\n        /* Allow unknown protocols: This provides support for links that\n         are handled by protocol handlers which may be unknown ahead of\n         time, e.g. fb:, spotify: */\n      } else if (ALLOW_UNKNOWN_PROTOCOLS && !IS_SCRIPT_OR_DATA$$1.test(value.replace(ATTR_WHITESPACE$$1, ''))) {\n        // This attribute is safe\n        /* Check for binary attributes */\n        // eslint-disable-next-line no-negated-condition\n      } else if (!value) {\n        // Binary attributes are safe at this point\n        /* Anything else, presume unsafe, do not add it back */\n      } else {\n        continue;\n      }\n\n      /* Handle invalid data-* attribute set by try-catching it */\n      try {\n        currentNode.setAttribute(name, value);\n        DOMPurify.removed.pop();\n      } catch (err) {}\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeAttributes', currentNode, null);\n  };\n\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param  fragment to iterate over recursively\n   * @return void\n   */\n  var _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n    var shadowNode = void 0;\n    var shadowIterator = _createIterator(fragment);\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeShadowDOM', fragment, null);\n\n    while (shadowNode = shadowIterator.nextNode()) {\n      /* Execute a hook if present */\n      _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(shadowNode)) {\n        continue;\n      }\n\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(shadowNode);\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeShadowDOM', fragment, null);\n  };\n\n  /**\n   * Sanitize\n   * Public method providing core sanitation functionality\n   *\n   * @param {String|Node} dirty string or DOM node\n   * @param {Object} configuration object\n   */\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty, cfg) {\n    var body = void 0;\n    var importedNode = void 0;\n    var currentNode = void 0;\n    var oldNode = void 0;\n    var returnNode = void 0;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    if (!dirty) {\n      dirty = '<!-->';\n    }\n\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      // eslint-disable-next-line no-negated-condition\n      if (typeof dirty.toString !== 'function') {\n        throw new TypeError('toString is not a function');\n      } else {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw new TypeError('dirty is not a string, aborting');\n        }\n      }\n    }\n\n    /* Check we can run. Otherwise fall back or ignore */\n    if (!DOMPurify.isSupported) {\n      if (_typeof(window.toStaticHTML) === 'object' || typeof window.toStaticHTML === 'function') {\n        if (typeof dirty === 'string') {\n          return window.toStaticHTML(dirty);\n        } else if (_isNode(dirty)) {\n          return window.toStaticHTML(dirty.outerHTML);\n        }\n      }\n      return dirty;\n    }\n\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n\n    if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!-->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else {\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (!RETURN_DOM && !WHOLE_DOCUMENT && dirty.indexOf('<') === -1) {\n        return dirty;\n      }\n\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : '';\n      }\n    }\n\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n\n    /* Get node iterator */\n    var nodeIterator = _createIterator(body);\n\n    /* Now start iterating over the created document */\n    while (currentNode = nodeIterator.nextNode()) {\n      /* Fix IE's strange behavior with manipulated textNodes #89 */\n      if (currentNode.nodeType === 3 && currentNode === oldNode) {\n        continue;\n      }\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(currentNode)) {\n        continue;\n      }\n\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(currentNode);\n\n      oldNode = currentNode;\n    }\n\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n\n        while (body.firstChild) {\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n\n      if (RETURN_DOM_IMPORT) {\n        /* AdoptNode() is not used because internal state is not reset\n               (e.g. the past names map of a HTMLFormElement), this is safe\n               in theory but we would rather not risk another attack vector.\n               The state that is cloned by importNode() is explicitly defined\n               by the specs. */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n\n      return returnNode;\n    }\n\n    return WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n  };\n\n  /**\n   * Public method to set the configuration once\n   * setConfig\n   *\n   * @param {Object} configuration object\n   * @return void\n   */\n  DOMPurify.setConfig = function (cfg) {\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n\n  /**\n   * Public method to remove the configuration\n   * clearConfig\n   *\n   * @return void\n   */\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n\n  /**\n   * AddHook\n   * Public method to add DOMPurify hooks\n   *\n   * @param {String} entryPoint\n   * @param {Function} hookFunction\n   */\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n    hooks[entryPoint] = hooks[entryPoint] || [];\n    hooks[entryPoint].push(hookFunction);\n  };\n\n  /**\n   * RemoveHook\n   * Public method to remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if more are present)\n   *\n   * @param {String} entryPoint\n   * @return void\n   */\n  DOMPurify.removeHook = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      hooks[entryPoint].pop();\n    }\n  };\n\n  /**\n   * RemoveHooks\n   * Public method to remove all DOMPurify hooks at a given entryPoint\n   *\n   * @param  {String} entryPoint\n   * @return void\n   */\n  DOMPurify.removeHooks = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      hooks[entryPoint] = [];\n    }\n  };\n\n  /**\n   * RemoveAllHooks\n   * Public method to remove all DOMPurify hooks\n   *\n   * @return void\n   */\n  DOMPurify.removeAllHooks = function () {\n    hooks = {};\n  };\n\n  return DOMPurify;\n}\n\nvar purify = createDOMPurify();\n\nreturn purify;\n\n})));\n//# sourceMappingURL=purify.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/dompurify/dist/purify.js\n// module id = 19\n// module chunks = 0","export interface Table<T> {\n\t[index: string]: T;\n}\n\nexport default class HashTable<T> {\n\tpublic  readonly table: Table<T>;\n\tprivate readonly _array: T[];\n\tprivate readonly _prop: string;\n\n\tconstructor(array: T[] = [], prop: string = 'id') {\n\t\tthis._prop = prop;\n\t\tthis._array = array;\n\t\tthis.table = this._arrayToDict(this._array);\n\t}\n\n\tpublic add(item: T): HashTable<T> {\n\t\tthis._array.push(item);\n\t\tthis.table[item[this._prop]] = item;\n\n\t\treturn this;\n\t}\n\n\tpublic delete(item: string | number | T ) {\n\t\tif (typeof item === 'string' || typeof item === 'number') {\n\t\t\titem = this.get(item);\n\t\t}\n\n\t\tif (item) {\n\t\t\tthis._array.forEach((arrayItem, i) => {\n\t\t\t\tif (arrayItem[this._prop] === item[this._prop]) {\n\t\t\t\t\tthis._array.splice(i, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn delete this.table[item[this._prop]];\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tpublic get(index: string | number = 0): T {\n\t\treturn index ? this.table[index] : this._array[index];\n\t}\n\n\tget length(): number {\n\t\treturn this._array.length;\n\t}\n\n\tget array(): T[] {\n\t\treturn this._array;\n\t}\n\n\tprivate _arrayToDict(array: T[]): Table<T> {\n\t\treturn array.reduce((obj, item) => {\n\t\t\tobj[item[this._prop]] = item;\n\t\t\treturn obj;\n\t\t}, {});\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/TourRenderer/models/Hashtable.ts"],"sourceRoot":""}